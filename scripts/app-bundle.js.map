{"version":3,"sources":["src/app.js","src/environment.js","src/main.js","src/resources/index.js","src/services/picture-service.js","src/services/user-service.js","src/components/picture/interact.js","src/components/picture/picture-test.js","src/components/user/user-list.js","src/components/user/user-registration.js"],"names":["App","message","debug","testing","webApiUrl","webApiUsersPath","webApiPicturesPath","configure","aurelia","use","standardConfiguration","feature","plugin","developmentLogging","start","then","setRoot","config","PictureService","restClient","getPicture","uniquePictureName","isOriginalSize","createRequest","asGet","withParams","uniqueName","original","withBaseUrl","withTimeout","send","UserService","getUsers","pageNumber","pageSize","getUser","id","postUser","user","asPost","withContent","realWindow","window","el","document","createTextNode","ownerDocument","wrap","DocumentFragment","blank","SVGElement","SVGSVGElement","SVGElementInstance","HTMLElement","Element","PointerEvent","MSPointerEvent","pEventTypes","hypot","Math","x","y","sqrt","tmpXY","documents","interactables","interactions","dynamicDrop","delegatedEvents","defaultOptions","base","accept","actionChecker","styleCursor","preventDefault","origin","deltaSource","allowFrom","ignoreFrom","_context","dropChecker","drag","enabled","manualStart","max","Infinity","maxPerElement","snap","restrict","inertia","autoScroll","axis","drop","overlap","resize","square","preserveAspectRatio","margin","NaN","edges","invert","gesture","perAction","endOnly","range","targets","offsets","relativePoints","container","speed","resistance","minSpeed","endSpeed","allowResume","zeroResumeDelta","smoothEndDuration","_holdDuration","interaction","i","scroll","options","target","prepared","name","getWindow","element","now","Date","getTime","dtx","prevTimeX","dty","prevTimeY","vx","vy","sx","sy","velocity","isWindow","scrollBy","scrollLeft","scrollTop","isScrolling","cancelFrame","reqFrame","stop","supportsTouch","DocumentTouch","supportsPointerEvent","pointerMoveTolerance","prevTouchTime","maxInteractions","actionCursors","all","atob","resizex","resizey","resizexy","resizetop","resizeleft","resizebottom","resizeright","resizetopleft","resizebottomright","resizetopright","resizebottomleft","actionIsEnabled","wheelEvent","eventTypes","globalEvents","isOperaMobile","navigator","appName","userAgent","match","isIOS7","test","platform","appVersion","prefixedMatchesSelector","prototype","ie8MatchesSelector","requestAnimationFrame","cancelAnimationFrame","events","useAttachEvent","addEvent","removeEvent","on","elements","attachedListeners","add","type","listener","useCapture","elementIndex","indexOf","typeCount","push","supplied","wrapped","useCount","contains","ret","listeners","listenerIndex","event","immediatePropagationStopped","srcElement","currentTarget","preventDef","stopPropagation","stopProp","stopImmediatePropagation","stopImmProp","pageX","clientX","documentElement","pageY","clientY","Boolean","remove","hasOwnProperty","len","length","splice","returnValue","cancelBubble","_elements","_targets","_attachedListeners","isElement","o","_window","nodeType","nodeName","thing","Window","isDocFrag","isArray","isObject","undefined","isFunction","isNumber","isBool","isString","trySelector","value","querySelector","extend","dest","source","prop","prefixedPropREs","webkit","pointerExtend","deprecated","vendor","copyCoords","src","page","client","timeStamp","setEventXY","targetObj","pointers","pointer","pointerAverage","getPageXY","getClientXY","setEventDeltas","prev","cur","dt","isNativePointer","Event","Touch","getXY","xy","scrollX","scrollY","getScrollXY","win","getPointerId","pointerId","identifier","getActualElement","correspondingUseElement","node","rootNode","defaultView","parentWindow","getElementClientRect","clientRect","getBoundingClientRect","getClientRects","left","right","top","bottom","width","height","getElementRect","getTouchPair","touches","changedTouches","average","screenX","screenY","touchBBox","minX","min","minY","maxX","maxY","touchDistance","sourceX","sourceY","dx","dy","touchAngle","prevAngle","angle","atan","PI","dr","drClamped","getOriginXY","interactable","parentElement","getRect","closest","_getQBezierValue","t","p1","p2","p3","iT","getQuadraticCurvePoint","startX","startY","cpX","cpY","endX","endY","position","easeOutQuad","b","c","d","nodeContains","parent","child","parentNode","selector","matchesSelector","host","inContext","testIgnore","interactableElement","matchesUpTo","testAllow","checkAxis","thisAxis","checkSnap","action","checkRestrict","checkAutoScroll","withinInteractionLimit","maxActions","activeInteractions","targetCount","targetElementCount","otherAction","active","interacting","indexOfDeepestElement","dropzone","deepestZone","index","deepestZoneParents","dropzoneParents","n","unshift","ownerSVGElement","parents","lastChild","previousSibling","Interaction","dropTarget","dropElement","prevDropTarget","prevDropElement","matches","matchElements","inertiaStatus","smoothEnd","ending","startEvent","upCoords","xe","ye","t0","vx0","vys","duration","resumeDx","resumeDy","lambda_v0","one_ve_v0","Function","bind","boundInertiaFrame","inertiaFrame","boundSmoothEndFrame","smoothEndFrame","that","activeDrops","dropzones","rects","pointerIds","downTargets","downTimes","holdTimers","prevCoords","curCoords","startCoords","pointerDelta","downEvent","downPointer","_eventTarget","_curEventTarget","prevEvent","tapTime","prevTap","startOffset","restrictOffset","snapOffsets","startDistance","prevDistance","distance","scale","startAngle","snapStatus","realX","realY","snappedX","snappedY","locked","changed","restrictStatus","restrictedX","restrictedY","restricted","pointerIsDown","pointerWasMoved","gesturing","dragging","resizing","resizeAxes","mouse","ptr","pointerOver","eventTarget","curMatches","curMatchElements","prevTargetElement","addPointer","elementInteractable","get","elementAction","validateAction","getAction","pushCurMatches","forEachSelector","validateSelector","pointerHover","move","curEventTarget","_doc","style","cursor","getActionCursor","checkAndPreventDefault","pointerOut","selectorDown","eventCopy","pointerIndex","setTimeout","pointerHold","collectEventTargets","pushMatches","context","querySelectorAll","pointerDown","forceAction","_element","newAction","setModifications","coords","preEnd","shouldMove","shouldSnap","shouldRestrict","setSnapping","setRestriction","setStartOffsets","rect","snapOffset","offset","elementRect","pointerMove","pageUp","clientUp","inertiaPosition","recordPointer","duplicateMove","clearTimeout","InteractEvent","absX","abs","absY","targetAxis","thisInteraction","getDraggable","selectorInteractable","starting","autoScrollMove","dragStart","dragEvent","fire","setActiveDrops","dropEvents","getDropEvents","activate","fireActiveDrops","dragMove","draggableElement","getDrop","leave","enter","resizeStart","resizeEvent","startRect","linkedEdges","_linkedEdges","resizeStartAspectRatio","resizeRects","current","previous","delta","deltaRect","resizeMove","invertible","originalEdges","swap","edge","gestureStart","gestureEvent","ds","gestureMove","isNaN","pointerUp","pointerEnd","removePointer","pointerCancel","ie8Dblclick","endEvent","inertiaOptions","pointerSpeed","inertiaPossible","endSnap","endRestrict","snapRestrict","vy0","v0","calcInertia","statusObject","useStatusXY","modifiedXe","modifiedYe","deactivate","collectDrops","drops","dropElements","j","currentElement","prevElement","dragElement","possibleDrops","validDrops","dropCheck","dropIndex","pointerEvent","relatedTarget","draggable","dragLeave","prevDropzone","dragEnter","dragmove","currentAction","clearTargets","lambda","te","progress","exp","quadPoint","eventType","collectSelectors","els","_iEvents","interact","isSet","firePointers","interval","createNewDoubleTap","preventOriginalDefault","originalEvent","originalPointer","pointerType","double","propagationStopped","doubleTap","matchElement","pageCoords","status","relIndex","relative","inRange","snapChanged","restriction","prevent","inertiaDur","log","x0","y0","innerWidth","innerHeight","_updateEventTargets","getInteractionFromPointer","mouseEvent","doOnInteractions","method","path","phase","related","clientX0","clientY0","ctrlKey","altKey","shiftKey","metaKey","button","buttons","detail","axes","box","da","prevScale","velocityX","velocityY","atan2","up","down","swipe","cursorKey","edgeNames","checkResizeEdge","defaultActionChecker","shouldResize","resizeEdges","resizeOptions","actionName","interactionListeners","delegateListener","fakeEvent","delegated","selectors","contexts","delegateUseCapture","call","indexOfElement","interactableGet","callback","Interactable","Node","listenToDocument","set","setOnEvents","phases","ondrop","ondropactivate","ondropdeactivate","ondragenter","ondragleave","ondropmove","onstart","onmove","onend","oninertiastart","setPerAction","option","checker","dropped","dropOverlap","horizontal","vertical","dragRect","cx","cy","overlapArea","overlapRatio","newValue","resizable","squareResize","gesturable","actions","setOptions","thisOption","mode","createSnapGrid","gridOffset","grid","anchors","paths","elementOrigin","allActions","rectCheck","rectChecker","iEvent","onEvent","funcName","search","trim","split","off","eventList","matchFound","fn","useCap","methods","perActions","settings","setting","unset","warnOnce","warned","console","warn","apply","arguments","enableDragging","enableResizing","enableGesturing","downTime","getPointerAverage","getTouchBBox","getTouchDistance","getTouchAngle","newvalue","offsetX","offsetY","gridx","round","gridy","newX","newY","endAllInteractions","doc","over","out","cancel","frameElement","parentDoc","error","windowParentError","array","nodeList","replace","limit","elems","lastTime","vendors","currTime","timeToCall","exports","module","define","amd","PictureTest","pictureService","pictureUrl","isLoaded","created","dragMoveListener","textEl","textContent","parseFloat","getAttribute","webkitTransform","transform","setAttribute","success","response","JSON","parse","imageUrl","failure","UserList","userService","users","isWorking","updateUserList","size","userResponse","title","description","UserRegistration","of","validationController","firstName","lastName","email","password","serverError","validateTrigger","manual","ensure","required","withMessage","minLength","register","validate","validation","valid","failureMessage"],"mappings":"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","file":"app-bundle.js","sourcesContent":["export class App {\n  constructor() {\n    this.message = 'Hello World!';\n  }\n}\n","export default {\n  debug: true,\n  testing: true,\n  webApiUrl: 'http://weframers-franolea.rhcloud.com',\n  webApiUsersPath: 'users',\n  webApiPicturesPath: 'pictures'\n};\n","import environment from './environment';\n\nexport function configure(aurelia) {\n  aurelia.use\n    .standardConfiguration()\n    .feature('resources')\n    .plugin('aurelia-validation');\n\n  if (environment.debug) {\n    aurelia.use.developmentLogging();\n  }\n\n  if (environment.testing) {\n    aurelia.use.plugin('aurelia-testing');\n  }\n\n  aurelia.start().then(() => aurelia.setRoot());\n}\n","export function configure(config) {\n  //config.globalResources([]);\n}\n","import {HttpClient} from 'aurelia-http-client';\r\nimport environment from '../environment';\r\n\r\nexport class PictureService {\r\n    constructor() {\r\n        this.restClient = new HttpClient();\r\n    }\r\n\r\n    getPicture(uniquePictureName, isOriginalSize) {\r\n        return this.restClient.createRequest(environment.webApiPicturesPath)\r\n                .asGet()\r\n                .withParams({\r\n                    uniqueName: uniquePictureName,\r\n                    original: isOriginalSize\r\n                })\r\n                .withBaseUrl(environment.webApiUrl)\r\n                .withTimeout(5000)\r\n                .send();\r\n    }\r\n}","import {HttpClient} from 'aurelia-http-client';\r\nimport environment from '../environment';\r\n\r\nexport class UserService {\r\n    constructor() {\r\n        this.restClient = new HttpClient();\r\n    }\r\n\r\n    getUsers() {\r\n        return getUsers(0, 10);\r\n    }\r\n\r\n    getUsers(pageNumber, pageSize) {\r\n        return this.restClient.createRequest(environment.webApiUsersPath)\r\n                .asGet()\r\n                .withBaseUrl(environment.webApiUrl)\r\n                .withTimeout(5000)\r\n                .send()\r\n    }\r\n\r\n    getUser(id) {\r\n        return this.restClient.createRequest(environment.webApiUsersPath + `/${id}`)\r\n                .asGet()\r\n                .withBaseUrl(environment.webApiUrl)\r\n                .withTimeout(2000)\r\n                .send()\r\n    }\r\n\r\n    postUser(user) {\r\n        return this.restClient.createRequest(environment.webApiUsersPath)\r\n                .asPost()\r\n                .withBaseUrl(environment.webApiUrl)\r\n                .withContent(user)\r\n                .withTimeout(3000)\r\n                .send()\r\n    }\r\n\r\n}","/**\r\n * interact.js v1.2.6\r\n *\r\n * Copyright (c) 2012-2015 Taye Adeyemi <dev@taye.me>\r\n * Open source under the MIT License.\r\n * https://raw.github.com/taye/interact.js/master/LICENSE\r\n */\r\n(function (realWindow) {\r\n    'use strict';\r\n\r\n    // return early if there's no window to work with (eg. Node.js)\r\n    if (!realWindow) { return; }\r\n\r\n    var // get wrapped window if using Shadow DOM polyfill\r\n        window = (function () {\r\n            // create a TextNode\r\n            var el = realWindow.document.createTextNode('');\r\n\r\n            // check if it's wrapped by a polyfill\r\n            if (el.ownerDocument !== realWindow.document\r\n                && typeof realWindow.wrap === 'function'\r\n                && realWindow.wrap(el) === el) {\r\n                // return wrapped window\r\n                return realWindow.wrap(realWindow);\r\n            }\r\n\r\n            // no Shadow DOM polyfil or native implementation\r\n            return realWindow;\r\n        }()),\r\n\r\n        document           = window.document,\r\n        DocumentFragment   = window.DocumentFragment   || blank,\r\n        SVGElement         = window.SVGElement         || blank,\r\n        SVGSVGElement      = window.SVGSVGElement      || blank,\r\n        SVGElementInstance = window.SVGElementInstance || blank,\r\n        HTMLElement        = window.HTMLElement        || window.Element,\r\n\r\n        PointerEvent = (window.PointerEvent || window.MSPointerEvent),\r\n        pEventTypes,\r\n\r\n        hypot = Math.hypot || function (x, y) { return Math.sqrt(x * x + y * y); },\r\n\r\n        tmpXY = {},     // reduce object creation in getXY()\r\n\r\n        documents       = [],   // all documents being listened to\r\n\r\n        interactables   = [],   // all set interactables\r\n        interactions    = [],   // all interactions\r\n\r\n        dynamicDrop     = false,\r\n\r\n        // {\r\n        //      type: {\r\n        //          selectors: ['selector', ...],\r\n        //          contexts : [document, ...],\r\n        //          listeners: [[listener, useCapture], ...]\r\n        //      }\r\n        //  }\r\n        delegatedEvents = {},\r\n\r\n        defaultOptions = {\r\n            base: {\r\n                accept        : null,\r\n                actionChecker : null,\r\n                styleCursor   : true,\r\n                preventDefault: 'auto',\r\n                origin        : { x: 0, y: 0 },\r\n                deltaSource   : 'page',\r\n                allowFrom     : null,\r\n                ignoreFrom    : null,\r\n                _context      : document,\r\n                dropChecker   : null\r\n            },\r\n\r\n            drag: {\r\n                enabled: false,\r\n                manualStart: true,\r\n                max: Infinity,\r\n                maxPerElement: 1,\r\n\r\n                snap: null,\r\n                restrict: null,\r\n                inertia: null,\r\n                autoScroll: null,\r\n\r\n                axis: 'xy'\r\n            },\r\n\r\n            drop: {\r\n                enabled: false,\r\n                accept: null,\r\n                overlap: 'pointer'\r\n            },\r\n\r\n            resize: {\r\n                enabled: false,\r\n                manualStart: false,\r\n                max: Infinity,\r\n                maxPerElement: 1,\r\n\r\n                snap: null,\r\n                restrict: null,\r\n                inertia: null,\r\n                autoScroll: null,\r\n\r\n                square: false,\r\n                preserveAspectRatio: false,\r\n                axis: 'xy',\r\n\r\n                // use default margin\r\n                margin: NaN,\r\n\r\n                // object with props left, right, top, bottom which are\r\n                // true/false values to resize when the pointer is over that edge,\r\n                // CSS selectors to match the handles for each direction\r\n                // or the Elements for each handle\r\n                edges: null,\r\n\r\n                // a value of 'none' will limit the resize rect to a minimum of 0x0\r\n                // 'negate' will alow the rect to have negative width/height\r\n                // 'reposition' will keep the width/height positive by swapping\r\n                // the top and bottom edges and/or swapping the left and right edges\r\n                invert: 'none'\r\n            },\r\n\r\n            gesture: {\r\n                manualStart: false,\r\n                enabled: false,\r\n                max: Infinity,\r\n                maxPerElement: 1,\r\n\r\n                restrict: null\r\n            },\r\n\r\n            perAction: {\r\n                manualStart: false,\r\n                max: Infinity,\r\n                maxPerElement: 1,\r\n\r\n                snap: {\r\n                    enabled     : false,\r\n                    endOnly     : false,\r\n                    range       : Infinity,\r\n                    targets     : null,\r\n                    offsets     : null,\r\n\r\n                    relativePoints: null\r\n                },\r\n\r\n                restrict: {\r\n                    enabled: false,\r\n                    endOnly: false\r\n                },\r\n\r\n                autoScroll: {\r\n                    enabled     : false,\r\n                    container   : null,     // the item that is scrolled (Window or HTMLElement)\r\n                    margin      : 60,\r\n                    speed       : 300       // the scroll speed in pixels per second\r\n                },\r\n\r\n                inertia: {\r\n                    enabled          : false,\r\n                    resistance       : 10,    // the lambda in exponential decay\r\n                    minSpeed         : 100,   // target speed must be above this for inertia to start\r\n                    endSpeed         : 10,    // the speed at which inertia is slow enough to stop\r\n                    allowResume      : true,  // allow resuming an action in inertia phase\r\n                    zeroResumeDelta  : true,  // if an action is resumed after launch, set dx/dy to 0\r\n                    smoothEndDuration: 300    // animate to snap/restrict endOnly if there's no inertia\r\n                }\r\n            },\r\n\r\n            _holdDuration: 600\r\n        },\r\n\r\n        // Things related to autoScroll\r\n        autoScroll = {\r\n            interaction: null,\r\n            i: null,    // the handle returned by window.setInterval\r\n            x: 0, y: 0, // Direction each pulse is to scroll in\r\n\r\n            // scroll the window by the values in scroll.x/y\r\n            scroll: function () {\r\n                var options = autoScroll.interaction.target.options[autoScroll.interaction.prepared.name].autoScroll,\r\n                    container = options.container || getWindow(autoScroll.interaction.element),\r\n                    now = new Date().getTime(),\r\n                    // change in time in seconds\r\n                    dtx = (now - autoScroll.prevTimeX) / 1000,\r\n                    dty = (now - autoScroll.prevTimeY) / 1000,\r\n                    vx, vy, sx, sy;\r\n\r\n                // displacement\r\n                if (options.velocity) {\r\n                  vx = options.velocity.x;\r\n                  vy = options.velocity.y;\r\n                }\r\n                else {\r\n                  vx = vy = options.speed\r\n                }\r\n \r\n                sx = vx * dtx;\r\n                sy = vy * dty;\r\n\r\n                if (sx >= 1 || sy >= 1) {\r\n                    if (isWindow(container)) {\r\n                        container.scrollBy(autoScroll.x * sx, autoScroll.y * sy);\r\n                    }\r\n                    else if (container) {\r\n                        container.scrollLeft += autoScroll.x * sx;\r\n                        container.scrollTop  += autoScroll.y * sy;\r\n                    }\r\n\r\n                    if (sx >=1) autoScroll.prevTimeX = now;\r\n                    if (sy >= 1) autoScroll.prevTimeY = now;\r\n                }\r\n\r\n                if (autoScroll.isScrolling) {\r\n                    cancelFrame(autoScroll.i);\r\n                    autoScroll.i = reqFrame(autoScroll.scroll);\r\n                }\r\n            },\r\n\r\n            isScrolling: false,\r\n            prevTimeX: 0,\r\n            prevTimeY: 0,\r\n\r\n            start: function (interaction) {\r\n                autoScroll.isScrolling = true;\r\n                cancelFrame(autoScroll.i);\r\n\r\n                autoScroll.interaction = interaction;\r\n                autoScroll.prevTimeX = new Date().getTime();\r\n                autoScroll.prevTimeY = new Date().getTime();\r\n                autoScroll.i = reqFrame(autoScroll.scroll);\r\n            },\r\n\r\n            stop: function () {\r\n                autoScroll.isScrolling = false;\r\n                cancelFrame(autoScroll.i);\r\n            }\r\n        },\r\n\r\n        // Does the browser support touch input?\r\n        supportsTouch = (('ontouchstart' in window) || window.DocumentTouch && document instanceof window.DocumentTouch),\r\n\r\n        // Does the browser support PointerEvents\r\n        supportsPointerEvent = !!PointerEvent,\r\n\r\n        // Less Precision with touch input\r\n        margin = supportsTouch || supportsPointerEvent? 20: 10,\r\n\r\n        pointerMoveTolerance = 1,\r\n\r\n        // for ignoring browser's simulated mouse events\r\n        prevTouchTime = 0,\r\n\r\n        // Allow this many interactions to happen simultaneously\r\n        maxInteractions = Infinity,\r\n\r\n        // Check if is IE9 or older\r\n        actionCursors = (document.all && !window.atob) ? {\r\n            drag    : 'move',\r\n            resizex : 'e-resize',\r\n            resizey : 's-resize',\r\n            resizexy: 'se-resize',\r\n\r\n            resizetop        : 'n-resize',\r\n            resizeleft       : 'w-resize',\r\n            resizebottom     : 's-resize',\r\n            resizeright      : 'e-resize',\r\n            resizetopleft    : 'se-resize',\r\n            resizebottomright: 'se-resize',\r\n            resizetopright   : 'ne-resize',\r\n            resizebottomleft : 'ne-resize',\r\n\r\n            gesture : ''\r\n        } : {\r\n            drag    : 'move',\r\n            resizex : 'ew-resize',\r\n            resizey : 'ns-resize',\r\n            resizexy: 'nwse-resize',\r\n\r\n            resizetop        : 'ns-resize',\r\n            resizeleft       : 'ew-resize',\r\n            resizebottom     : 'ns-resize',\r\n            resizeright      : 'ew-resize',\r\n            resizetopleft    : 'nwse-resize',\r\n            resizebottomright: 'nwse-resize',\r\n            resizetopright   : 'nesw-resize',\r\n            resizebottomleft : 'nesw-resize',\r\n\r\n            gesture : ''\r\n        },\r\n\r\n        actionIsEnabled = {\r\n            drag   : true,\r\n            resize : true,\r\n            gesture: true\r\n        },\r\n\r\n        // because Webkit and Opera still use 'mousewheel' event type\r\n        wheelEvent = 'onmousewheel' in document? 'mousewheel': 'wheel',\r\n\r\n        eventTypes = [\r\n            'dragstart',\r\n            'dragmove',\r\n            'draginertiastart',\r\n            'dragend',\r\n            'dragenter',\r\n            'dragleave',\r\n            'dropactivate',\r\n            'dropdeactivate',\r\n            'dropmove',\r\n            'drop',\r\n            'resizestart',\r\n            'resizemove',\r\n            'resizeinertiastart',\r\n            'resizeend',\r\n            'gesturestart',\r\n            'gesturemove',\r\n            'gestureinertiastart',\r\n            'gestureend',\r\n\r\n            'down',\r\n            'move',\r\n            'up',\r\n            'cancel',\r\n            'tap',\r\n            'doubletap',\r\n            'hold'\r\n        ],\r\n\r\n        globalEvents = {},\r\n\r\n        // Opera Mobile must be handled differently\r\n        isOperaMobile = navigator.appName == 'Opera' &&\r\n            supportsTouch &&\r\n            navigator.userAgent.match('Presto'),\r\n\r\n        // scrolling doesn't change the result of getClientRects on iOS 7\r\n        isIOS7 = (/iP(hone|od|ad)/.test(navigator.platform)\r\n                         && /OS 7[^\\d]/.test(navigator.appVersion)),\r\n\r\n        // prefix matchesSelector\r\n        prefixedMatchesSelector = 'matches' in Element.prototype?\r\n                'matches': 'webkitMatchesSelector' in Element.prototype?\r\n                    'webkitMatchesSelector': 'mozMatchesSelector' in Element.prototype?\r\n                        'mozMatchesSelector': 'oMatchesSelector' in Element.prototype?\r\n                            'oMatchesSelector': 'msMatchesSelector',\r\n\r\n        // will be polyfill function if browser is IE8\r\n        ie8MatchesSelector,\r\n\r\n        // native requestAnimationFrame or polyfill\r\n        reqFrame = realWindow.requestAnimationFrame,\r\n        cancelFrame = realWindow.cancelAnimationFrame,\r\n\r\n        // Events wrapper\r\n        events = (function () {\r\n            var useAttachEvent = ('attachEvent' in window) && !('addEventListener' in window),\r\n                addEvent       = useAttachEvent?  'attachEvent': 'addEventListener',\r\n                removeEvent    = useAttachEvent?  'detachEvent': 'removeEventListener',\r\n                on             = useAttachEvent? 'on': '',\r\n\r\n                elements          = [],\r\n                targets           = [],\r\n                attachedListeners = [];\r\n\r\n            function add (element, type, listener, useCapture) {\r\n                var elementIndex = indexOf(elements, element),\r\n                    target = targets[elementIndex];\r\n\r\n                if (!target) {\r\n                    target = {\r\n                        events: {},\r\n                        typeCount: 0\r\n                    };\r\n\r\n                    elementIndex = elements.push(element) - 1;\r\n                    targets.push(target);\r\n\r\n                    attachedListeners.push((useAttachEvent ? {\r\n                            supplied: [],\r\n                            wrapped : [],\r\n                            useCount: []\r\n                        } : null));\r\n                }\r\n\r\n                if (!target.events[type]) {\r\n                    target.events[type] = [];\r\n                    target.typeCount++;\r\n                }\r\n\r\n                if (!contains(target.events[type], listener)) {\r\n                    var ret;\r\n\r\n                    if (useAttachEvent) {\r\n                        var listeners = attachedListeners[elementIndex],\r\n                            listenerIndex = indexOf(listeners.supplied, listener);\r\n\r\n                        var wrapped = listeners.wrapped[listenerIndex] || function (event) {\r\n                            if (!event.immediatePropagationStopped) {\r\n                                event.target = event.srcElement;\r\n                                event.currentTarget = element;\r\n\r\n                                event.preventDefault = event.preventDefault || preventDef;\r\n                                event.stopPropagation = event.stopPropagation || stopProp;\r\n                                event.stopImmediatePropagation = event.stopImmediatePropagation || stopImmProp;\r\n\r\n                                if (/mouse|click/.test(event.type)) {\r\n                                    event.pageX = event.clientX + getWindow(element).document.documentElement.scrollLeft;\r\n                                    event.pageY = event.clientY + getWindow(element).document.documentElement.scrollTop;\r\n                                }\r\n\r\n                                listener(event);\r\n                            }\r\n                        };\r\n\r\n                        ret = element[addEvent](on + type, wrapped, Boolean(useCapture));\r\n\r\n                        if (listenerIndex === -1) {\r\n                            listeners.supplied.push(listener);\r\n                            listeners.wrapped.push(wrapped);\r\n                            listeners.useCount.push(1);\r\n                        }\r\n                        else {\r\n                            listeners.useCount[listenerIndex]++;\r\n                        }\r\n                    }\r\n                    else {\r\n                        ret = element[addEvent](type, listener, useCapture || false);\r\n                    }\r\n                    target.events[type].push(listener);\r\n\r\n                    return ret;\r\n                }\r\n            }\r\n\r\n            function remove (element, type, listener, useCapture) {\r\n                var i,\r\n                    elementIndex = indexOf(elements, element),\r\n                    target = targets[elementIndex],\r\n                    listeners,\r\n                    listenerIndex,\r\n                    wrapped = listener;\r\n\r\n                if (!target || !target.events) {\r\n                    return;\r\n                }\r\n\r\n                if (useAttachEvent) {\r\n                    listeners = attachedListeners[elementIndex];\r\n                    listenerIndex = indexOf(listeners.supplied, listener);\r\n                    wrapped = listeners.wrapped[listenerIndex];\r\n                }\r\n\r\n                if (type === 'all') {\r\n                    for (type in target.events) {\r\n                        if (target.events.hasOwnProperty(type)) {\r\n                            remove(element, type, 'all');\r\n                        }\r\n                    }\r\n                    return;\r\n                }\r\n\r\n                if (target.events[type]) {\r\n                    var len = target.events[type].length;\r\n\r\n                    if (listener === 'all') {\r\n                        for (i = 0; i < len; i++) {\r\n                            remove(element, type, target.events[type][i], Boolean(useCapture));\r\n                        }\r\n                        return;\r\n                    } else {\r\n                        for (i = 0; i < len; i++) {\r\n                            if (target.events[type][i] === listener) {\r\n                                element[removeEvent](on + type, wrapped, useCapture || false);\r\n                                target.events[type].splice(i, 1);\r\n\r\n                                if (useAttachEvent && listeners) {\r\n                                    listeners.useCount[listenerIndex]--;\r\n                                    if (listeners.useCount[listenerIndex] === 0) {\r\n                                        listeners.supplied.splice(listenerIndex, 1);\r\n                                        listeners.wrapped.splice(listenerIndex, 1);\r\n                                        listeners.useCount.splice(listenerIndex, 1);\r\n                                    }\r\n                                }\r\n\r\n                                break;\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                    if (target.events[type] && target.events[type].length === 0) {\r\n                        target.events[type] = null;\r\n                        target.typeCount--;\r\n                    }\r\n                }\r\n\r\n                if (!target.typeCount) {\r\n                    targets.splice(elementIndex, 1);\r\n                    elements.splice(elementIndex, 1);\r\n                    attachedListeners.splice(elementIndex, 1);\r\n                }\r\n            }\r\n\r\n            function preventDef () {\r\n                this.returnValue = false;\r\n            }\r\n\r\n            function stopProp () {\r\n                this.cancelBubble = true;\r\n            }\r\n\r\n            function stopImmProp () {\r\n                this.cancelBubble = true;\r\n                this.immediatePropagationStopped = true;\r\n            }\r\n\r\n            return {\r\n                add: add,\r\n                remove: remove,\r\n                useAttachEvent: useAttachEvent,\r\n\r\n                _elements: elements,\r\n                _targets: targets,\r\n                _attachedListeners: attachedListeners\r\n            };\r\n        }());\r\n\r\n    function blank () {}\r\n\r\n    function isElement (o) {\r\n        if (!o || (typeof o !== 'object')) { return false; }\r\n\r\n        var _window = getWindow(o) || window;\r\n\r\n        return (/object|function/.test(typeof _window.Element)\r\n            ? o instanceof _window.Element //DOM2\r\n            : o.nodeType === 1 && typeof o.nodeName === \"string\");\r\n    }\r\n    function isWindow (thing) { return thing === window || !!(thing && thing.Window) && (thing instanceof thing.Window); }\r\n    function isDocFrag (thing) { return !!thing && thing instanceof DocumentFragment; }\r\n    function isArray (thing) {\r\n        return isObject(thing)\r\n                && (typeof thing.length !== undefined)\r\n                && isFunction(thing.splice);\r\n    }\r\n    function isObject   (thing) { return !!thing && (typeof thing === 'object'); }\r\n    function isFunction (thing) { return typeof thing === 'function'; }\r\n    function isNumber   (thing) { return typeof thing === 'number'  ; }\r\n    function isBool     (thing) { return typeof thing === 'boolean' ; }\r\n    function isString   (thing) { return typeof thing === 'string'  ; }\r\n\r\n    function trySelector (value) {\r\n        if (!isString(value)) { return false; }\r\n\r\n        // an exception will be raised if it is invalid\r\n        document.querySelector(value);\r\n        return true;\r\n    }\r\n\r\n    function extend (dest, source) {\r\n        for (var prop in source) {\r\n            dest[prop] = source[prop];\r\n        }\r\n        return dest;\r\n    }\r\n\r\n    var prefixedPropREs = {\r\n      webkit: /(Movement[XY]|Radius[XY]|RotationAngle|Force)$/\r\n    };\r\n\r\n    function pointerExtend (dest, source) {\r\n        for (var prop in source) {\r\n          var deprecated = false;\r\n\r\n          // skip deprecated prefixed properties\r\n          for (var vendor in prefixedPropREs) {\r\n            if (prop.indexOf(vendor) === 0 && prefixedPropREs[vendor].test(prop)) {\r\n              deprecated = true;\r\n              break;\r\n            }\r\n          }\r\n\r\n          if (!deprecated) {\r\n            dest[prop] = source[prop];\r\n          }\r\n        }\r\n        return dest;\r\n    }\r\n\r\n    function copyCoords (dest, src) {\r\n        dest.page = dest.page || {};\r\n        dest.page.x = src.page.x;\r\n        dest.page.y = src.page.y;\r\n\r\n        dest.client = dest.client || {};\r\n        dest.client.x = src.client.x;\r\n        dest.client.y = src.client.y;\r\n\r\n        dest.timeStamp = src.timeStamp;\r\n    }\r\n\r\n    function setEventXY (targetObj, pointers, interaction) {\r\n        var pointer = (pointers.length > 1\r\n                       ? pointerAverage(pointers)\r\n                       : pointers[0]);\r\n\r\n        getPageXY(pointer, tmpXY, interaction);\r\n        targetObj.page.x = tmpXY.x;\r\n        targetObj.page.y = tmpXY.y;\r\n\r\n        getClientXY(pointer, tmpXY, interaction);\r\n        targetObj.client.x = tmpXY.x;\r\n        targetObj.client.y = tmpXY.y;\r\n\r\n        targetObj.timeStamp = new Date().getTime();\r\n    }\r\n\r\n    function setEventDeltas (targetObj, prev, cur) {\r\n        targetObj.page.x     = cur.page.x      - prev.page.x;\r\n        targetObj.page.y     = cur.page.y      - prev.page.y;\r\n        targetObj.client.x   = cur.client.x    - prev.client.x;\r\n        targetObj.client.y   = cur.client.y    - prev.client.y;\r\n        targetObj.timeStamp = new Date().getTime() - prev.timeStamp;\r\n\r\n        // set pointer velocity\r\n        var dt = Math.max(targetObj.timeStamp / 1000, 0.001);\r\n        targetObj.page.speed   = hypot(targetObj.page.x, targetObj.page.y) / dt;\r\n        targetObj.page.vx      = targetObj.page.x / dt;\r\n        targetObj.page.vy      = targetObj.page.y / dt;\r\n\r\n        targetObj.client.speed = hypot(targetObj.client.x, targetObj.page.y) / dt;\r\n        targetObj.client.vx    = targetObj.client.x / dt;\r\n        targetObj.client.vy    = targetObj.client.y / dt;\r\n    }\r\n\r\n    function isNativePointer (pointer) {\r\n        return (pointer instanceof window.Event\r\n            || (supportsTouch && window.Touch && pointer instanceof window.Touch));\r\n    }\r\n\r\n    // Get specified X/Y coords for mouse or event.touches[0]\r\n    function getXY (type, pointer, xy) {\r\n        xy = xy || {};\r\n        type = type || 'page';\r\n\r\n        xy.x = pointer[type + 'X'];\r\n        xy.y = pointer[type + 'Y'];\r\n\r\n        return xy;\r\n    }\r\n\r\n    function getPageXY (pointer, page) {\r\n        page = page || {};\r\n\r\n        // Opera Mobile handles the viewport and scrolling oddly\r\n        if (isOperaMobile && isNativePointer(pointer)) {\r\n            getXY('screen', pointer, page);\r\n\r\n            page.x += window.scrollX;\r\n            page.y += window.scrollY;\r\n        }\r\n        else {\r\n            getXY('page', pointer, page);\r\n        }\r\n\r\n        return page;\r\n    }\r\n\r\n    function getClientXY (pointer, client) {\r\n        client = client || {};\r\n\r\n        if (isOperaMobile && isNativePointer(pointer)) {\r\n            // Opera Mobile handles the viewport and scrolling oddly\r\n            getXY('screen', pointer, client);\r\n        }\r\n        else {\r\n          getXY('client', pointer, client);\r\n        }\r\n\r\n        return client;\r\n    }\r\n\r\n    function getScrollXY (win) {\r\n        win = win || window;\r\n        return {\r\n            x: win.scrollX || win.document.documentElement.scrollLeft,\r\n            y: win.scrollY || win.document.documentElement.scrollTop\r\n        };\r\n    }\r\n\r\n    function getPointerId (pointer) {\r\n        return isNumber(pointer.pointerId)? pointer.pointerId : pointer.identifier;\r\n    }\r\n\r\n    function getActualElement (element) {\r\n        return (element instanceof SVGElementInstance\r\n            ? element.correspondingUseElement\r\n            : element);\r\n    }\r\n\r\n    function getWindow (node) {\r\n        if (isWindow(node)) {\r\n            return node;\r\n        }\r\n\r\n        var rootNode = (node.ownerDocument || node);\r\n\r\n        return rootNode.defaultView || rootNode.parentWindow || window;\r\n    }\r\n\r\n    function getElementClientRect (element) {\r\n        var clientRect = (element instanceof SVGElement\r\n                            ? element.getBoundingClientRect()\r\n                            : element.getClientRects()[0]);\r\n\r\n        return clientRect && {\r\n            left  : clientRect.left,\r\n            right : clientRect.right,\r\n            top   : clientRect.top,\r\n            bottom: clientRect.bottom,\r\n            width : clientRect.width || clientRect.right - clientRect.left,\r\n            height: clientRect.height || clientRect.bottom - clientRect.top\r\n        };\r\n    }\r\n\r\n    function getElementRect (element) {\r\n        var clientRect = getElementClientRect(element);\r\n\r\n        if (!isIOS7 && clientRect) {\r\n            var scroll = getScrollXY(getWindow(element));\r\n\r\n            clientRect.left   += scroll.x;\r\n            clientRect.right  += scroll.x;\r\n            clientRect.top    += scroll.y;\r\n            clientRect.bottom += scroll.y;\r\n        }\r\n\r\n        return clientRect;\r\n    }\r\n\r\n    function getTouchPair (event) {\r\n        var touches = [];\r\n\r\n        // array of touches is supplied\r\n        if (isArray(event)) {\r\n            touches[0] = event[0];\r\n            touches[1] = event[1];\r\n        }\r\n        // an event\r\n        else {\r\n            if (event.type === 'touchend') {\r\n                if (event.touches.length === 1) {\r\n                    touches[0] = event.touches[0];\r\n                    touches[1] = event.changedTouches[0];\r\n                }\r\n                else if (event.touches.length === 0) {\r\n                    touches[0] = event.changedTouches[0];\r\n                    touches[1] = event.changedTouches[1];\r\n                }\r\n            }\r\n            else {\r\n                touches[0] = event.touches[0];\r\n                touches[1] = event.touches[1];\r\n            }\r\n        }\r\n\r\n        return touches;\r\n    }\r\n\r\n    function pointerAverage (pointers) {\r\n        var average = {\r\n            pageX  : 0,\r\n            pageY  : 0,\r\n            clientX: 0,\r\n            clientY: 0,\r\n            screenX: 0,\r\n            screenY: 0\r\n        };\r\n        var prop;\r\n\r\n        for (var i = 0; i < pointers.length; i++) {\r\n            for (prop in average) {\r\n                average[prop] += pointers[i][prop];\r\n            }\r\n        }\r\n        for (prop in average) {\r\n            average[prop] /= pointers.length;\r\n        }\r\n\r\n        return average;\r\n    }\r\n\r\n    function touchBBox (event) {\r\n        if (!event.length && !(event.touches && event.touches.length > 1)) {\r\n            return;\r\n        }\r\n\r\n        var touches = getTouchPair(event),\r\n            minX = Math.min(touches[0].pageX, touches[1].pageX),\r\n            minY = Math.min(touches[0].pageY, touches[1].pageY),\r\n            maxX = Math.max(touches[0].pageX, touches[1].pageX),\r\n            maxY = Math.max(touches[0].pageY, touches[1].pageY);\r\n\r\n        return {\r\n            x: minX,\r\n            y: minY,\r\n            left: minX,\r\n            top: minY,\r\n            width: maxX - minX,\r\n            height: maxY - minY\r\n        };\r\n    }\r\n\r\n    function touchDistance (event, deltaSource) {\r\n        deltaSource = deltaSource || defaultOptions.deltaSource;\r\n\r\n        var sourceX = deltaSource + 'X',\r\n            sourceY = deltaSource + 'Y',\r\n            touches = getTouchPair(event);\r\n\r\n\r\n        var dx = touches[0][sourceX] - touches[1][sourceX],\r\n            dy = touches[0][sourceY] - touches[1][sourceY];\r\n\r\n        return hypot(dx, dy);\r\n    }\r\n\r\n    function touchAngle (event, prevAngle, deltaSource) {\r\n        deltaSource = deltaSource || defaultOptions.deltaSource;\r\n\r\n        var sourceX = deltaSource + 'X',\r\n            sourceY = deltaSource + 'Y',\r\n            touches = getTouchPair(event),\r\n            dx = touches[0][sourceX] - touches[1][sourceX],\r\n            dy = touches[0][sourceY] - touches[1][sourceY],\r\n            angle = 180 * Math.atan(dy / dx) / Math.PI;\r\n\r\n        if (isNumber(prevAngle)) {\r\n            var dr = angle - prevAngle,\r\n                drClamped = dr % 360;\r\n\r\n            if (drClamped > 315) {\r\n                angle -= 360 + (angle / 360)|0 * 360;\r\n            }\r\n            else if (drClamped > 135) {\r\n                angle -= 180 + (angle / 360)|0 * 360;\r\n            }\r\n            else if (drClamped < -315) {\r\n                angle += 360 + (angle / 360)|0 * 360;\r\n            }\r\n            else if (drClamped < -135) {\r\n                angle += 180 + (angle / 360)|0 * 360;\r\n            }\r\n        }\r\n\r\n        return  angle;\r\n    }\r\n\r\n    function getOriginXY (interactable, element) {\r\n        var origin = interactable\r\n                ? interactable.options.origin\r\n                : defaultOptions.origin;\r\n\r\n        if (origin === 'parent') {\r\n            origin = parentElement(element);\r\n        }\r\n        else if (origin === 'self') {\r\n            origin = interactable.getRect(element);\r\n        }\r\n        else if (trySelector(origin)) {\r\n            origin = closest(element, origin) || { x: 0, y: 0 };\r\n        }\r\n\r\n        if (isFunction(origin)) {\r\n            origin = origin(interactable && element);\r\n        }\r\n\r\n        if (isElement(origin))  {\r\n            origin = getElementRect(origin);\r\n        }\r\n\r\n        origin.x = ('x' in origin)? origin.x : origin.left;\r\n        origin.y = ('y' in origin)? origin.y : origin.top;\r\n\r\n        return origin;\r\n    }\r\n\r\n    // http://stackoverflow.com/a/5634528/2280888\r\n    function _getQBezierValue(t, p1, p2, p3) {\r\n        var iT = 1 - t;\r\n        return iT * iT * p1 + 2 * iT * t * p2 + t * t * p3;\r\n    }\r\n\r\n    function getQuadraticCurvePoint(startX, startY, cpX, cpY, endX, endY, position) {\r\n        return {\r\n            x:  _getQBezierValue(position, startX, cpX, endX),\r\n            y:  _getQBezierValue(position, startY, cpY, endY)\r\n        };\r\n    }\r\n\r\n    // http://gizma.com/easing/\r\n    function easeOutQuad (t, b, c, d) {\r\n        t /= d;\r\n        return -c * t*(t-2) + b;\r\n    }\r\n\r\n    function nodeContains (parent, child) {\r\n        while (child) {\r\n            if (child === parent) {\r\n                return true;\r\n            }\r\n\r\n            child = child.parentNode;\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    function closest (child, selector) {\r\n        var parent = parentElement(child);\r\n\r\n        while (isElement(parent)) {\r\n            if (matchesSelector(parent, selector)) { return parent; }\r\n\r\n            parent = parentElement(parent);\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    function parentElement (node) {\r\n        var parent = node.parentNode;\r\n\r\n        if (isDocFrag(parent)) {\r\n            // skip past #shado-root fragments\r\n            while ((parent = parent.host) && isDocFrag(parent)) {}\r\n\r\n            return parent;\r\n        }\r\n\r\n        return parent;\r\n    }\r\n\r\n    function inContext (interactable, element) {\r\n        return interactable._context === element.ownerDocument\r\n                || nodeContains(interactable._context, element);\r\n    }\r\n\r\n    function testIgnore (interactable, interactableElement, element) {\r\n        var ignoreFrom = interactable.options.ignoreFrom;\r\n\r\n        if (!ignoreFrom || !isElement(element)) { return false; }\r\n\r\n        if (isString(ignoreFrom)) {\r\n            return matchesUpTo(element, ignoreFrom, interactableElement);\r\n        }\r\n        else if (isElement(ignoreFrom)) {\r\n            return nodeContains(ignoreFrom, element);\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    function testAllow (interactable, interactableElement, element) {\r\n        var allowFrom = interactable.options.allowFrom;\r\n\r\n        if (!allowFrom) { return true; }\r\n\r\n        if (!isElement(element)) { return false; }\r\n\r\n        if (isString(allowFrom)) {\r\n            return matchesUpTo(element, allowFrom, interactableElement);\r\n        }\r\n        else if (isElement(allowFrom)) {\r\n            return nodeContains(allowFrom, element);\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    function checkAxis (axis, interactable) {\r\n        if (!interactable) { return false; }\r\n\r\n        var thisAxis = interactable.options.drag.axis;\r\n\r\n        return (axis === 'xy' || thisAxis === 'xy' || thisAxis === axis);\r\n    }\r\n\r\n    function checkSnap (interactable, action) {\r\n        var options = interactable.options;\r\n\r\n        if (/^resize/.test(action)) {\r\n            action = 'resize';\r\n        }\r\n\r\n        return options[action].snap && options[action].snap.enabled;\r\n    }\r\n\r\n    function checkRestrict (interactable, action) {\r\n        var options = interactable.options;\r\n\r\n        if (/^resize/.test(action)) {\r\n            action = 'resize';\r\n        }\r\n\r\n        return  options[action].restrict && options[action].restrict.enabled;\r\n    }\r\n\r\n    function checkAutoScroll (interactable, action) {\r\n        var options = interactable.options;\r\n\r\n        if (/^resize/.test(action)) {\r\n            action = 'resize';\r\n        }\r\n\r\n        return  options[action].autoScroll && options[action].autoScroll.enabled;\r\n    }\r\n\r\n    function withinInteractionLimit (interactable, element, action) {\r\n        var options = interactable.options,\r\n            maxActions = options[action.name].max,\r\n            maxPerElement = options[action.name].maxPerElement,\r\n            activeInteractions = 0,\r\n            targetCount = 0,\r\n            targetElementCount = 0;\r\n\r\n        for (var i = 0, len = interactions.length; i < len; i++) {\r\n            var interaction = interactions[i],\r\n                otherAction = interaction.prepared.name,\r\n                active = interaction.interacting();\r\n\r\n            if (!active) { continue; }\r\n\r\n            activeInteractions++;\r\n\r\n            if (activeInteractions >= maxInteractions) {\r\n                return false;\r\n            }\r\n\r\n            if (interaction.target !== interactable) { continue; }\r\n\r\n            targetCount += (otherAction === action.name)|0;\r\n\r\n            if (targetCount >= maxActions) {\r\n                return false;\r\n            }\r\n\r\n            if (interaction.element === element) {\r\n                targetElementCount++;\r\n\r\n                if (otherAction !== action.name || targetElementCount >= maxPerElement) {\r\n                    return false;\r\n                }\r\n            }\r\n        }\r\n\r\n        return maxInteractions > 0;\r\n    }\r\n\r\n    // Test for the element that's \"above\" all other qualifiers\r\n    function indexOfDeepestElement (elements) {\r\n        var dropzone,\r\n            deepestZone = elements[0],\r\n            index = deepestZone? 0: -1,\r\n            parent,\r\n            deepestZoneParents = [],\r\n            dropzoneParents = [],\r\n            child,\r\n            i,\r\n            n;\r\n\r\n        for (i = 1; i < elements.length; i++) {\r\n            dropzone = elements[i];\r\n\r\n            // an element might belong to multiple selector dropzones\r\n            if (!dropzone || dropzone === deepestZone) {\r\n                continue;\r\n            }\r\n\r\n            if (!deepestZone) {\r\n                deepestZone = dropzone;\r\n                index = i;\r\n                continue;\r\n            }\r\n\r\n            // check if the deepest or current are document.documentElement or document.rootElement\r\n            // - if the current dropzone is, do nothing and continue\r\n            if (dropzone.parentNode === dropzone.ownerDocument) {\r\n                continue;\r\n            }\r\n            // - if deepest is, update with the current dropzone and continue to next\r\n            else if (deepestZone.parentNode === dropzone.ownerDocument) {\r\n                deepestZone = dropzone;\r\n                index = i;\r\n                continue;\r\n            }\r\n\r\n            if (!deepestZoneParents.length) {\r\n                parent = deepestZone;\r\n                while (parent.parentNode && parent.parentNode !== parent.ownerDocument) {\r\n                    deepestZoneParents.unshift(parent);\r\n                    parent = parent.parentNode;\r\n                }\r\n            }\r\n\r\n            // if this element is an svg element and the current deepest is\r\n            // an HTMLElement\r\n            if (deepestZone instanceof HTMLElement\r\n                && dropzone instanceof SVGElement\r\n                && !(dropzone instanceof SVGSVGElement)) {\r\n\r\n                if (dropzone === deepestZone.parentNode) {\r\n                    continue;\r\n                }\r\n\r\n                parent = dropzone.ownerSVGElement;\r\n            }\r\n            else {\r\n                parent = dropzone;\r\n            }\r\n\r\n            dropzoneParents = [];\r\n\r\n            while (parent.parentNode !== parent.ownerDocument) {\r\n                dropzoneParents.unshift(parent);\r\n                parent = parent.parentNode;\r\n            }\r\n\r\n            n = 0;\r\n\r\n            // get (position of last common ancestor) + 1\r\n            while (dropzoneParents[n] && dropzoneParents[n] === deepestZoneParents[n]) {\r\n                n++;\r\n            }\r\n\r\n            var parents = [\r\n                dropzoneParents[n - 1],\r\n                dropzoneParents[n],\r\n                deepestZoneParents[n]\r\n            ];\r\n\r\n            child = parents[0].lastChild;\r\n\r\n            while (child) {\r\n                if (child === parents[1]) {\r\n                    deepestZone = dropzone;\r\n                    index = i;\r\n                    deepestZoneParents = [];\r\n\r\n                    break;\r\n                }\r\n                else if (child === parents[2]) {\r\n                    break;\r\n                }\r\n\r\n                child = child.previousSibling;\r\n            }\r\n        }\r\n\r\n        return index;\r\n    }\r\n\r\n    function Interaction () {\r\n        this.target          = null; // current interactable being interacted with\r\n        this.element         = null; // the target element of the interactable\r\n        this.dropTarget      = null; // the dropzone a drag target might be dropped into\r\n        this.dropElement     = null; // the element at the time of checking\r\n        this.prevDropTarget  = null; // the dropzone that was recently dragged away from\r\n        this.prevDropElement = null; // the element at the time of checking\r\n\r\n        this.prepared        = {     // action that's ready to be fired on next move event\r\n            name : null,\r\n            axis : null,\r\n            edges: null\r\n        };\r\n\r\n        this.matches         = [];   // all selectors that are matched by target element\r\n        this.matchElements   = [];   // corresponding elements\r\n\r\n        this.inertiaStatus = {\r\n            active       : false,\r\n            smoothEnd    : false,\r\n            ending       : false,\r\n\r\n            startEvent: null,\r\n            upCoords: {},\r\n\r\n            xe: 0, ye: 0,\r\n            sx: 0, sy: 0,\r\n\r\n            t0: 0,\r\n            vx0: 0, vys: 0,\r\n            duration: 0,\r\n\r\n            resumeDx: 0,\r\n            resumeDy: 0,\r\n\r\n            lambda_v0: 0,\r\n            one_ve_v0: 0,\r\n            i  : null\r\n        };\r\n\r\n        if (isFunction(Function.prototype.bind)) {\r\n            this.boundInertiaFrame = this.inertiaFrame.bind(this);\r\n            this.boundSmoothEndFrame = this.smoothEndFrame.bind(this);\r\n        }\r\n        else {\r\n            var that = this;\r\n\r\n            this.boundInertiaFrame = function () { return that.inertiaFrame(); };\r\n            this.boundSmoothEndFrame = function () { return that.smoothEndFrame(); };\r\n        }\r\n\r\n        this.activeDrops = {\r\n            dropzones: [],      // the dropzones that are mentioned below\r\n            elements : [],      // elements of dropzones that accept the target draggable\r\n            rects    : []       // the rects of the elements mentioned above\r\n        };\r\n\r\n        // keep track of added pointers\r\n        this.pointers    = [];\r\n        this.pointerIds  = [];\r\n        this.downTargets = [];\r\n        this.downTimes   = [];\r\n        this.holdTimers  = [];\r\n\r\n        // Previous native pointer move event coordinates\r\n        this.prevCoords = {\r\n            page     : { x: 0, y: 0 },\r\n            client   : { x: 0, y: 0 },\r\n            timeStamp: 0\r\n        };\r\n        // current native pointer move event coordinates\r\n        this.curCoords = {\r\n            page     : { x: 0, y: 0 },\r\n            client   : { x: 0, y: 0 },\r\n            timeStamp: 0\r\n        };\r\n\r\n        // Starting InteractEvent pointer coordinates\r\n        this.startCoords = {\r\n            page     : { x: 0, y: 0 },\r\n            client   : { x: 0, y: 0 },\r\n            timeStamp: 0\r\n        };\r\n\r\n        // Change in coordinates and time of the pointer\r\n        this.pointerDelta = {\r\n            page     : { x: 0, y: 0, vx: 0, vy: 0, speed: 0 },\r\n            client   : { x: 0, y: 0, vx: 0, vy: 0, speed: 0 },\r\n            timeStamp: 0\r\n        };\r\n\r\n        this.downEvent   = null;    // pointerdown/mousedown/touchstart event\r\n        this.downPointer = {};\r\n\r\n        this._eventTarget    = null;\r\n        this._curEventTarget = null;\r\n\r\n        this.prevEvent = null;      // previous action event\r\n        this.tapTime   = 0;         // time of the most recent tap event\r\n        this.prevTap   = null;\r\n\r\n        this.startOffset    = { left: 0, right: 0, top: 0, bottom: 0 };\r\n        this.restrictOffset = { left: 0, right: 0, top: 0, bottom: 0 };\r\n        this.snapOffsets    = [];\r\n\r\n        this.gesture = {\r\n            start: { x: 0, y: 0 },\r\n\r\n            startDistance: 0,   // distance between two touches of touchStart\r\n            prevDistance : 0,\r\n            distance     : 0,\r\n\r\n            scale: 1,           // gesture.distance / gesture.startDistance\r\n\r\n            startAngle: 0,      // angle of line joining two touches\r\n            prevAngle : 0       // angle of the previous gesture event\r\n        };\r\n\r\n        this.snapStatus = {\r\n            x       : 0, y       : 0,\r\n            dx      : 0, dy      : 0,\r\n            realX   : 0, realY   : 0,\r\n            snappedX: 0, snappedY: 0,\r\n            targets : [],\r\n            locked  : false,\r\n            changed : false\r\n        };\r\n\r\n        this.restrictStatus = {\r\n            dx         : 0, dy         : 0,\r\n            restrictedX: 0, restrictedY: 0,\r\n            snap       : null,\r\n            restricted : false,\r\n            changed    : false\r\n        };\r\n\r\n        this.restrictStatus.snap = this.snapStatus;\r\n\r\n        this.pointerIsDown   = false;\r\n        this.pointerWasMoved = false;\r\n        this.gesturing       = false;\r\n        this.dragging        = false;\r\n        this.resizing        = false;\r\n        this.resizeAxes      = 'xy';\r\n\r\n        this.mouse = false;\r\n\r\n        interactions.push(this);\r\n    }\r\n\r\n    Interaction.prototype = {\r\n        getPageXY  : function (pointer, xy) { return   getPageXY(pointer, xy, this); },\r\n        getClientXY: function (pointer, xy) { return getClientXY(pointer, xy, this); },\r\n        setEventXY : function (target, ptr) { return  setEventXY(target, ptr, this); },\r\n\r\n        pointerOver: function (pointer, event, eventTarget) {\r\n            if (this.prepared.name || !this.mouse) { return; }\r\n\r\n            var curMatches = [],\r\n                curMatchElements = [],\r\n                prevTargetElement = this.element;\r\n\r\n            this.addPointer(pointer);\r\n\r\n            if (this.target\r\n                && (testIgnore(this.target, this.element, eventTarget)\r\n                    || !testAllow(this.target, this.element, eventTarget))) {\r\n                // if the eventTarget should be ignored or shouldn't be allowed\r\n                // clear the previous target\r\n                this.target = null;\r\n                this.element = null;\r\n                this.matches = [];\r\n                this.matchElements = [];\r\n            }\r\n\r\n            var elementInteractable = interactables.get(eventTarget),\r\n                elementAction = (elementInteractable\r\n                                 && !testIgnore(elementInteractable, eventTarget, eventTarget)\r\n                                 && testAllow(elementInteractable, eventTarget, eventTarget)\r\n                                 && validateAction(\r\n                                     elementInteractable.getAction(pointer, event, this, eventTarget),\r\n                                     elementInteractable));\r\n\r\n            if (elementAction && !withinInteractionLimit(elementInteractable, eventTarget, elementAction)) {\r\n                 elementAction = null;\r\n            }\r\n\r\n            function pushCurMatches (interactable, selector) {\r\n                if (interactable\r\n                    && inContext(interactable, eventTarget)\r\n                    && !testIgnore(interactable, eventTarget, eventTarget)\r\n                    && testAllow(interactable, eventTarget, eventTarget)\r\n                    && matchesSelector(eventTarget, selector)) {\r\n\r\n                    curMatches.push(interactable);\r\n                    curMatchElements.push(eventTarget);\r\n                }\r\n            }\r\n\r\n            if (elementAction) {\r\n                this.target = elementInteractable;\r\n                this.element = eventTarget;\r\n                this.matches = [];\r\n                this.matchElements = [];\r\n            }\r\n            else {\r\n                interactables.forEachSelector(pushCurMatches);\r\n\r\n                if (this.validateSelector(pointer, event, curMatches, curMatchElements)) {\r\n                    this.matches = curMatches;\r\n                    this.matchElements = curMatchElements;\r\n\r\n                    this.pointerHover(pointer, event, this.matches, this.matchElements);\r\n                    events.add(eventTarget,\r\n                                        PointerEvent? pEventTypes.move : 'mousemove',\r\n                                        listeners.pointerHover);\r\n                }\r\n                else if (this.target) {\r\n                    if (nodeContains(prevTargetElement, eventTarget)) {\r\n                        this.pointerHover(pointer, event, this.matches, this.matchElements);\r\n                        events.add(this.element,\r\n                                            PointerEvent? pEventTypes.move : 'mousemove',\r\n                                            listeners.pointerHover);\r\n                    }\r\n                    else {\r\n                        this.target = null;\r\n                        this.element = null;\r\n                        this.matches = [];\r\n                        this.matchElements = [];\r\n                    }\r\n                }\r\n            }\r\n        },\r\n\r\n        // Check what action would be performed on pointerMove target if a mouse\r\n        // button were pressed and change the cursor accordingly\r\n        pointerHover: function (pointer, event, eventTarget, curEventTarget, matches, matchElements) {\r\n            var target = this.target;\r\n\r\n            if (!this.prepared.name && this.mouse) {\r\n\r\n                var action;\r\n\r\n                // update pointer coords for defaultActionChecker to use\r\n                this.setEventXY(this.curCoords, [pointer]);\r\n\r\n                if (matches) {\r\n                    action = this.validateSelector(pointer, event, matches, matchElements);\r\n                }\r\n                else if (target) {\r\n                    action = validateAction(target.getAction(this.pointers[0], event, this, this.element), this.target);\r\n                }\r\n\r\n                if (target && target.options.styleCursor) {\r\n                    if (action) {\r\n                        target._doc.documentElement.style.cursor = getActionCursor(action);\r\n                    }\r\n                    else {\r\n                        target._doc.documentElement.style.cursor = '';\r\n                    }\r\n                }\r\n            }\r\n            else if (this.prepared.name) {\r\n                this.checkAndPreventDefault(event, target, this.element);\r\n            }\r\n        },\r\n\r\n        pointerOut: function (pointer, event, eventTarget) {\r\n            if (this.prepared.name) { return; }\r\n\r\n            // Remove temporary event listeners for selector Interactables\r\n            if (!interactables.get(eventTarget)) {\r\n                events.remove(eventTarget,\r\n                                       PointerEvent? pEventTypes.move : 'mousemove',\r\n                                       listeners.pointerHover);\r\n            }\r\n\r\n            if (this.target && this.target.options.styleCursor && !this.interacting()) {\r\n                this.target._doc.documentElement.style.cursor = '';\r\n            }\r\n        },\r\n\r\n        selectorDown: function (pointer, event, eventTarget, curEventTarget) {\r\n            var that = this,\r\n                // copy event to be used in timeout for IE8\r\n                eventCopy = events.useAttachEvent? extend({}, event) : event,\r\n                element = eventTarget,\r\n                pointerIndex = this.addPointer(pointer),\r\n                action;\r\n\r\n            this.holdTimers[pointerIndex] = setTimeout(function () {\r\n                that.pointerHold(events.useAttachEvent? eventCopy : pointer, eventCopy, eventTarget, curEventTarget);\r\n            }, defaultOptions._holdDuration);\r\n\r\n            this.pointerIsDown = true;\r\n\r\n            // Check if the down event hits the current inertia target\r\n            if (this.inertiaStatus.active && this.target.selector) {\r\n                // climb up the DOM tree from the event target\r\n                while (isElement(element)) {\r\n\r\n                    // if this element is the current inertia target element\r\n                    if (element === this.element\r\n                        // and the prospective action is the same as the ongoing one\r\n                        && validateAction(this.target.getAction(pointer, event, this, this.element), this.target).name === this.prepared.name) {\r\n\r\n                        // stop inertia so that the next move will be a normal one\r\n                        cancelFrame(this.inertiaStatus.i);\r\n                        this.inertiaStatus.active = false;\r\n\r\n                        this.collectEventTargets(pointer, event, eventTarget, 'down');\r\n                        return;\r\n                    }\r\n                    element = parentElement(element);\r\n                }\r\n            }\r\n\r\n            // do nothing if interacting\r\n            if (this.interacting()) {\r\n                this.collectEventTargets(pointer, event, eventTarget, 'down');\r\n                return;\r\n            }\r\n\r\n            function pushMatches (interactable, selector, context) {\r\n                var elements = ie8MatchesSelector\r\n                    ? context.querySelectorAll(selector)\r\n                    : undefined;\r\n\r\n                if (inContext(interactable, element)\r\n                    && !testIgnore(interactable, element, eventTarget)\r\n                    && testAllow(interactable, element, eventTarget)\r\n                    && matchesSelector(element, selector, elements)) {\r\n\r\n                    that.matches.push(interactable);\r\n                    that.matchElements.push(element);\r\n                }\r\n            }\r\n\r\n            // update pointer coords for defaultActionChecker to use\r\n            this.setEventXY(this.curCoords, [pointer]);\r\n            this.downEvent = event;\r\n\r\n            while (isElement(element) && !action) {\r\n                this.matches = [];\r\n                this.matchElements = [];\r\n\r\n                interactables.forEachSelector(pushMatches);\r\n\r\n                action = this.validateSelector(pointer, event, this.matches, this.matchElements);\r\n                element = parentElement(element);\r\n            }\r\n\r\n            if (action) {\r\n                this.prepared.name  = action.name;\r\n                this.prepared.axis  = action.axis;\r\n                this.prepared.edges = action.edges;\r\n\r\n                this.collectEventTargets(pointer, event, eventTarget, 'down');\r\n\r\n                return this.pointerDown(pointer, event, eventTarget, curEventTarget, action);\r\n            }\r\n            else {\r\n                // do these now since pointerDown isn't being called from here\r\n                this.downTimes[pointerIndex] = new Date().getTime();\r\n                this.downTargets[pointerIndex] = eventTarget;\r\n                pointerExtend(this.downPointer, pointer);\r\n\r\n                copyCoords(this.prevCoords, this.curCoords);\r\n                this.pointerWasMoved = false;\r\n            }\r\n\r\n            this.collectEventTargets(pointer, event, eventTarget, 'down');\r\n        },\r\n\r\n        // Determine action to be performed on next pointerMove and add appropriate\r\n        // style and event Listeners\r\n        pointerDown: function (pointer, event, eventTarget, curEventTarget, forceAction) {\r\n            if (!forceAction && !this.inertiaStatus.active && this.pointerWasMoved && this.prepared.name) {\r\n                this.checkAndPreventDefault(event, this.target, this.element);\r\n\r\n                return;\r\n            }\r\n\r\n            this.pointerIsDown = true;\r\n            this.downEvent = event;\r\n\r\n            var pointerIndex = this.addPointer(pointer),\r\n                action;\r\n\r\n            // If it is the second touch of a multi-touch gesture, keep the\r\n            // target the same and get a new action if a target was set by the\r\n            // first touch\r\n            if (this.pointerIds.length > 1 && this.target._element === this.element) {\r\n                var newAction = validateAction(forceAction || this.target.getAction(pointer, event, this, this.element), this.target);\r\n\r\n                if (withinInteractionLimit(this.target, this.element, newAction)) {\r\n                    action = newAction;\r\n                }\r\n\r\n                this.prepared.name = null;\r\n            }\r\n            // Otherwise, set the target if there is no action prepared\r\n            else if (!this.prepared.name) {\r\n                var interactable = interactables.get(curEventTarget);\r\n\r\n                if (interactable\r\n                    && !testIgnore(interactable, curEventTarget, eventTarget)\r\n                    && testAllow(interactable, curEventTarget, eventTarget)\r\n                    && (action = validateAction(forceAction || interactable.getAction(pointer, event, this, curEventTarget), interactable, eventTarget))\r\n                    && withinInteractionLimit(interactable, curEventTarget, action)) {\r\n                    this.target = interactable;\r\n                    this.element = curEventTarget;\r\n                }\r\n            }\r\n\r\n            var target = this.target,\r\n                options = target && target.options;\r\n\r\n            if (target && (forceAction || !this.prepared.name)) {\r\n                action = action || validateAction(forceAction || target.getAction(pointer, event, this, curEventTarget), target, this.element);\r\n\r\n                this.setEventXY(this.startCoords, this.pointers);\r\n\r\n                if (!action) { return; }\r\n\r\n                if (options.styleCursor) {\r\n                    target._doc.documentElement.style.cursor = getActionCursor(action);\r\n                }\r\n\r\n                this.resizeAxes = action.name === 'resize'? action.axis : null;\r\n\r\n                if (action === 'gesture' && this.pointerIds.length < 2) {\r\n                    action = null;\r\n                }\r\n\r\n                this.prepared.name  = action.name;\r\n                this.prepared.axis  = action.axis;\r\n                this.prepared.edges = action.edges;\r\n\r\n                this.snapStatus.snappedX = this.snapStatus.snappedY =\r\n                    this.restrictStatus.restrictedX = this.restrictStatus.restrictedY = NaN;\r\n\r\n                this.downTimes[pointerIndex] = new Date().getTime();\r\n                this.downTargets[pointerIndex] = eventTarget;\r\n                pointerExtend(this.downPointer, pointer);\r\n\r\n                copyCoords(this.prevCoords, this.startCoords);\r\n                this.pointerWasMoved = false;\r\n\r\n                this.checkAndPreventDefault(event, target, this.element);\r\n            }\r\n            // if inertia is active try to resume action\r\n            else if (this.inertiaStatus.active\r\n                && curEventTarget === this.element\r\n                && validateAction(target.getAction(pointer, event, this, this.element), target).name === this.prepared.name) {\r\n\r\n                cancelFrame(this.inertiaStatus.i);\r\n                this.inertiaStatus.active = false;\r\n\r\n                this.checkAndPreventDefault(event, target, this.element);\r\n            }\r\n        },\r\n\r\n        setModifications: function (coords, preEnd) {\r\n            var target         = this.target,\r\n                shouldMove     = true,\r\n                shouldSnap     = checkSnap(target, this.prepared.name)     && (!target.options[this.prepared.name].snap.endOnly     || preEnd),\r\n                shouldRestrict = checkRestrict(target, this.prepared.name) && (!target.options[this.prepared.name].restrict.endOnly || preEnd);\r\n\r\n            if (shouldSnap    ) { this.setSnapping   (coords); } else { this.snapStatus    .locked     = false; }\r\n            if (shouldRestrict) { this.setRestriction(coords); } else { this.restrictStatus.restricted = false; }\r\n\r\n            if (shouldSnap && this.snapStatus.locked && !this.snapStatus.changed) {\r\n                shouldMove = shouldRestrict && this.restrictStatus.restricted && this.restrictStatus.changed;\r\n            }\r\n            else if (shouldRestrict && this.restrictStatus.restricted && !this.restrictStatus.changed) {\r\n                shouldMove = false;\r\n            }\r\n\r\n            return shouldMove;\r\n        },\r\n\r\n        setStartOffsets: function (action, interactable, element) {\r\n            var rect = interactable.getRect(element),\r\n                origin = getOriginXY(interactable, element),\r\n                snap = interactable.options[this.prepared.name].snap,\r\n                restrict = interactable.options[this.prepared.name].restrict,\r\n                width, height;\r\n\r\n            if (rect) {\r\n                this.startOffset.left = this.startCoords.page.x - rect.left;\r\n                this.startOffset.top  = this.startCoords.page.y - rect.top;\r\n\r\n                this.startOffset.right  = rect.right  - this.startCoords.page.x;\r\n                this.startOffset.bottom = rect.bottom - this.startCoords.page.y;\r\n\r\n                if ('width' in rect) { width = rect.width; }\r\n                else { width = rect.right - rect.left; }\r\n                if ('height' in rect) { height = rect.height; }\r\n                else { height = rect.bottom - rect.top; }\r\n            }\r\n            else {\r\n                this.startOffset.left = this.startOffset.top = this.startOffset.right = this.startOffset.bottom = 0;\r\n            }\r\n\r\n            this.snapOffsets.splice(0);\r\n\r\n            var snapOffset = snap && snap.offset === 'startCoords'\r\n                                ? {\r\n                                    x: this.startCoords.page.x - origin.x,\r\n                                    y: this.startCoords.page.y - origin.y\r\n                                }\r\n                                : snap && snap.offset || { x: 0, y: 0 };\r\n\r\n            if (rect && snap && snap.relativePoints && snap.relativePoints.length) {\r\n                for (var i = 0; i < snap.relativePoints.length; i++) {\r\n                    this.snapOffsets.push({\r\n                        x: this.startOffset.left - (width  * snap.relativePoints[i].x) + snapOffset.x,\r\n                        y: this.startOffset.top  - (height * snap.relativePoints[i].y) + snapOffset.y\r\n                    });\r\n                }\r\n            }\r\n            else {\r\n                this.snapOffsets.push(snapOffset);\r\n            }\r\n\r\n            if (rect && restrict.elementRect) {\r\n                this.restrictOffset.left = this.startOffset.left - (width  * restrict.elementRect.left);\r\n                this.restrictOffset.top  = this.startOffset.top  - (height * restrict.elementRect.top);\r\n\r\n                this.restrictOffset.right  = this.startOffset.right  - (width  * (1 - restrict.elementRect.right));\r\n                this.restrictOffset.bottom = this.startOffset.bottom - (height * (1 - restrict.elementRect.bottom));\r\n            }\r\n            else {\r\n                this.restrictOffset.left = this.restrictOffset.top = this.restrictOffset.right = this.restrictOffset.bottom = 0;\r\n            }\r\n        },\r\n\r\n        /*\\\r\n         * Interaction.start\r\n         [ method ]\r\n         *\r\n         * Start an action with the given Interactable and Element as tartgets. The\r\n         * action must be enabled for the target Interactable and an appropriate number\r\n         * of pointers must be held down â€“ 1 for drag/resize, 2 for gesture.\r\n         *\r\n         * Use it with `interactable.<action>able({ manualStart: false })` to always\r\n         * [start actions manually](https://github.com/taye/interact.js/issues/114)\r\n         *\r\n         - action       (object)  The action to be performed - drag, resize, etc.\r\n         - interactable (Interactable) The Interactable to target\r\n         - element      (Element) The DOM Element to target\r\n         = (object) interact\r\n         **\r\n         | interact(target)\r\n         |   .draggable({\r\n         |     // disable the default drag start by down->move\r\n         |     manualStart: true\r\n         |   })\r\n         |   // start dragging after the user holds the pointer down\r\n         |   .on('hold', function (event) {\r\n         |     var interaction = event.interaction;\r\n         |\r\n         |     if (!interaction.interacting()) {\r\n         |       interaction.start({ name: 'drag' },\r\n         |                         event.interactable,\r\n         |                         event.currentTarget);\r\n         |     }\r\n         | });\r\n        \\*/\r\n        start: function (action, interactable, element) {\r\n            if (this.interacting()\r\n                || !this.pointerIsDown\r\n                || this.pointerIds.length < (action.name === 'gesture'? 2 : 1)) {\r\n                return;\r\n            }\r\n\r\n            // if this interaction had been removed after stopping\r\n            // add it back\r\n            if (indexOf(interactions, this) === -1) {\r\n                interactions.push(this);\r\n            }\r\n\r\n            // set the startCoords if there was no prepared action\r\n            if (!this.prepared.name) {\r\n                this.setEventXY(this.startCoords);\r\n            }\r\n\r\n            this.prepared.name  = action.name;\r\n            this.prepared.axis  = action.axis;\r\n            this.prepared.edges = action.edges;\r\n            this.target         = interactable;\r\n            this.element        = element;\r\n\r\n            this.setStartOffsets(action.name, interactable, element);\r\n            this.setModifications(this.startCoords.page);\r\n\r\n            this.prevEvent = this[this.prepared.name + 'Start'](this.downEvent);\r\n        },\r\n\r\n        pointerMove: function (pointer, event, eventTarget, curEventTarget, preEnd) {\r\n            if (this.inertiaStatus.active) {\r\n                var pageUp   = this.inertiaStatus.upCoords.page;\r\n                var clientUp = this.inertiaStatus.upCoords.client;\r\n\r\n                var inertiaPosition = {\r\n                    pageX  : pageUp.x   + this.inertiaStatus.sx,\r\n                    pageY  : pageUp.y   + this.inertiaStatus.sy,\r\n                    clientX: clientUp.x + this.inertiaStatus.sx,\r\n                    clientY: clientUp.y + this.inertiaStatus.sy\r\n                };\r\n\r\n                this.setEventXY(this.curCoords, [inertiaPosition]);\r\n            }\r\n            else {\r\n                this.recordPointer(pointer);\r\n                this.setEventXY(this.curCoords, this.pointers);\r\n            }\r\n\r\n            var duplicateMove = (this.curCoords.page.x === this.prevCoords.page.x\r\n                                 && this.curCoords.page.y === this.prevCoords.page.y\r\n                                 && this.curCoords.client.x === this.prevCoords.client.x\r\n                                 && this.curCoords.client.y === this.prevCoords.client.y);\r\n\r\n            var dx, dy,\r\n                pointerIndex = this.mouse? 0 : indexOf(this.pointerIds, getPointerId(pointer));\r\n\r\n            // register movement greater than pointerMoveTolerance\r\n            if (this.pointerIsDown && !this.pointerWasMoved) {\r\n                dx = this.curCoords.client.x - this.startCoords.client.x;\r\n                dy = this.curCoords.client.y - this.startCoords.client.y;\r\n\r\n                this.pointerWasMoved = hypot(dx, dy) > pointerMoveTolerance;\r\n            }\r\n\r\n            if (!duplicateMove && (!this.pointerIsDown || this.pointerWasMoved)) {\r\n                if (this.pointerIsDown) {\r\n                    clearTimeout(this.holdTimers[pointerIndex]);\r\n                }\r\n\r\n                this.collectEventTargets(pointer, event, eventTarget, 'move');\r\n            }\r\n\r\n            if (!this.pointerIsDown) { return; }\r\n\r\n            if (duplicateMove && this.pointerWasMoved && !preEnd) {\r\n                this.checkAndPreventDefault(event, this.target, this.element);\r\n                return;\r\n            }\r\n\r\n            // set pointer coordinate, time changes and speeds\r\n            setEventDeltas(this.pointerDelta, this.prevCoords, this.curCoords);\r\n\r\n            if (!this.prepared.name) { return; }\r\n\r\n            if (this.pointerWasMoved\r\n                // ignore movement while inertia is active\r\n                && (!this.inertiaStatus.active || (pointer instanceof InteractEvent && /inertiastart/.test(pointer.type)))) {\r\n\r\n                // if just starting an action, calculate the pointer speed now\r\n                if (!this.interacting()) {\r\n                    setEventDeltas(this.pointerDelta, this.prevCoords, this.curCoords);\r\n\r\n                    // check if a drag is in the correct axis\r\n                    if (this.prepared.name === 'drag') {\r\n                        var absX = Math.abs(dx),\r\n                            absY = Math.abs(dy),\r\n                            targetAxis = this.target.options.drag.axis,\r\n                            axis = (absX > absY ? 'x' : absX < absY ? 'y' : 'xy');\r\n\r\n                        // if the movement isn't in the axis of the interactable\r\n                        if (axis !== 'xy' && targetAxis !== 'xy' && targetAxis !== axis) {\r\n                            // cancel the prepared action\r\n                            this.prepared.name = null;\r\n\r\n                            // then try to get a drag from another ineractable\r\n\r\n                            var element = eventTarget;\r\n\r\n                            // check element interactables\r\n                            while (isElement(element)) {\r\n                                var elementInteractable = interactables.get(element);\r\n\r\n                                if (elementInteractable\r\n                                    && elementInteractable !== this.target\r\n                                    && !elementInteractable.options.drag.manualStart\r\n                                    && elementInteractable.getAction(this.downPointer, this.downEvent, this, element).name === 'drag'\r\n                                    && checkAxis(axis, elementInteractable)) {\r\n\r\n                                    this.prepared.name = 'drag';\r\n                                    this.target = elementInteractable;\r\n                                    this.element = element;\r\n                                    break;\r\n                                }\r\n\r\n                                element = parentElement(element);\r\n                            }\r\n\r\n                            // if there's no drag from element interactables,\r\n                            // check the selector interactables\r\n                            if (!this.prepared.name) {\r\n                                var thisInteraction = this;\r\n\r\n                                var getDraggable = function (interactable, selector, context) {\r\n                                    var elements = ie8MatchesSelector\r\n                                        ? context.querySelectorAll(selector)\r\n                                        : undefined;\r\n\r\n                                    if (interactable === thisInteraction.target) { return; }\r\n\r\n                                    if (inContext(interactable, eventTarget)\r\n                                        && !interactable.options.drag.manualStart\r\n                                        && !testIgnore(interactable, element, eventTarget)\r\n                                        && testAllow(interactable, element, eventTarget)\r\n                                        && matchesSelector(element, selector, elements)\r\n                                        && interactable.getAction(thisInteraction.downPointer, thisInteraction.downEvent, thisInteraction, element).name === 'drag'\r\n                                        && checkAxis(axis, interactable)\r\n                                        && withinInteractionLimit(interactable, element, 'drag')) {\r\n\r\n                                        return interactable;\r\n                                    }\r\n                                };\r\n\r\n                                element = eventTarget;\r\n\r\n                                while (isElement(element)) {\r\n                                    var selectorInteractable = interactables.forEachSelector(getDraggable);\r\n\r\n                                    if (selectorInteractable) {\r\n                                        this.prepared.name = 'drag';\r\n                                        this.target = selectorInteractable;\r\n                                        this.element = element;\r\n                                        break;\r\n                                    }\r\n\r\n                                    element = parentElement(element);\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n\r\n                var starting = !!this.prepared.name && !this.interacting();\r\n\r\n                if (starting\r\n                    && (this.target.options[this.prepared.name].manualStart\r\n                        || !withinInteractionLimit(this.target, this.element, this.prepared))) {\r\n                    this.stop(event);\r\n                    return;\r\n                }\r\n\r\n                if (this.prepared.name && this.target) {\r\n                    if (starting) {\r\n                        this.start(this.prepared, this.target, this.element);\r\n                    }\r\n\r\n                    var shouldMove = this.setModifications(this.curCoords.page, preEnd);\r\n\r\n                    // move if snapping or restriction doesn't prevent it\r\n                    if (shouldMove || starting) {\r\n                        this.prevEvent = this[this.prepared.name + 'Move'](event);\r\n                    }\r\n\r\n                    this.checkAndPreventDefault(event, this.target, this.element);\r\n                }\r\n            }\r\n\r\n            copyCoords(this.prevCoords, this.curCoords);\r\n\r\n            if (this.dragging || this.resizing) {\r\n                this.autoScrollMove(pointer);\r\n            }\r\n        },\r\n\r\n        dragStart: function (event) {\r\n            var dragEvent = new InteractEvent(this, event, 'drag', 'start', this.element);\r\n\r\n            this.dragging = true;\r\n            this.target.fire(dragEvent);\r\n\r\n            // reset active dropzones\r\n            this.activeDrops.dropzones = [];\r\n            this.activeDrops.elements  = [];\r\n            this.activeDrops.rects     = [];\r\n\r\n            if (!this.dynamicDrop) {\r\n                this.setActiveDrops(this.element);\r\n            }\r\n\r\n            var dropEvents = this.getDropEvents(event, dragEvent);\r\n\r\n            if (dropEvents.activate) {\r\n                this.fireActiveDrops(dropEvents.activate);\r\n            }\r\n\r\n            return dragEvent;\r\n        },\r\n\r\n        dragMove: function (event) {\r\n            var target = this.target,\r\n                dragEvent  = new InteractEvent(this, event, 'drag', 'move', this.element),\r\n                draggableElement = this.element,\r\n                drop = this.getDrop(dragEvent, event, draggableElement);\r\n\r\n            this.dropTarget = drop.dropzone;\r\n            this.dropElement = drop.element;\r\n\r\n            var dropEvents = this.getDropEvents(event, dragEvent);\r\n\r\n            target.fire(dragEvent);\r\n\r\n            if (dropEvents.leave) { this.prevDropTarget.fire(dropEvents.leave); }\r\n            if (dropEvents.enter) {     this.dropTarget.fire(dropEvents.enter); }\r\n            if (dropEvents.move ) {     this.dropTarget.fire(dropEvents.move ); }\r\n\r\n            this.prevDropTarget  = this.dropTarget;\r\n            this.prevDropElement = this.dropElement;\r\n\r\n            return dragEvent;\r\n        },\r\n\r\n        resizeStart: function (event) {\r\n            var resizeEvent = new InteractEvent(this, event, 'resize', 'start', this.element);\r\n\r\n            if (this.prepared.edges) {\r\n                var startRect = this.target.getRect(this.element);\r\n\r\n                /*\r\n                 * When using the `resizable.square` or `resizable.preserveAspectRatio` options, resizing from one edge\r\n                 * will affect another. E.g. with `resizable.square`, resizing to make the right edge larger will make\r\n                 * the bottom edge larger by the same amount. We call these 'linked' edges. Any linked edges will depend\r\n                 * on the active edges and the edge being interacted with.\r\n                 */\r\n                if (this.target.options.resize.square || this.target.options.resize.preserveAspectRatio) {\r\n                    var linkedEdges = extend({}, this.prepared.edges);\r\n\r\n                    linkedEdges.top    = linkedEdges.top    || (linkedEdges.left   && !linkedEdges.bottom);\r\n                    linkedEdges.left   = linkedEdges.left   || (linkedEdges.top    && !linkedEdges.right );\r\n                    linkedEdges.bottom = linkedEdges.bottom || (linkedEdges.right  && !linkedEdges.top   );\r\n                    linkedEdges.right  = linkedEdges.right  || (linkedEdges.bottom && !linkedEdges.left  );\r\n\r\n                    this.prepared._linkedEdges = linkedEdges;\r\n                }\r\n                else {\r\n                    this.prepared._linkedEdges = null;\r\n                }\r\n\r\n                // if using `resizable.preserveAspectRatio` option, record aspect ratio at the start of the resize\r\n                if (this.target.options.resize.preserveAspectRatio) {\r\n                    this.resizeStartAspectRatio = startRect.width / startRect.height;\r\n                }\r\n\r\n                this.resizeRects = {\r\n                    start     : startRect,\r\n                    current   : extend({}, startRect),\r\n                    restricted: extend({}, startRect),\r\n                    previous  : extend({}, startRect),\r\n                    delta     : {\r\n                        left: 0, right : 0, width : 0,\r\n                        top : 0, bottom: 0, height: 0\r\n                    }\r\n                };\r\n\r\n                resizeEvent.rect = this.resizeRects.restricted;\r\n                resizeEvent.deltaRect = this.resizeRects.delta;\r\n            }\r\n\r\n            this.target.fire(resizeEvent);\r\n\r\n            this.resizing = true;\r\n\r\n            return resizeEvent;\r\n        },\r\n\r\n        resizeMove: function (event) {\r\n            var resizeEvent = new InteractEvent(this, event, 'resize', 'move', this.element);\r\n\r\n            var edges = this.prepared.edges,\r\n                invert = this.target.options.resize.invert,\r\n                invertible = invert === 'reposition' || invert === 'negate';\r\n\r\n            if (edges) {\r\n                var dx = resizeEvent.dx,\r\n                    dy = resizeEvent.dy,\r\n\r\n                    start      = this.resizeRects.start,\r\n                    current    = this.resizeRects.current,\r\n                    restricted = this.resizeRects.restricted,\r\n                    delta      = this.resizeRects.delta,\r\n                    previous   = extend(this.resizeRects.previous, restricted),\r\n\r\n                    originalEdges = edges;\r\n\r\n                // `resize.preserveAspectRatio` takes precedence over `resize.square`\r\n                if (this.target.options.resize.preserveAspectRatio) {\r\n                    var resizeStartAspectRatio = this.resizeStartAspectRatio;\r\n\r\n                    edges = this.prepared._linkedEdges;\r\n\r\n                    if ((originalEdges.left && originalEdges.bottom)\r\n                        || (originalEdges.right && originalEdges.top)) {\r\n                        dy = -dx / resizeStartAspectRatio;\r\n                    }\r\n                    else if (originalEdges.left || originalEdges.right) { dy = dx / resizeStartAspectRatio; }\r\n                    else if (originalEdges.top || originalEdges.bottom) { dx = dy * resizeStartAspectRatio; }\r\n                }\r\n                else if (this.target.options.resize.square) {\r\n                    edges = this.prepared._linkedEdges;\r\n\r\n                    if ((originalEdges.left && originalEdges.bottom)\r\n                        || (originalEdges.right && originalEdges.top)) {\r\n                        dy = -dx;\r\n                    }\r\n                    else if (originalEdges.left || originalEdges.right) { dy = dx; }\r\n                    else if (originalEdges.top || originalEdges.bottom) { dx = dy; }\r\n                }\r\n\r\n                // update the 'current' rect without modifications\r\n                if (edges.top   ) { current.top    += dy; }\r\n                if (edges.bottom) { current.bottom += dy; }\r\n                if (edges.left  ) { current.left   += dx; }\r\n                if (edges.right ) { current.right  += dx; }\r\n\r\n                if (invertible) {\r\n                    // if invertible, copy the current rect\r\n                    extend(restricted, current);\r\n\r\n                    if (invert === 'reposition') {\r\n                        // swap edge values if necessary to keep width/height positive\r\n                        var swap;\r\n\r\n                        if (restricted.top > restricted.bottom) {\r\n                            swap = restricted.top;\r\n\r\n                            restricted.top = restricted.bottom;\r\n                            restricted.bottom = swap;\r\n                        }\r\n                        if (restricted.left > restricted.right) {\r\n                            swap = restricted.left;\r\n\r\n                            restricted.left = restricted.right;\r\n                            restricted.right = swap;\r\n                        }\r\n                    }\r\n                }\r\n                else {\r\n                    // if not invertible, restrict to minimum of 0x0 rect\r\n                    restricted.top    = Math.min(current.top, start.bottom);\r\n                    restricted.bottom = Math.max(current.bottom, start.top);\r\n                    restricted.left   = Math.min(current.left, start.right);\r\n                    restricted.right  = Math.max(current.right, start.left);\r\n                }\r\n\r\n                restricted.width  = restricted.right  - restricted.left;\r\n                restricted.height = restricted.bottom - restricted.top ;\r\n\r\n                for (var edge in restricted) {\r\n                    delta[edge] = restricted[edge] - previous[edge];\r\n                }\r\n\r\n                resizeEvent.edges = this.prepared.edges;\r\n                resizeEvent.rect = restricted;\r\n                resizeEvent.deltaRect = delta;\r\n            }\r\n\r\n            this.target.fire(resizeEvent);\r\n\r\n            return resizeEvent;\r\n        },\r\n\r\n        gestureStart: function (event) {\r\n            var gestureEvent = new InteractEvent(this, event, 'gesture', 'start', this.element);\r\n\r\n            gestureEvent.ds = 0;\r\n\r\n            this.gesture.startDistance = this.gesture.prevDistance = gestureEvent.distance;\r\n            this.gesture.startAngle = this.gesture.prevAngle = gestureEvent.angle;\r\n            this.gesture.scale = 1;\r\n\r\n            this.gesturing = true;\r\n\r\n            this.target.fire(gestureEvent);\r\n\r\n            return gestureEvent;\r\n        },\r\n\r\n        gestureMove: function (event) {\r\n            if (!this.pointerIds.length) {\r\n                return this.prevEvent;\r\n            }\r\n\r\n            var gestureEvent;\r\n\r\n            gestureEvent = new InteractEvent(this, event, 'gesture', 'move', this.element);\r\n            gestureEvent.ds = gestureEvent.scale - this.gesture.scale;\r\n\r\n            this.target.fire(gestureEvent);\r\n\r\n            this.gesture.prevAngle = gestureEvent.angle;\r\n            this.gesture.prevDistance = gestureEvent.distance;\r\n\r\n            if (gestureEvent.scale !== Infinity &&\r\n                gestureEvent.scale !== null &&\r\n                gestureEvent.scale !== undefined  &&\r\n                !isNaN(gestureEvent.scale)) {\r\n\r\n                this.gesture.scale = gestureEvent.scale;\r\n            }\r\n\r\n            return gestureEvent;\r\n        },\r\n\r\n        pointerHold: function (pointer, event, eventTarget) {\r\n            this.collectEventTargets(pointer, event, eventTarget, 'hold');\r\n        },\r\n\r\n        pointerUp: function (pointer, event, eventTarget, curEventTarget) {\r\n            var pointerIndex = this.mouse? 0 : indexOf(this.pointerIds, getPointerId(pointer));\r\n\r\n            clearTimeout(this.holdTimers[pointerIndex]);\r\n\r\n            this.collectEventTargets(pointer, event, eventTarget, 'up' );\r\n            this.collectEventTargets(pointer, event, eventTarget, 'tap');\r\n\r\n            this.pointerEnd(pointer, event, eventTarget, curEventTarget);\r\n\r\n            this.removePointer(pointer);\r\n        },\r\n\r\n        pointerCancel: function (pointer, event, eventTarget, curEventTarget) {\r\n            var pointerIndex = this.mouse? 0 : indexOf(this.pointerIds, getPointerId(pointer));\r\n\r\n            clearTimeout(this.holdTimers[pointerIndex]);\r\n\r\n            this.collectEventTargets(pointer, event, eventTarget, 'cancel');\r\n            this.pointerEnd(pointer, event, eventTarget, curEventTarget);\r\n\r\n            this.removePointer(pointer);\r\n        },\r\n\r\n        // http://www.quirksmode.org/dom/events/click.html\r\n        // >Events leading to dblclick\r\n        //\r\n        // IE8 doesn't fire down event before dblclick.\r\n        // This workaround tries to fire a tap and doubletap after dblclick\r\n        ie8Dblclick: function (pointer, event, eventTarget) {\r\n            if (this.prevTap\r\n                && event.clientX === this.prevTap.clientX\r\n                && event.clientY === this.prevTap.clientY\r\n                && eventTarget   === this.prevTap.target) {\r\n\r\n                this.downTargets[0] = eventTarget;\r\n                this.downTimes[0] = new Date().getTime();\r\n                this.collectEventTargets(pointer, event, eventTarget, 'tap');\r\n            }\r\n        },\r\n\r\n        // End interact move events and stop auto-scroll unless inertia is enabled\r\n        pointerEnd: function (pointer, event, eventTarget, curEventTarget) {\r\n            var endEvent,\r\n                target = this.target,\r\n                options = target && target.options,\r\n                inertiaOptions = options && this.prepared.name && options[this.prepared.name].inertia,\r\n                inertiaStatus = this.inertiaStatus;\r\n\r\n            if (this.interacting()) {\r\n\r\n                if (inertiaStatus.active && !inertiaStatus.ending) { return; }\r\n\r\n                var pointerSpeed,\r\n                    now = new Date().getTime(),\r\n                    inertiaPossible = false,\r\n                    inertia = false,\r\n                    smoothEnd = false,\r\n                    endSnap = checkSnap(target, this.prepared.name) && options[this.prepared.name].snap.endOnly,\r\n                    endRestrict = checkRestrict(target, this.prepared.name) && options[this.prepared.name].restrict.endOnly,\r\n                    dx = 0,\r\n                    dy = 0,\r\n                    startEvent;\r\n\r\n                if (this.dragging) {\r\n                    if      (options.drag.axis === 'x' ) { pointerSpeed = Math.abs(this.pointerDelta.client.vx); }\r\n                    else if (options.drag.axis === 'y' ) { pointerSpeed = Math.abs(this.pointerDelta.client.vy); }\r\n                    else   /*options.drag.axis === 'xy'*/{ pointerSpeed = this.pointerDelta.client.speed; }\r\n                }\r\n                else {\r\n                    pointerSpeed = this.pointerDelta.client.speed;\r\n                }\r\n\r\n                // check if inertia should be started\r\n                inertiaPossible = (inertiaOptions && inertiaOptions.enabled\r\n                                   && this.prepared.name !== 'gesture'\r\n                                   && event !== inertiaStatus.startEvent);\r\n\r\n                inertia = (inertiaPossible\r\n                           && (now - this.curCoords.timeStamp) < 50\r\n                           && pointerSpeed > inertiaOptions.minSpeed\r\n                           && pointerSpeed > inertiaOptions.endSpeed);\r\n\r\n                if (inertiaPossible && !inertia && (endSnap || endRestrict)) {\r\n\r\n                    var snapRestrict = {};\r\n\r\n                    snapRestrict.snap = snapRestrict.restrict = snapRestrict;\r\n\r\n                    if (endSnap) {\r\n                        this.setSnapping(this.curCoords.page, snapRestrict);\r\n                        if (snapRestrict.locked) {\r\n                            dx += snapRestrict.dx;\r\n                            dy += snapRestrict.dy;\r\n                        }\r\n                    }\r\n\r\n                    if (endRestrict) {\r\n                        this.setRestriction(this.curCoords.page, snapRestrict);\r\n                        if (snapRestrict.restricted) {\r\n                            dx += snapRestrict.dx;\r\n                            dy += snapRestrict.dy;\r\n                        }\r\n                    }\r\n\r\n                    if (dx || dy) {\r\n                        smoothEnd = true;\r\n                    }\r\n                }\r\n\r\n                if (inertia || smoothEnd) {\r\n                    copyCoords(inertiaStatus.upCoords, this.curCoords);\r\n\r\n                    this.pointers[0] = inertiaStatus.startEvent = startEvent =\r\n                        new InteractEvent(this, event, this.prepared.name, 'inertiastart', this.element);\r\n\r\n                    inertiaStatus.t0 = now;\r\n\r\n                    target.fire(inertiaStatus.startEvent);\r\n\r\n                    if (inertia) {\r\n                        inertiaStatus.vx0 = this.pointerDelta.client.vx;\r\n                        inertiaStatus.vy0 = this.pointerDelta.client.vy;\r\n                        inertiaStatus.v0 = pointerSpeed;\r\n\r\n                        this.calcInertia(inertiaStatus);\r\n\r\n                        var page = extend({}, this.curCoords.page),\r\n                            origin = getOriginXY(target, this.element),\r\n                            statusObject;\r\n\r\n                        page.x = page.x + inertiaStatus.xe - origin.x;\r\n                        page.y = page.y + inertiaStatus.ye - origin.y;\r\n\r\n                        statusObject = {\r\n                            useStatusXY: true,\r\n                            x: page.x,\r\n                            y: page.y,\r\n                            dx: 0,\r\n                            dy: 0,\r\n                            snap: null\r\n                        };\r\n\r\n                        statusObject.snap = statusObject;\r\n\r\n                        dx = dy = 0;\r\n\r\n                        if (endSnap) {\r\n                            var snap = this.setSnapping(this.curCoords.page, statusObject);\r\n\r\n                            if (snap.locked) {\r\n                                dx += snap.dx;\r\n                                dy += snap.dy;\r\n                            }\r\n                        }\r\n\r\n                        if (endRestrict) {\r\n                            var restrict = this.setRestriction(this.curCoords.page, statusObject);\r\n\r\n                            if (restrict.restricted) {\r\n                                dx += restrict.dx;\r\n                                dy += restrict.dy;\r\n                            }\r\n                        }\r\n\r\n                        inertiaStatus.modifiedXe += dx;\r\n                        inertiaStatus.modifiedYe += dy;\r\n\r\n                        inertiaStatus.i = reqFrame(this.boundInertiaFrame);\r\n                    }\r\n                    else {\r\n                        inertiaStatus.smoothEnd = true;\r\n                        inertiaStatus.xe = dx;\r\n                        inertiaStatus.ye = dy;\r\n\r\n                        inertiaStatus.sx = inertiaStatus.sy = 0;\r\n\r\n                        inertiaStatus.i = reqFrame(this.boundSmoothEndFrame);\r\n                    }\r\n\r\n                    inertiaStatus.active = true;\r\n                    return;\r\n                }\r\n\r\n                if (endSnap || endRestrict) {\r\n                    // fire a move event at the snapped coordinates\r\n                    this.pointerMove(pointer, event, eventTarget, curEventTarget, true);\r\n                }\r\n            }\r\n\r\n            if (this.dragging) {\r\n                endEvent = new InteractEvent(this, event, 'drag', 'end', this.element);\r\n\r\n                var draggableElement = this.element,\r\n                    drop = this.getDrop(endEvent, event, draggableElement);\r\n\r\n                this.dropTarget = drop.dropzone;\r\n                this.dropElement = drop.element;\r\n\r\n                var dropEvents = this.getDropEvents(event, endEvent);\r\n\r\n                if (dropEvents.leave) { this.prevDropTarget.fire(dropEvents.leave); }\r\n                if (dropEvents.enter) {     this.dropTarget.fire(dropEvents.enter); }\r\n                if (dropEvents.drop ) {     this.dropTarget.fire(dropEvents.drop ); }\r\n                if (dropEvents.deactivate) {\r\n                    this.fireActiveDrops(dropEvents.deactivate);\r\n                }\r\n\r\n                target.fire(endEvent);\r\n            }\r\n            else if (this.resizing) {\r\n                endEvent = new InteractEvent(this, event, 'resize', 'end', this.element);\r\n                target.fire(endEvent);\r\n            }\r\n            else if (this.gesturing) {\r\n                endEvent = new InteractEvent(this, event, 'gesture', 'end', this.element);\r\n                target.fire(endEvent);\r\n            }\r\n\r\n            this.stop(event);\r\n        },\r\n\r\n        collectDrops: function (element) {\r\n            var drops = [],\r\n                elements = [],\r\n                i;\r\n\r\n            element = element || this.element;\r\n\r\n            // collect all dropzones and their elements which qualify for a drop\r\n            for (i = 0; i < interactables.length; i++) {\r\n                if (!interactables[i].options.drop.enabled) { continue; }\r\n\r\n                var current = interactables[i],\r\n                    accept = current.options.drop.accept;\r\n\r\n                // test the draggable element against the dropzone's accept setting\r\n                if ((isElement(accept) && accept !== element)\r\n                    || (isString(accept)\r\n                        && !matchesSelector(element, accept))) {\r\n\r\n                    continue;\r\n                }\r\n\r\n                // query for new elements if necessary\r\n                var dropElements = current.selector? current._context.querySelectorAll(current.selector) : [current._element];\r\n\r\n                for (var j = 0, len = dropElements.length; j < len; j++) {\r\n                    var currentElement = dropElements[j];\r\n\r\n                    if (currentElement === element) {\r\n                        continue;\r\n                    }\r\n\r\n                    drops.push(current);\r\n                    elements.push(currentElement);\r\n                }\r\n            }\r\n\r\n            return {\r\n                dropzones: drops,\r\n                elements: elements\r\n            };\r\n        },\r\n\r\n        fireActiveDrops: function (event) {\r\n            var i,\r\n                current,\r\n                currentElement,\r\n                prevElement;\r\n\r\n            // loop through all active dropzones and trigger event\r\n            for (i = 0; i < this.activeDrops.dropzones.length; i++) {\r\n                current = this.activeDrops.dropzones[i];\r\n                currentElement = this.activeDrops.elements [i];\r\n\r\n                // prevent trigger of duplicate events on same element\r\n                if (currentElement !== prevElement) {\r\n                    // set current element as event target\r\n                    event.target = currentElement;\r\n                    current.fire(event);\r\n                }\r\n                prevElement = currentElement;\r\n            }\r\n        },\r\n\r\n        // Collect a new set of possible drops and save them in activeDrops.\r\n        // setActiveDrops should always be called when a drag has just started or a\r\n        // drag event happens while dynamicDrop is true\r\n        setActiveDrops: function (dragElement) {\r\n            // get dropzones and their elements that could receive the draggable\r\n            var possibleDrops = this.collectDrops(dragElement, true);\r\n\r\n            this.activeDrops.dropzones = possibleDrops.dropzones;\r\n            this.activeDrops.elements  = possibleDrops.elements;\r\n            this.activeDrops.rects     = [];\r\n\r\n            for (var i = 0; i < this.activeDrops.dropzones.length; i++) {\r\n                this.activeDrops.rects[i] = this.activeDrops.dropzones[i].getRect(this.activeDrops.elements[i]);\r\n            }\r\n        },\r\n\r\n        getDrop: function (dragEvent, event, dragElement) {\r\n            var validDrops = [];\r\n\r\n            if (dynamicDrop) {\r\n                this.setActiveDrops(dragElement);\r\n            }\r\n\r\n            // collect all dropzones and their elements which qualify for a drop\r\n            for (var j = 0; j < this.activeDrops.dropzones.length; j++) {\r\n                var current        = this.activeDrops.dropzones[j],\r\n                    currentElement = this.activeDrops.elements [j],\r\n                    rect           = this.activeDrops.rects    [j];\r\n\r\n                validDrops.push(current.dropCheck(dragEvent, event, this.target, dragElement, currentElement, rect)\r\n                                ? currentElement\r\n                                : null);\r\n            }\r\n\r\n            // get the most appropriate dropzone based on DOM depth and order\r\n            var dropIndex = indexOfDeepestElement(validDrops),\r\n                dropzone  = this.activeDrops.dropzones[dropIndex] || null,\r\n                element   = this.activeDrops.elements [dropIndex] || null;\r\n\r\n            return {\r\n                dropzone: dropzone,\r\n                element: element\r\n            };\r\n        },\r\n\r\n        getDropEvents: function (pointerEvent, dragEvent) {\r\n            var dropEvents = {\r\n                enter     : null,\r\n                leave     : null,\r\n                activate  : null,\r\n                deactivate: null,\r\n                move      : null,\r\n                drop      : null\r\n            };\r\n\r\n            if (this.dropElement !== this.prevDropElement) {\r\n                // if there was a prevDropTarget, create a dragleave event\r\n                if (this.prevDropTarget) {\r\n                    dropEvents.leave = {\r\n                        target       : this.prevDropElement,\r\n                        dropzone     : this.prevDropTarget,\r\n                        relatedTarget: dragEvent.target,\r\n                        draggable    : dragEvent.interactable,\r\n                        dragEvent    : dragEvent,\r\n                        interaction  : this,\r\n                        timeStamp    : dragEvent.timeStamp,\r\n                        type         : 'dragleave'\r\n                    };\r\n\r\n                    dragEvent.dragLeave = this.prevDropElement;\r\n                    dragEvent.prevDropzone = this.prevDropTarget;\r\n                }\r\n                // if the dropTarget is not null, create a dragenter event\r\n                if (this.dropTarget) {\r\n                    dropEvents.enter = {\r\n                        target       : this.dropElement,\r\n                        dropzone     : this.dropTarget,\r\n                        relatedTarget: dragEvent.target,\r\n                        draggable    : dragEvent.interactable,\r\n                        dragEvent    : dragEvent,\r\n                        interaction  : this,\r\n                        timeStamp    : dragEvent.timeStamp,\r\n                        type         : 'dragenter'\r\n                    };\r\n\r\n                    dragEvent.dragEnter = this.dropElement;\r\n                    dragEvent.dropzone = this.dropTarget;\r\n                }\r\n            }\r\n\r\n            if (dragEvent.type === 'dragend' && this.dropTarget) {\r\n                dropEvents.drop = {\r\n                    target       : this.dropElement,\r\n                    dropzone     : this.dropTarget,\r\n                    relatedTarget: dragEvent.target,\r\n                    draggable    : dragEvent.interactable,\r\n                    dragEvent    : dragEvent,\r\n                    interaction  : this,\r\n                    timeStamp    : dragEvent.timeStamp,\r\n                    type         : 'drop'\r\n                };\r\n\r\n                dragEvent.dropzone = this.dropTarget;\r\n            }\r\n            if (dragEvent.type === 'dragstart') {\r\n                dropEvents.activate = {\r\n                    target       : null,\r\n                    dropzone     : null,\r\n                    relatedTarget: dragEvent.target,\r\n                    draggable    : dragEvent.interactable,\r\n                    dragEvent    : dragEvent,\r\n                    interaction  : this,\r\n                    timeStamp    : dragEvent.timeStamp,\r\n                    type         : 'dropactivate'\r\n                };\r\n            }\r\n            if (dragEvent.type === 'dragend') {\r\n                dropEvents.deactivate = {\r\n                    target       : null,\r\n                    dropzone     : null,\r\n                    relatedTarget: dragEvent.target,\r\n                    draggable    : dragEvent.interactable,\r\n                    dragEvent    : dragEvent,\r\n                    interaction  : this,\r\n                    timeStamp    : dragEvent.timeStamp,\r\n                    type         : 'dropdeactivate'\r\n                };\r\n            }\r\n            if (dragEvent.type === 'dragmove' && this.dropTarget) {\r\n                dropEvents.move = {\r\n                    target       : this.dropElement,\r\n                    dropzone     : this.dropTarget,\r\n                    relatedTarget: dragEvent.target,\r\n                    draggable    : dragEvent.interactable,\r\n                    dragEvent    : dragEvent,\r\n                    interaction  : this,\r\n                    dragmove     : dragEvent,\r\n                    timeStamp    : dragEvent.timeStamp,\r\n                    type         : 'dropmove'\r\n                };\r\n                dragEvent.dropzone = this.dropTarget;\r\n            }\r\n\r\n            return dropEvents;\r\n        },\r\n\r\n        currentAction: function () {\r\n            return (this.dragging && 'drag') || (this.resizing && 'resize') || (this.gesturing && 'gesture') || null;\r\n        },\r\n\r\n        interacting: function () {\r\n            return this.dragging || this.resizing || this.gesturing;\r\n        },\r\n\r\n        clearTargets: function () {\r\n            this.target = this.element = null;\r\n\r\n            this.dropTarget = this.dropElement = this.prevDropTarget = this.prevDropElement = null;\r\n        },\r\n\r\n        stop: function (event) {\r\n            if (this.interacting()) {\r\n                autoScroll.stop();\r\n                this.matches = [];\r\n                this.matchElements = [];\r\n\r\n                var target = this.target;\r\n\r\n                if (target.options.styleCursor) {\r\n                    target._doc.documentElement.style.cursor = '';\r\n                }\r\n\r\n                // prevent Default only if were previously interacting\r\n                if (event && isFunction(event.preventDefault)) {\r\n                    this.checkAndPreventDefault(event, target, this.element);\r\n                }\r\n\r\n                if (this.dragging) {\r\n                    this.activeDrops.dropzones = this.activeDrops.elements = this.activeDrops.rects = null;\r\n                }\r\n            }\r\n\r\n            this.clearTargets();\r\n\r\n            this.pointerIsDown = this.snapStatus.locked = this.dragging = this.resizing = this.gesturing = false;\r\n            this.prepared.name = this.prevEvent = null;\r\n            this.inertiaStatus.resumeDx = this.inertiaStatus.resumeDy = 0;\r\n\r\n            // remove pointers if their ID isn't in this.pointerIds\r\n            for (var i = 0; i < this.pointers.length; i++) {\r\n                if (indexOf(this.pointerIds, getPointerId(this.pointers[i])) === -1) {\r\n                    this.pointers.splice(i, 1);\r\n                }\r\n            }\r\n        },\r\n\r\n        inertiaFrame: function () {\r\n            var inertiaStatus = this.inertiaStatus,\r\n                options = this.target.options[this.prepared.name].inertia,\r\n                lambda = options.resistance,\r\n                t = new Date().getTime() / 1000 - inertiaStatus.t0;\r\n\r\n            if (t < inertiaStatus.te) {\r\n\r\n                var progress =  1 - (Math.exp(-lambda * t) - inertiaStatus.lambda_v0) / inertiaStatus.one_ve_v0;\r\n\r\n                if (inertiaStatus.modifiedXe === inertiaStatus.xe && inertiaStatus.modifiedYe === inertiaStatus.ye) {\r\n                    inertiaStatus.sx = inertiaStatus.xe * progress;\r\n                    inertiaStatus.sy = inertiaStatus.ye * progress;\r\n                }\r\n                else {\r\n                    var quadPoint = getQuadraticCurvePoint(\r\n                            0, 0,\r\n                            inertiaStatus.xe, inertiaStatus.ye,\r\n                            inertiaStatus.modifiedXe, inertiaStatus.modifiedYe,\r\n                            progress);\r\n\r\n                    inertiaStatus.sx = quadPoint.x;\r\n                    inertiaStatus.sy = quadPoint.y;\r\n                }\r\n\r\n                this.pointerMove(inertiaStatus.startEvent, inertiaStatus.startEvent);\r\n\r\n                inertiaStatus.i = reqFrame(this.boundInertiaFrame);\r\n            }\r\n            else {\r\n                inertiaStatus.ending = true;\r\n\r\n                inertiaStatus.sx = inertiaStatus.modifiedXe;\r\n                inertiaStatus.sy = inertiaStatus.modifiedYe;\r\n\r\n                this.pointerMove(inertiaStatus.startEvent, inertiaStatus.startEvent);\r\n                this.pointerEnd(inertiaStatus.startEvent, inertiaStatus.startEvent);\r\n\r\n                inertiaStatus.active = inertiaStatus.ending = false;\r\n            }\r\n        },\r\n\r\n        smoothEndFrame: function () {\r\n            var inertiaStatus = this.inertiaStatus,\r\n                t = new Date().getTime() - inertiaStatus.t0,\r\n                duration = this.target.options[this.prepared.name].inertia.smoothEndDuration;\r\n\r\n            if (t < duration) {\r\n                inertiaStatus.sx = easeOutQuad(t, 0, inertiaStatus.xe, duration);\r\n                inertiaStatus.sy = easeOutQuad(t, 0, inertiaStatus.ye, duration);\r\n\r\n                this.pointerMove(inertiaStatus.startEvent, inertiaStatus.startEvent);\r\n\r\n                inertiaStatus.i = reqFrame(this.boundSmoothEndFrame);\r\n            }\r\n            else {\r\n                inertiaStatus.ending = true;\r\n\r\n                inertiaStatus.sx = inertiaStatus.xe;\r\n                inertiaStatus.sy = inertiaStatus.ye;\r\n\r\n                this.pointerMove(inertiaStatus.startEvent, inertiaStatus.startEvent);\r\n                this.pointerEnd(inertiaStatus.startEvent, inertiaStatus.startEvent);\r\n\r\n                inertiaStatus.smoothEnd =\r\n                  inertiaStatus.active = inertiaStatus.ending = false;\r\n            }\r\n        },\r\n\r\n        addPointer: function (pointer) {\r\n            var id = getPointerId(pointer),\r\n                index = this.mouse? 0 : indexOf(this.pointerIds, id);\r\n\r\n            if (index === -1) {\r\n                index = this.pointerIds.length;\r\n            }\r\n\r\n            this.pointerIds[index] = id;\r\n            this.pointers[index] = pointer;\r\n\r\n            return index;\r\n        },\r\n\r\n        removePointer: function (pointer) {\r\n            var id = getPointerId(pointer),\r\n                index = this.mouse? 0 : indexOf(this.pointerIds, id);\r\n\r\n            if (index === -1) { return; }\r\n\r\n            this.pointers   .splice(index, 1);\r\n            this.pointerIds .splice(index, 1);\r\n            this.downTargets.splice(index, 1);\r\n            this.downTimes  .splice(index, 1);\r\n            this.holdTimers .splice(index, 1);\r\n        },\r\n\r\n        recordPointer: function (pointer) {\r\n            var index = this.mouse? 0: indexOf(this.pointerIds, getPointerId(pointer));\r\n\r\n            if (index === -1) { return; }\r\n\r\n            this.pointers[index] = pointer;\r\n        },\r\n\r\n        collectEventTargets: function (pointer, event, eventTarget, eventType) {\r\n            var pointerIndex = this.mouse? 0 : indexOf(this.pointerIds, getPointerId(pointer));\r\n\r\n            // do not fire a tap event if the pointer was moved before being lifted\r\n            if (eventType === 'tap' && (this.pointerWasMoved\r\n                // or if the pointerup target is different to the pointerdown target\r\n                || !(this.downTargets[pointerIndex] && this.downTargets[pointerIndex] === eventTarget))) {\r\n                return;\r\n            }\r\n\r\n            var targets = [],\r\n                elements = [],\r\n                element = eventTarget;\r\n\r\n            function collectSelectors (interactable, selector, context) {\r\n                var els = ie8MatchesSelector\r\n                        ? context.querySelectorAll(selector)\r\n                        : undefined;\r\n\r\n                if (interactable._iEvents[eventType]\r\n                    && isElement(element)\r\n                    && inContext(interactable, element)\r\n                    && !testIgnore(interactable, element, eventTarget)\r\n                    && testAllow(interactable, element, eventTarget)\r\n                    && matchesSelector(element, selector, els)) {\r\n\r\n                    targets.push(interactable);\r\n                    elements.push(element);\r\n                }\r\n            }\r\n\r\n            while (element) {\r\n                if (interact.isSet(element) && interact(element)._iEvents[eventType]) {\r\n                    targets.push(interact(element));\r\n                    elements.push(element);\r\n                }\r\n\r\n                interactables.forEachSelector(collectSelectors);\r\n\r\n                element = parentElement(element);\r\n            }\r\n\r\n            // create the tap event even if there are no listeners so that\r\n            // doubletap can still be created and fired\r\n            if (targets.length || eventType === 'tap') {\r\n                this.firePointers(pointer, event, eventTarget, targets, elements, eventType);\r\n            }\r\n        },\r\n\r\n        firePointers: function (pointer, event, eventTarget, targets, elements, eventType) {\r\n            var pointerIndex = this.mouse? 0 : indexOf(this.pointerIds, getPointerId(pointer)),\r\n                pointerEvent = {},\r\n                i,\r\n                // for tap events\r\n                interval, createNewDoubleTap;\r\n\r\n            // if it's a doubletap then the event properties would have been\r\n            // copied from the tap event and provided as the pointer argument\r\n            if (eventType === 'doubletap') {\r\n                pointerEvent = pointer;\r\n            }\r\n            else {\r\n                pointerExtend(pointerEvent, event);\r\n                if (event !== pointer) {\r\n                    pointerExtend(pointerEvent, pointer);\r\n                }\r\n\r\n                pointerEvent.preventDefault           = preventOriginalDefault;\r\n                pointerEvent.stopPropagation          = InteractEvent.prototype.stopPropagation;\r\n                pointerEvent.stopImmediatePropagation = InteractEvent.prototype.stopImmediatePropagation;\r\n                pointerEvent.interaction              = this;\r\n\r\n                pointerEvent.timeStamp       = new Date().getTime();\r\n                pointerEvent.originalEvent   = event;\r\n                pointerEvent.originalPointer = pointer;\r\n                pointerEvent.type            = eventType;\r\n                pointerEvent.pointerId       = getPointerId(pointer);\r\n                pointerEvent.pointerType     = this.mouse? 'mouse' : !supportsPointerEvent? 'touch'\r\n                                                    : isString(pointer.pointerType)\r\n                                                        ? pointer.pointerType\r\n                                                        : [,,'touch', 'pen', 'mouse'][pointer.pointerType];\r\n            }\r\n\r\n            if (eventType === 'tap') {\r\n                pointerEvent.dt = pointerEvent.timeStamp - this.downTimes[pointerIndex];\r\n\r\n                interval = pointerEvent.timeStamp - this.tapTime;\r\n                createNewDoubleTap = !!(this.prevTap && this.prevTap.type !== 'doubletap'\r\n                       && this.prevTap.target === pointerEvent.target\r\n                       && interval < 500);\r\n\r\n                pointerEvent.double = createNewDoubleTap;\r\n\r\n                this.tapTime = pointerEvent.timeStamp;\r\n            }\r\n\r\n            for (i = 0; i < targets.length; i++) {\r\n                pointerEvent.currentTarget = elements[i];\r\n                pointerEvent.interactable = targets[i];\r\n                targets[i].fire(pointerEvent);\r\n\r\n                if (pointerEvent.immediatePropagationStopped\r\n                    ||(pointerEvent.propagationStopped && elements[i + 1] !== pointerEvent.currentTarget)) {\r\n                    break;\r\n                }\r\n            }\r\n\r\n            if (createNewDoubleTap) {\r\n                var doubleTap = {};\r\n\r\n                extend(doubleTap, pointerEvent);\r\n\r\n                doubleTap.dt   = interval;\r\n                doubleTap.type = 'doubletap';\r\n\r\n                this.collectEventTargets(doubleTap, event, eventTarget, 'doubletap');\r\n\r\n                this.prevTap = doubleTap;\r\n            }\r\n            else if (eventType === 'tap') {\r\n                this.prevTap = pointerEvent;\r\n            }\r\n        },\r\n\r\n        validateSelector: function (pointer, event, matches, matchElements) {\r\n            for (var i = 0, len = matches.length; i < len; i++) {\r\n                var match = matches[i],\r\n                    matchElement = matchElements[i],\r\n                    action = validateAction(match.getAction(pointer, event, this, matchElement), match);\r\n\r\n                if (action && withinInteractionLimit(match, matchElement, action)) {\r\n                    this.target = match;\r\n                    this.element = matchElement;\r\n\r\n                    return action;\r\n                }\r\n            }\r\n        },\r\n\r\n        setSnapping: function (pageCoords, status) {\r\n            var snap = this.target.options[this.prepared.name].snap,\r\n                targets = [],\r\n                target,\r\n                page,\r\n                i;\r\n\r\n            status = status || this.snapStatus;\r\n\r\n            if (status.useStatusXY) {\r\n                page = { x: status.x, y: status.y };\r\n            }\r\n            else {\r\n                var origin = getOriginXY(this.target, this.element);\r\n\r\n                page = extend({}, pageCoords);\r\n\r\n                page.x -= origin.x;\r\n                page.y -= origin.y;\r\n            }\r\n\r\n            status.realX = page.x;\r\n            status.realY = page.y;\r\n\r\n            page.x = page.x - this.inertiaStatus.resumeDx;\r\n            page.y = page.y - this.inertiaStatus.resumeDy;\r\n\r\n            var len = snap.targets? snap.targets.length : 0;\r\n\r\n            for (var relIndex = 0; relIndex < this.snapOffsets.length; relIndex++) {\r\n                var relative = {\r\n                    x: page.x - this.snapOffsets[relIndex].x,\r\n                    y: page.y - this.snapOffsets[relIndex].y\r\n                };\r\n\r\n                for (i = 0; i < len; i++) {\r\n                    if (isFunction(snap.targets[i])) {\r\n                        target = snap.targets[i](relative.x, relative.y, this);\r\n                    }\r\n                    else {\r\n                        target = snap.targets[i];\r\n                    }\r\n\r\n                    if (!target) { continue; }\r\n\r\n                    targets.push({\r\n                        x: isNumber(target.x) ? (target.x + this.snapOffsets[relIndex].x) : relative.x,\r\n                        y: isNumber(target.y) ? (target.y + this.snapOffsets[relIndex].y) : relative.y,\r\n\r\n                        range: isNumber(target.range)? target.range: snap.range\r\n                    });\r\n                }\r\n            }\r\n\r\n            var closest = {\r\n                    target: null,\r\n                    inRange: false,\r\n                    distance: 0,\r\n                    range: 0,\r\n                    dx: 0,\r\n                    dy: 0\r\n                };\r\n\r\n            for (i = 0, len = targets.length; i < len; i++) {\r\n                target = targets[i];\r\n\r\n                var range = target.range,\r\n                    dx = target.x - page.x,\r\n                    dy = target.y - page.y,\r\n                    distance = hypot(dx, dy),\r\n                    inRange = distance <= range;\r\n\r\n                // Infinite targets count as being out of range\r\n                // compared to non infinite ones that are in range\r\n                if (range === Infinity && closest.inRange && closest.range !== Infinity) {\r\n                    inRange = false;\r\n                }\r\n\r\n                if (!closest.target || (inRange\r\n                    // is the closest target in range?\r\n                    ? (closest.inRange && range !== Infinity\r\n                        // the pointer is relatively deeper in this target\r\n                        ? distance / range < closest.distance / closest.range\r\n                        // this target has Infinite range and the closest doesn't\r\n                        : (range === Infinity && closest.range !== Infinity)\r\n                            // OR this target is closer that the previous closest\r\n                            || distance < closest.distance)\r\n                    // The other is not in range and the pointer is closer to this target\r\n                    : (!closest.inRange && distance < closest.distance))) {\r\n\r\n                    if (range === Infinity) {\r\n                        inRange = true;\r\n                    }\r\n\r\n                    closest.target = target;\r\n                    closest.distance = distance;\r\n                    closest.range = range;\r\n                    closest.inRange = inRange;\r\n                    closest.dx = dx;\r\n                    closest.dy = dy;\r\n\r\n                    status.range = range;\r\n                }\r\n            }\r\n\r\n            var snapChanged;\r\n\r\n            if (closest.target) {\r\n                snapChanged = (status.snappedX !== closest.target.x || status.snappedY !== closest.target.y);\r\n\r\n                status.snappedX = closest.target.x;\r\n                status.snappedY = closest.target.y;\r\n            }\r\n            else {\r\n                snapChanged = true;\r\n\r\n                status.snappedX = NaN;\r\n                status.snappedY = NaN;\r\n            }\r\n\r\n            status.dx = closest.dx;\r\n            status.dy = closest.dy;\r\n\r\n            status.changed = (snapChanged || (closest.inRange && !status.locked));\r\n            status.locked = closest.inRange;\r\n\r\n            return status;\r\n        },\r\n\r\n        setRestriction: function (pageCoords, status) {\r\n            var target = this.target,\r\n                restrict = target && target.options[this.prepared.name].restrict,\r\n                restriction = restrict && restrict.restriction,\r\n                page;\r\n\r\n            if (!restriction) {\r\n                return status;\r\n            }\r\n\r\n            status = status || this.restrictStatus;\r\n\r\n            page = status.useStatusXY\r\n                    ? page = { x: status.x, y: status.y }\r\n                    : page = extend({}, pageCoords);\r\n\r\n            if (status.snap && status.snap.locked) {\r\n                page.x += status.snap.dx || 0;\r\n                page.y += status.snap.dy || 0;\r\n            }\r\n\r\n            page.x -= this.inertiaStatus.resumeDx;\r\n            page.y -= this.inertiaStatus.resumeDy;\r\n\r\n            status.dx = 0;\r\n            status.dy = 0;\r\n            status.restricted = false;\r\n\r\n            var rect, restrictedX, restrictedY;\r\n\r\n            if (isString(restriction)) {\r\n                if (restriction === 'parent') {\r\n                    restriction = parentElement(this.element);\r\n                }\r\n                else if (restriction === 'self') {\r\n                    restriction = target.getRect(this.element);\r\n                }\r\n                else {\r\n                    restriction = closest(this.element, restriction);\r\n                }\r\n\r\n                if (!restriction) { return status; }\r\n            }\r\n\r\n            if (isFunction(restriction)) {\r\n                restriction = restriction(page.x, page.y, this.element);\r\n            }\r\n\r\n            if (isElement(restriction)) {\r\n                restriction = getElementRect(restriction);\r\n            }\r\n\r\n            rect = restriction;\r\n\r\n            if (!restriction) {\r\n                restrictedX = page.x;\r\n                restrictedY = page.y;\r\n            }\r\n            // object is assumed to have\r\n            // x, y, width, height or\r\n            // left, top, right, bottom\r\n            else if ('x' in restriction && 'y' in restriction) {\r\n                restrictedX = Math.max(Math.min(rect.x + rect.width  - this.restrictOffset.right , page.x), rect.x + this.restrictOffset.left);\r\n                restrictedY = Math.max(Math.min(rect.y + rect.height - this.restrictOffset.bottom, page.y), rect.y + this.restrictOffset.top );\r\n            }\r\n            else {\r\n                restrictedX = Math.max(Math.min(rect.right  - this.restrictOffset.right , page.x), rect.left + this.restrictOffset.left);\r\n                restrictedY = Math.max(Math.min(rect.bottom - this.restrictOffset.bottom, page.y), rect.top  + this.restrictOffset.top );\r\n            }\r\n\r\n            status.dx = restrictedX - page.x;\r\n            status.dy = restrictedY - page.y;\r\n\r\n            status.changed = status.restrictedX !== restrictedX || status.restrictedY !== restrictedY;\r\n            status.restricted = !!(status.dx || status.dy);\r\n\r\n            status.restrictedX = restrictedX;\r\n            status.restrictedY = restrictedY;\r\n\r\n            return status;\r\n        },\r\n\r\n        checkAndPreventDefault: function (event, interactable, element) {\r\n            if (!(interactable = interactable || this.target)) { return; }\r\n\r\n            var options = interactable.options,\r\n                prevent = options.preventDefault;\r\n\r\n            if (prevent === 'auto' && element && !/^(input|select|textarea)$/i.test(event.target.nodeName)) {\r\n                // do not preventDefault on pointerdown if the prepared action is a drag\r\n                // and dragging can only start from a certain direction - this allows\r\n                // a touch to pan the viewport if a drag isn't in the right direction\r\n                if (/down|start/i.test(event.type)\r\n                    && this.prepared.name === 'drag' && options.drag.axis !== 'xy') {\r\n\r\n                    return;\r\n                }\r\n\r\n                // with manualStart, only preventDefault while interacting\r\n                if (options[this.prepared.name] && options[this.prepared.name].manualStart\r\n                    && !this.interacting()) {\r\n                    return;\r\n                }\r\n\r\n                event.preventDefault();\r\n                return;\r\n            }\r\n\r\n            if (prevent === 'always') {\r\n                event.preventDefault();\r\n                return;\r\n            }\r\n        },\r\n\r\n        calcInertia: function (status) {\r\n            var inertiaOptions = this.target.options[this.prepared.name].inertia,\r\n                lambda = inertiaOptions.resistance,\r\n                inertiaDur = -Math.log(inertiaOptions.endSpeed / status.v0) / lambda;\r\n\r\n            status.x0 = this.prevEvent.pageX;\r\n            status.y0 = this.prevEvent.pageY;\r\n            status.t0 = status.startEvent.timeStamp / 1000;\r\n            status.sx = status.sy = 0;\r\n\r\n            status.modifiedXe = status.xe = (status.vx0 - inertiaDur) / lambda;\r\n            status.modifiedYe = status.ye = (status.vy0 - inertiaDur) / lambda;\r\n            status.te = inertiaDur;\r\n\r\n            status.lambda_v0 = lambda / status.v0;\r\n            status.one_ve_v0 = 1 - inertiaOptions.endSpeed / status.v0;\r\n        },\r\n\r\n        autoScrollMove: function (pointer) {\r\n            if (!(this.interacting()\r\n                && checkAutoScroll(this.target, this.prepared.name))) {\r\n                return;\r\n            }\r\n\r\n            if (this.inertiaStatus.active) {\r\n                autoScroll.x = autoScroll.y = 0;\r\n                return;\r\n            }\r\n\r\n            var top,\r\n                right,\r\n                bottom,\r\n                left,\r\n                options = this.target.options[this.prepared.name].autoScroll,\r\n                container = options.container || getWindow(this.element);\r\n\r\n            if (isWindow(container)) {\r\n                left   = pointer.clientX < autoScroll.margin;\r\n                top    = pointer.clientY < autoScroll.margin;\r\n                right  = pointer.clientX > container.innerWidth  - autoScroll.margin;\r\n                bottom = pointer.clientY > container.innerHeight - autoScroll.margin;\r\n            }\r\n            else {\r\n                var rect = getElementClientRect(container);\r\n\r\n                left   = pointer.clientX < rect.left   + autoScroll.margin;\r\n                top    = pointer.clientY < rect.top    + autoScroll.margin;\r\n                right  = pointer.clientX > rect.right  - autoScroll.margin;\r\n                bottom = pointer.clientY > rect.bottom - autoScroll.margin;\r\n            }\r\n\r\n            autoScroll.x = (right ? 1: left? -1: 0);\r\n            autoScroll.y = (bottom? 1:  top? -1: 0);\r\n\r\n            if (!autoScroll.isScrolling) {\r\n                // set the autoScroll properties to those of the target\r\n                autoScroll.margin = options.margin;\r\n                autoScroll.speed  = options.speed;\r\n\r\n                autoScroll.start(this);\r\n            }\r\n        },\r\n\r\n        _updateEventTargets: function (target, currentTarget) {\r\n            this._eventTarget    = target;\r\n            this._curEventTarget = currentTarget;\r\n        }\r\n\r\n    };\r\n\r\n    function getInteractionFromPointer (pointer, eventType, eventTarget) {\r\n        var i = 0, len = interactions.length,\r\n            mouseEvent = (/mouse/i.test(pointer.pointerType || eventType)\r\n                          // MSPointerEvent.MSPOINTER_TYPE_MOUSE\r\n                          || pointer.pointerType === 4),\r\n            interaction;\r\n\r\n        var id = getPointerId(pointer);\r\n\r\n        // try to resume inertia with a new pointer\r\n        if (/down|start/i.test(eventType)) {\r\n            for (i = 0; i < len; i++) {\r\n                interaction = interactions[i];\r\n\r\n                var element = eventTarget;\r\n\r\n                if (interaction.inertiaStatus.active && interaction.target.options[interaction.prepared.name].inertia.allowResume\r\n                    && (interaction.mouse === mouseEvent)) {\r\n                    while (element) {\r\n                        // if the element is the interaction element\r\n                        if (element === interaction.element) {\r\n                            return interaction;\r\n                        }\r\n                        element = parentElement(element);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        // if it's a mouse interaction\r\n        if (mouseEvent || !(supportsTouch || supportsPointerEvent)) {\r\n\r\n            // find a mouse interaction that's not in inertia phase\r\n            for (i = 0; i < len; i++) {\r\n                if (interactions[i].mouse && !interactions[i].inertiaStatus.active) {\r\n                    return interactions[i];\r\n                }\r\n            }\r\n\r\n            // find any interaction specifically for mouse.\r\n            // if the eventType is a mousedown, and inertia is active\r\n            // ignore the interaction\r\n            for (i = 0; i < len; i++) {\r\n                if (interactions[i].mouse && !(/down/.test(eventType) && interactions[i].inertiaStatus.active)) {\r\n                    return interaction;\r\n                }\r\n            }\r\n\r\n            // create a new interaction for mouse\r\n            interaction = new Interaction();\r\n            interaction.mouse = true;\r\n\r\n            return interaction;\r\n        }\r\n\r\n        // get interaction that has this pointer\r\n        for (i = 0; i < len; i++) {\r\n            if (contains(interactions[i].pointerIds, id)) {\r\n                return interactions[i];\r\n            }\r\n        }\r\n\r\n        // at this stage, a pointerUp should not return an interaction\r\n        if (/up|end|out/i.test(eventType)) {\r\n            return null;\r\n        }\r\n\r\n        // get first idle interaction\r\n        for (i = 0; i < len; i++) {\r\n            interaction = interactions[i];\r\n\r\n            if ((!interaction.prepared.name || (interaction.target.options.gesture.enabled))\r\n                && !interaction.interacting()\r\n                && !(!mouseEvent && interaction.mouse)) {\r\n\r\n                return interaction;\r\n            }\r\n        }\r\n\r\n        return new Interaction();\r\n    }\r\n\r\n    function doOnInteractions (method) {\r\n        return (function (event) {\r\n            var interaction,\r\n                eventTarget = getActualElement(event.path\r\n                                               ? event.path[0]\r\n                                               : event.target),\r\n                curEventTarget = getActualElement(event.currentTarget),\r\n                i;\r\n\r\n            if (supportsTouch && /touch/.test(event.type)) {\r\n                prevTouchTime = new Date().getTime();\r\n\r\n                for (i = 0; i < event.changedTouches.length; i++) {\r\n                    var pointer = event.changedTouches[i];\r\n\r\n                    interaction = getInteractionFromPointer(pointer, event.type, eventTarget);\r\n\r\n                    if (!interaction) { continue; }\r\n\r\n                    interaction._updateEventTargets(eventTarget, curEventTarget);\r\n\r\n                    interaction[method](pointer, event, eventTarget, curEventTarget);\r\n                }\r\n            }\r\n            else {\r\n                if (!supportsPointerEvent && /mouse/.test(event.type)) {\r\n                    // ignore mouse events while touch interactions are active\r\n                    for (i = 0; i < interactions.length; i++) {\r\n                        if (!interactions[i].mouse && interactions[i].pointerIsDown) {\r\n                            return;\r\n                        }\r\n                    }\r\n\r\n                    // try to ignore mouse events that are simulated by the browser\r\n                    // after a touch event\r\n                    if (new Date().getTime() - prevTouchTime < 500) {\r\n                        return;\r\n                    }\r\n                }\r\n\r\n                interaction = getInteractionFromPointer(event, event.type, eventTarget);\r\n\r\n                if (!interaction) { return; }\r\n\r\n                interaction._updateEventTargets(eventTarget, curEventTarget);\r\n\r\n                interaction[method](event, event, eventTarget, curEventTarget);\r\n            }\r\n        });\r\n    }\r\n\r\n    function InteractEvent (interaction, event, action, phase, element, related) {\r\n        var client,\r\n            page,\r\n            target      = interaction.target,\r\n            snapStatus  = interaction.snapStatus,\r\n            restrictStatus  = interaction.restrictStatus,\r\n            pointers    = interaction.pointers,\r\n            deltaSource = (target && target.options || defaultOptions).deltaSource,\r\n            sourceX     = deltaSource + 'X',\r\n            sourceY     = deltaSource + 'Y',\r\n            options     = target? target.options: defaultOptions,\r\n            origin      = getOriginXY(target, element),\r\n            starting    = phase === 'start',\r\n            ending      = phase === 'end',\r\n            coords      = starting? interaction.startCoords : interaction.curCoords;\r\n\r\n        element = element || interaction.element;\r\n\r\n        page   = extend({}, coords.page);\r\n        client = extend({}, coords.client);\r\n\r\n        page.x -= origin.x;\r\n        page.y -= origin.y;\r\n\r\n        client.x -= origin.x;\r\n        client.y -= origin.y;\r\n\r\n        var relativePoints = options[action].snap && options[action].snap.relativePoints ;\r\n\r\n        if (checkSnap(target, action) && !(starting && relativePoints && relativePoints.length)) {\r\n            this.snap = {\r\n                range  : snapStatus.range,\r\n                locked : snapStatus.locked,\r\n                x      : snapStatus.snappedX,\r\n                y      : snapStatus.snappedY,\r\n                realX  : snapStatus.realX,\r\n                realY  : snapStatus.realY,\r\n                dx     : snapStatus.dx,\r\n                dy     : snapStatus.dy\r\n            };\r\n\r\n            if (snapStatus.locked) {\r\n                page.x += snapStatus.dx;\r\n                page.y += snapStatus.dy;\r\n                client.x += snapStatus.dx;\r\n                client.y += snapStatus.dy;\r\n            }\r\n        }\r\n\r\n        if (checkRestrict(target, action) && !(starting && options[action].restrict.elementRect) && restrictStatus.restricted) {\r\n            page.x += restrictStatus.dx;\r\n            page.y += restrictStatus.dy;\r\n            client.x += restrictStatus.dx;\r\n            client.y += restrictStatus.dy;\r\n\r\n            this.restrict = {\r\n                dx: restrictStatus.dx,\r\n                dy: restrictStatus.dy\r\n            };\r\n        }\r\n\r\n        this.pageX     = page.x;\r\n        this.pageY     = page.y;\r\n        this.clientX   = client.x;\r\n        this.clientY   = client.y;\r\n\r\n        this.x0        = interaction.startCoords.page.x - origin.x;\r\n        this.y0        = interaction.startCoords.page.y - origin.y;\r\n        this.clientX0  = interaction.startCoords.client.x - origin.x;\r\n        this.clientY0  = interaction.startCoords.client.y - origin.y;\r\n        this.ctrlKey   = event.ctrlKey;\r\n        this.altKey    = event.altKey;\r\n        this.shiftKey  = event.shiftKey;\r\n        this.metaKey   = event.metaKey;\r\n        this.button    = event.button;\r\n        this.buttons   = event.buttons;\r\n        this.target    = element;\r\n        this.t0        = interaction.downTimes[0];\r\n        this.type      = action + (phase || '');\r\n\r\n        this.interaction = interaction;\r\n        this.interactable = target;\r\n\r\n        var inertiaStatus = interaction.inertiaStatus;\r\n\r\n        if (inertiaStatus.active) {\r\n            this.detail = 'inertia';\r\n        }\r\n\r\n        if (related) {\r\n            this.relatedTarget = related;\r\n        }\r\n\r\n        // end event dx, dy is difference between start and end points\r\n        if (ending) {\r\n            if (deltaSource === 'client') {\r\n                this.dx = client.x - interaction.startCoords.client.x;\r\n                this.dy = client.y - interaction.startCoords.client.y;\r\n            }\r\n            else {\r\n                this.dx = page.x - interaction.startCoords.page.x;\r\n                this.dy = page.y - interaction.startCoords.page.y;\r\n            }\r\n        }\r\n        else if (starting) {\r\n            this.dx = 0;\r\n            this.dy = 0;\r\n        }\r\n        // copy properties from previousmove if starting inertia\r\n        else if (phase === 'inertiastart') {\r\n            this.dx = interaction.prevEvent.dx;\r\n            this.dy = interaction.prevEvent.dy;\r\n        }\r\n        else {\r\n            if (deltaSource === 'client') {\r\n                this.dx = client.x - interaction.prevEvent.clientX;\r\n                this.dy = client.y - interaction.prevEvent.clientY;\r\n            }\r\n            else {\r\n                this.dx = page.x - interaction.prevEvent.pageX;\r\n                this.dy = page.y - interaction.prevEvent.pageY;\r\n            }\r\n        }\r\n        if (interaction.prevEvent && interaction.prevEvent.detail === 'inertia'\r\n            && !inertiaStatus.active\r\n            && options[action].inertia && options[action].inertia.zeroResumeDelta) {\r\n\r\n            inertiaStatus.resumeDx += this.dx;\r\n            inertiaStatus.resumeDy += this.dy;\r\n\r\n            this.dx = this.dy = 0;\r\n        }\r\n\r\n        if (action === 'resize' && interaction.resizeAxes) {\r\n            if (options.resize.square) {\r\n                if (interaction.resizeAxes === 'y') {\r\n                    this.dx = this.dy;\r\n                }\r\n                else {\r\n                    this.dy = this.dx;\r\n                }\r\n                this.axes = 'xy';\r\n            }\r\n            else {\r\n                this.axes = interaction.resizeAxes;\r\n\r\n                if (interaction.resizeAxes === 'x') {\r\n                    this.dy = 0;\r\n                }\r\n                else if (interaction.resizeAxes === 'y') {\r\n                    this.dx = 0;\r\n                }\r\n            }\r\n        }\r\n        else if (action === 'gesture') {\r\n            this.touches = [pointers[0], pointers[1]];\r\n\r\n            if (starting) {\r\n                this.distance = touchDistance(pointers, deltaSource);\r\n                this.box      = touchBBox(pointers);\r\n                this.scale    = 1;\r\n                this.ds       = 0;\r\n                this.angle    = touchAngle(pointers, undefined, deltaSource);\r\n                this.da       = 0;\r\n            }\r\n            else if (ending || event instanceof InteractEvent) {\r\n                this.distance = interaction.prevEvent.distance;\r\n                this.box      = interaction.prevEvent.box;\r\n                this.scale    = interaction.prevEvent.scale;\r\n                this.ds       = this.scale - 1;\r\n                this.angle    = interaction.prevEvent.angle;\r\n                this.da       = this.angle - interaction.gesture.startAngle;\r\n            }\r\n            else {\r\n                this.distance = touchDistance(pointers, deltaSource);\r\n                this.box      = touchBBox(pointers);\r\n                this.scale    = this.distance / interaction.gesture.startDistance;\r\n                this.angle    = touchAngle(pointers, interaction.gesture.prevAngle, deltaSource);\r\n\r\n                this.ds = this.scale - interaction.gesture.prevScale;\r\n                this.da = this.angle - interaction.gesture.prevAngle;\r\n            }\r\n        }\r\n\r\n        if (starting) {\r\n            this.timeStamp = interaction.downTimes[0];\r\n            this.dt        = 0;\r\n            this.duration  = 0;\r\n            this.speed     = 0;\r\n            this.velocityX = 0;\r\n            this.velocityY = 0;\r\n        }\r\n        else if (phase === 'inertiastart') {\r\n            this.timeStamp = interaction.prevEvent.timeStamp;\r\n            this.dt        = interaction.prevEvent.dt;\r\n            this.duration  = interaction.prevEvent.duration;\r\n            this.speed     = interaction.prevEvent.speed;\r\n            this.velocityX = interaction.prevEvent.velocityX;\r\n            this.velocityY = interaction.prevEvent.velocityY;\r\n        }\r\n        else {\r\n            this.timeStamp = new Date().getTime();\r\n            this.dt        = this.timeStamp - interaction.prevEvent.timeStamp;\r\n            this.duration  = this.timeStamp - interaction.downTimes[0];\r\n\r\n            if (event instanceof InteractEvent) {\r\n                var dx = this[sourceX] - interaction.prevEvent[sourceX],\r\n                    dy = this[sourceY] - interaction.prevEvent[sourceY],\r\n                    dt = this.dt / 1000;\r\n\r\n                this.speed = hypot(dx, dy) / dt;\r\n                this.velocityX = dx / dt;\r\n                this.velocityY = dy / dt;\r\n            }\r\n            // if normal move or end event, use previous user event coords\r\n            else {\r\n                // speed and velocity in pixels per second\r\n                this.speed = interaction.pointerDelta[deltaSource].speed;\r\n                this.velocityX = interaction.pointerDelta[deltaSource].vx;\r\n                this.velocityY = interaction.pointerDelta[deltaSource].vy;\r\n            }\r\n        }\r\n\r\n        if ((ending || phase === 'inertiastart')\r\n            && interaction.prevEvent.speed > 600 && this.timeStamp - interaction.prevEvent.timeStamp < 150) {\r\n\r\n            var angle = 180 * Math.atan2(interaction.prevEvent.velocityY, interaction.prevEvent.velocityX) / Math.PI,\r\n                overlap = 22.5;\r\n\r\n            if (angle < 0) {\r\n                angle += 360;\r\n            }\r\n\r\n            var left = 135 - overlap <= angle && angle < 225 + overlap,\r\n                up   = 225 - overlap <= angle && angle < 315 + overlap,\r\n\r\n                right = !left && (315 - overlap <= angle || angle <  45 + overlap),\r\n                down  = !up   &&   45 - overlap <= angle && angle < 135 + overlap;\r\n\r\n            this.swipe = {\r\n                up   : up,\r\n                down : down,\r\n                left : left,\r\n                right: right,\r\n                angle: angle,\r\n                speed: interaction.prevEvent.speed,\r\n                velocity: {\r\n                    x: interaction.prevEvent.velocityX,\r\n                    y: interaction.prevEvent.velocityY\r\n                }\r\n            };\r\n        }\r\n    }\r\n\r\n    InteractEvent.prototype = {\r\n        preventDefault: blank,\r\n        stopImmediatePropagation: function () {\r\n            this.immediatePropagationStopped = this.propagationStopped = true;\r\n        },\r\n        stopPropagation: function () {\r\n            this.propagationStopped = true;\r\n        }\r\n    };\r\n\r\n    function preventOriginalDefault () {\r\n        this.originalEvent.preventDefault();\r\n    }\r\n\r\n    function getActionCursor (action) {\r\n        var cursor = '';\r\n\r\n        if (action.name === 'drag') {\r\n            cursor =  actionCursors.drag;\r\n        }\r\n        if (action.name === 'resize') {\r\n            if (action.axis) {\r\n                cursor =  actionCursors[action.name + action.axis];\r\n            }\r\n            else if (action.edges) {\r\n                var cursorKey = 'resize',\r\n                    edgeNames = ['top', 'bottom', 'left', 'right'];\r\n\r\n                for (var i = 0; i < 4; i++) {\r\n                    if (action.edges[edgeNames[i]]) {\r\n                        cursorKey += edgeNames[i];\r\n                    }\r\n                }\r\n\r\n                cursor = actionCursors[cursorKey];\r\n            }\r\n        }\r\n\r\n        return cursor;\r\n    }\r\n\r\n    function checkResizeEdge (name, value, page, element, interactableElement, rect, margin) {\r\n        // false, '', undefined, null\r\n        if (!value) { return false; }\r\n\r\n        // true value, use pointer coords and element rect\r\n        if (value === true) {\r\n            // if dimensions are negative, \"switch\" edges\r\n            var width = isNumber(rect.width)? rect.width : rect.right - rect.left,\r\n                height = isNumber(rect.height)? rect.height : rect.bottom - rect.top;\r\n\r\n            if (width < 0) {\r\n                if      (name === 'left' ) { name = 'right'; }\r\n                else if (name === 'right') { name = 'left' ; }\r\n            }\r\n            if (height < 0) {\r\n                if      (name === 'top'   ) { name = 'bottom'; }\r\n                else if (name === 'bottom') { name = 'top'   ; }\r\n            }\r\n\r\n            if (name === 'left'  ) { return page.x < ((width  >= 0? rect.left: rect.right ) + margin); }\r\n            if (name === 'top'   ) { return page.y < ((height >= 0? rect.top : rect.bottom) + margin); }\r\n\r\n            if (name === 'right' ) { return page.x > ((width  >= 0? rect.right : rect.left) - margin); }\r\n            if (name === 'bottom') { return page.y > ((height >= 0? rect.bottom: rect.top ) - margin); }\r\n        }\r\n\r\n        // the remaining checks require an element\r\n        if (!isElement(element)) { return false; }\r\n\r\n        return isElement(value)\r\n                    // the value is an element to use as a resize handle\r\n                    ? value === element\r\n                    // otherwise check if element matches value as selector\r\n                    : matchesUpTo(element, value, interactableElement);\r\n    }\r\n\r\n    function defaultActionChecker (pointer, interaction, element) {\r\n        var rect = this.getRect(element),\r\n            shouldResize = false,\r\n            action = null,\r\n            resizeAxes = null,\r\n            resizeEdges,\r\n            page = extend({}, interaction.curCoords.page),\r\n            options = this.options;\r\n\r\n        if (!rect) { return null; }\r\n\r\n        if (actionIsEnabled.resize && options.resize.enabled) {\r\n            var resizeOptions = options.resize;\r\n\r\n            resizeEdges = {\r\n                left: false, right: false, top: false, bottom: false\r\n            };\r\n\r\n            // if using resize.edges\r\n            if (isObject(resizeOptions.edges)) {\r\n                for (var edge in resizeEdges) {\r\n                    resizeEdges[edge] = checkResizeEdge(edge,\r\n                                                        resizeOptions.edges[edge],\r\n                                                        page,\r\n                                                        interaction._eventTarget,\r\n                                                        element,\r\n                                                        rect,\r\n                                                        resizeOptions.margin || margin);\r\n                }\r\n\r\n                resizeEdges.left = resizeEdges.left && !resizeEdges.right;\r\n                resizeEdges.top  = resizeEdges.top  && !resizeEdges.bottom;\r\n\r\n                shouldResize = resizeEdges.left || resizeEdges.right || resizeEdges.top || resizeEdges.bottom;\r\n            }\r\n            else {\r\n                var right  = options.resize.axis !== 'y' && page.x > (rect.right  - margin),\r\n                    bottom = options.resize.axis !== 'x' && page.y > (rect.bottom - margin);\r\n\r\n                shouldResize = right || bottom;\r\n                resizeAxes = (right? 'x' : '') + (bottom? 'y' : '');\r\n            }\r\n        }\r\n\r\n        action = shouldResize\r\n            ? 'resize'\r\n            : actionIsEnabled.drag && options.drag.enabled\r\n                ? 'drag'\r\n                : null;\r\n\r\n        if (actionIsEnabled.gesture\r\n            && interaction.pointerIds.length >=2\r\n            && !(interaction.dragging || interaction.resizing)) {\r\n            action = 'gesture';\r\n        }\r\n\r\n        if (action) {\r\n            return {\r\n                name: action,\r\n                axis: resizeAxes,\r\n                edges: resizeEdges\r\n            };\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    // Check if action is enabled globally and the current target supports it\r\n    // If so, return the validated action. Otherwise, return null\r\n    function validateAction (action, interactable) {\r\n        if (!isObject(action)) { return null; }\r\n\r\n        var actionName = action.name,\r\n            options = interactable.options;\r\n\r\n        if ((  (actionName  === 'resize'   && options.resize.enabled )\r\n            || (actionName      === 'drag'     && options.drag.enabled  )\r\n            || (actionName      === 'gesture'  && options.gesture.enabled))\r\n            && actionIsEnabled[actionName]) {\r\n\r\n            if (actionName === 'resize' || actionName === 'resizeyx') {\r\n                actionName = 'resizexy';\r\n            }\r\n\r\n            return action;\r\n        }\r\n        return null;\r\n    }\r\n\r\n    var listeners = {},\r\n        interactionListeners = [\r\n            'dragStart', 'dragMove', 'resizeStart', 'resizeMove', 'gestureStart', 'gestureMove',\r\n            'pointerOver', 'pointerOut', 'pointerHover', 'selectorDown',\r\n            'pointerDown', 'pointerMove', 'pointerUp', 'pointerCancel', 'pointerEnd',\r\n            'addPointer', 'removePointer', 'recordPointer', 'autoScrollMove'\r\n        ];\r\n\r\n    for (var i = 0, len = interactionListeners.length; i < len; i++) {\r\n        var name = interactionListeners[i];\r\n\r\n        listeners[name] = doOnInteractions(name);\r\n    }\r\n\r\n    // bound to the interactable context when a DOM event\r\n    // listener is added to a selector interactable\r\n    function delegateListener (event, useCapture) {\r\n        var fakeEvent = {},\r\n            delegated = delegatedEvents[event.type],\r\n            eventTarget = getActualElement(event.path\r\n                                           ? event.path[0]\r\n                                           : event.target),\r\n            element = eventTarget;\r\n\r\n        useCapture = useCapture? true: false;\r\n\r\n        // duplicate the event so that currentTarget can be changed\r\n        for (var prop in event) {\r\n            fakeEvent[prop] = event[prop];\r\n        }\r\n\r\n        fakeEvent.originalEvent = event;\r\n        fakeEvent.preventDefault = preventOriginalDefault;\r\n\r\n        // climb up document tree looking for selector matches\r\n        while (isElement(element)) {\r\n            for (var i = 0; i < delegated.selectors.length; i++) {\r\n                var selector = delegated.selectors[i],\r\n                    context = delegated.contexts[i];\r\n\r\n                if (matchesSelector(element, selector)\r\n                    && nodeContains(context, eventTarget)\r\n                    && nodeContains(context, element)) {\r\n\r\n                    var listeners = delegated.listeners[i];\r\n\r\n                    fakeEvent.currentTarget = element;\r\n\r\n                    for (var j = 0; j < listeners.length; j++) {\r\n                        if (listeners[j][1] === useCapture) {\r\n                            listeners[j][0](fakeEvent);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n            element = parentElement(element);\r\n        }\r\n    }\r\n\r\n    function delegateUseCapture (event) {\r\n        return delegateListener.call(this, event, true);\r\n    }\r\n\r\n    interactables.indexOfElement = function indexOfElement (element, context) {\r\n        context = context || document;\r\n\r\n        for (var i = 0; i < this.length; i++) {\r\n            var interactable = this[i];\r\n\r\n            if ((interactable.selector === element\r\n                && (interactable._context === context))\r\n                || (!interactable.selector && interactable._element === element)) {\r\n\r\n                return i;\r\n            }\r\n        }\r\n        return -1;\r\n    };\r\n\r\n    interactables.get = function interactableGet (element, options) {\r\n        return this[this.indexOfElement(element, options && options.context)];\r\n    };\r\n\r\n    interactables.forEachSelector = function (callback) {\r\n        for (var i = 0; i < this.length; i++) {\r\n            var interactable = this[i];\r\n\r\n            if (!interactable.selector) {\r\n                continue;\r\n            }\r\n\r\n            var ret = callback(interactable, interactable.selector, interactable._context, i, this);\r\n\r\n            if (ret !== undefined) {\r\n                return ret;\r\n            }\r\n        }\r\n    };\r\n\r\n    /*\\\r\n     * interact\r\n     [ method ]\r\n     *\r\n     * The methods of this variable can be used to set elements as\r\n     * interactables and also to change various default settings.\r\n     *\r\n     * Calling it as a function and passing an element or a valid CSS selector\r\n     * string returns an Interactable object which has various methods to\r\n     * configure it.\r\n     *\r\n     - element (Element | string) The HTML or SVG Element to interact with or CSS selector\r\n     = (object) An @Interactable\r\n     *\r\n     > Usage\r\n     | interact(document.getElementById('draggable')).draggable(true);\r\n     |\r\n     | var rectables = interact('rect');\r\n     | rectables\r\n     |     .gesturable(true)\r\n     |     .on('gesturemove', function (event) {\r\n     |         // something cool...\r\n     |     })\r\n     |     .autoScroll(true);\r\n    \\*/\r\n    function interact (element, options) {\r\n        return interactables.get(element, options) || new Interactable(element, options);\r\n    }\r\n\r\n    /*\\\r\n     * Interactable\r\n     [ property ]\r\n     **\r\n     * Object type returned by @interact\r\n    \\*/\r\n    function Interactable (element, options) {\r\n        this._element = element;\r\n        this._iEvents = this._iEvents || {};\r\n\r\n        var _window;\r\n\r\n        if (trySelector(element)) {\r\n            this.selector = element;\r\n\r\n            var context = options && options.context;\r\n\r\n            _window = context? getWindow(context) : window;\r\n\r\n            if (context && (_window.Node\r\n                    ? context instanceof _window.Node\r\n                    : (isElement(context) || context === _window.document))) {\r\n\r\n                this._context = context;\r\n            }\r\n        }\r\n        else {\r\n            _window = getWindow(element);\r\n\r\n            if (isElement(element, _window)) {\r\n\r\n                if (PointerEvent) {\r\n                    events.add(this._element, pEventTypes.down, listeners.pointerDown );\r\n                    events.add(this._element, pEventTypes.move, listeners.pointerHover);\r\n                }\r\n                else {\r\n                    events.add(this._element, 'mousedown' , listeners.pointerDown );\r\n                    events.add(this._element, 'mousemove' , listeners.pointerHover);\r\n                    events.add(this._element, 'touchstart', listeners.pointerDown );\r\n                    events.add(this._element, 'touchmove' , listeners.pointerHover);\r\n                }\r\n            }\r\n        }\r\n\r\n        this._doc = _window.document;\r\n\r\n        if (!contains(documents, this._doc)) {\r\n            listenToDocument(this._doc);\r\n        }\r\n\r\n        interactables.push(this);\r\n\r\n        this.set(options);\r\n    }\r\n\r\n    Interactable.prototype = {\r\n        setOnEvents: function (action, phases) {\r\n            if (action === 'drop') {\r\n                if (isFunction(phases.ondrop)          ) { this.ondrop           = phases.ondrop          ; }\r\n                if (isFunction(phases.ondropactivate)  ) { this.ondropactivate   = phases.ondropactivate  ; }\r\n                if (isFunction(phases.ondropdeactivate)) { this.ondropdeactivate = phases.ondropdeactivate; }\r\n                if (isFunction(phases.ondragenter)     ) { this.ondragenter      = phases.ondragenter     ; }\r\n                if (isFunction(phases.ondragleave)     ) { this.ondragleave      = phases.ondragleave     ; }\r\n                if (isFunction(phases.ondropmove)      ) { this.ondropmove       = phases.ondropmove      ; }\r\n            }\r\n            else {\r\n                action = 'on' + action;\r\n\r\n                if (isFunction(phases.onstart)       ) { this[action + 'start'         ] = phases.onstart         ; }\r\n                if (isFunction(phases.onmove)        ) { this[action + 'move'          ] = phases.onmove          ; }\r\n                if (isFunction(phases.onend)         ) { this[action + 'end'           ] = phases.onend           ; }\r\n                if (isFunction(phases.oninertiastart)) { this[action + 'inertiastart'  ] = phases.oninertiastart  ; }\r\n            }\r\n\r\n            return this;\r\n        },\r\n\r\n        /*\\\r\n         * Interactable.draggable\r\n         [ method ]\r\n         *\r\n         * Gets or sets whether drag actions can be performed on the\r\n         * Interactable\r\n         *\r\n         = (boolean) Indicates if this can be the target of drag events\r\n         | var isDraggable = interact('ul li').draggable();\r\n         * or\r\n         - options (boolean | object) #optional true/false or An object with event listeners to be fired on drag events (object makes the Interactable draggable)\r\n         = (object) This Interactable\r\n         | interact(element).draggable({\r\n         |     onstart: function (event) {},\r\n         |     onmove : function (event) {},\r\n         |     onend  : function (event) {},\r\n         |\r\n         |     // the axis in which the first movement must be\r\n         |     // for the drag sequence to start\r\n         |     // 'xy' by default - any direction\r\n         |     axis: 'x' || 'y' || 'xy',\r\n         |\r\n         |     // max number of drags that can happen concurrently\r\n         |     // with elements of this Interactable. Infinity by default\r\n         |     max: Infinity,\r\n         |\r\n         |     // max number of drags that can target the same element+Interactable\r\n         |     // 1 by default\r\n         |     maxPerElement: 2\r\n         | });\r\n        \\*/\r\n        draggable: function (options) {\r\n            if (isObject(options)) {\r\n                this.options.drag.enabled = options.enabled === false? false: true;\r\n                this.setPerAction('drag', options);\r\n                this.setOnEvents('drag', options);\r\n\r\n                if (/^x$|^y$|^xy$/.test(options.axis)) {\r\n                    this.options.drag.axis = options.axis;\r\n                }\r\n                else if (options.axis === null) {\r\n                    delete this.options.drag.axis;\r\n                }\r\n\r\n                return this;\r\n            }\r\n\r\n            if (isBool(options)) {\r\n                this.options.drag.enabled = options;\r\n\r\n                return this;\r\n            }\r\n\r\n            return this.options.drag;\r\n        },\r\n\r\n        setPerAction: function (action, options) {\r\n            // for all the default per-action options\r\n            for (var option in options) {\r\n                // if this option exists for this action\r\n                if (option in defaultOptions[action]) {\r\n                    // if the option in the options arg is an object value\r\n                    if (isObject(options[option])) {\r\n                        // duplicate the object\r\n                        this.options[action][option] = extend(this.options[action][option] || {}, options[option]);\r\n\r\n                        if (isObject(defaultOptions.perAction[option]) && 'enabled' in defaultOptions.perAction[option]) {\r\n                            this.options[action][option].enabled = options[option].enabled === false? false : true;\r\n                        }\r\n                    }\r\n                    else if (isBool(options[option]) && isObject(defaultOptions.perAction[option])) {\r\n                        this.options[action][option].enabled = options[option];\r\n                    }\r\n                    else if (options[option] !== undefined) {\r\n                        // or if it's not undefined, do a plain assignment\r\n                        this.options[action][option] = options[option];\r\n                    }\r\n                }\r\n            }\r\n        },\r\n\r\n        /*\\\r\n         * Interactable.dropzone\r\n         [ method ]\r\n         *\r\n         * Returns or sets whether elements can be dropped onto this\r\n         * Interactable to trigger drop events\r\n         *\r\n         * Dropzones can receive the following events:\r\n         *  - `dropactivate` and `dropdeactivate` when an acceptable drag starts and ends\r\n         *  - `dragenter` and `dragleave` when a draggable enters and leaves the dropzone\r\n         *  - `dragmove` when a draggable that has entered the dropzone is moved\r\n         *  - `drop` when a draggable is dropped into this dropzone\r\n         *\r\n         *  Use the `accept` option to allow only elements that match the given CSS selector or element.\r\n         *\r\n         *  Use the `overlap` option to set how drops are checked for. The allowed values are:\r\n         *   - `'pointer'`, the pointer must be over the dropzone (default)\r\n         *   - `'center'`, the draggable element's center must be over the dropzone\r\n         *   - a number from 0-1 which is the `(intersection area) / (draggable area)`.\r\n         *       e.g. `0.5` for drop to happen when half of the area of the\r\n         *       draggable is over the dropzone\r\n         *\r\n         - options (boolean | object | null) #optional The new value to be set.\r\n         | interact('.drop').dropzone({\r\n         |   accept: '.can-drop' || document.getElementById('single-drop'),\r\n         |   overlap: 'pointer' || 'center' || zeroToOne\r\n         | }\r\n         = (boolean | object) The current setting or this Interactable\r\n        \\*/\r\n        dropzone: function (options) {\r\n            if (isObject(options)) {\r\n                this.options.drop.enabled = options.enabled === false? false: true;\r\n                this.setOnEvents('drop', options);\r\n\r\n                if (/^(pointer|center)$/.test(options.overlap)) {\r\n                    this.options.drop.overlap = options.overlap;\r\n                }\r\n                else if (isNumber(options.overlap)) {\r\n                    this.options.drop.overlap = Math.max(Math.min(1, options.overlap), 0);\r\n                }\r\n                if ('accept' in options) {\r\n                  this.options.drop.accept = options.accept;\r\n                }\r\n                if ('checker' in options) {\r\n                  this.options.drop.checker = options.checker;\r\n                }\r\n\r\n                return this;\r\n            }\r\n\r\n            if (isBool(options)) {\r\n                this.options.drop.enabled = options;\r\n\r\n                return this;\r\n            }\r\n\r\n            return this.options.drop;\r\n        },\r\n\r\n        dropCheck: function (dragEvent, event, draggable, draggableElement, dropElement, rect) {\r\n            var dropped = false;\r\n\r\n            // if the dropzone has no rect (eg. display: none)\r\n            // call the custom dropChecker or just return false\r\n            if (!(rect = rect || this.getRect(dropElement))) {\r\n                return (this.options.drop.checker\r\n                    ? this.options.drop.checker(dragEvent, event, dropped, this, dropElement, draggable, draggableElement)\r\n                    : false);\r\n            }\r\n\r\n            var dropOverlap = this.options.drop.overlap;\r\n\r\n            if (dropOverlap === 'pointer') {\r\n                var page = getPageXY(dragEvent),\r\n                    origin = getOriginXY(draggable, draggableElement),\r\n                    horizontal,\r\n                    vertical;\r\n\r\n                page.x += origin.x;\r\n                page.y += origin.y;\r\n\r\n                horizontal = (page.x > rect.left) && (page.x < rect.right);\r\n                vertical   = (page.y > rect.top ) && (page.y < rect.bottom);\r\n\r\n                dropped = horizontal && vertical;\r\n            }\r\n\r\n            var dragRect = draggable.getRect(draggableElement);\r\n\r\n            if (dropOverlap === 'center') {\r\n                var cx = dragRect.left + dragRect.width  / 2,\r\n                    cy = dragRect.top  + dragRect.height / 2;\r\n\r\n                dropped = cx >= rect.left && cx <= rect.right && cy >= rect.top && cy <= rect.bottom;\r\n            }\r\n\r\n            if (isNumber(dropOverlap)) {\r\n                var overlapArea  = (Math.max(0, Math.min(rect.right , dragRect.right ) - Math.max(rect.left, dragRect.left))\r\n                                  * Math.max(0, Math.min(rect.bottom, dragRect.bottom) - Math.max(rect.top , dragRect.top ))),\r\n                    overlapRatio = overlapArea / (dragRect.width * dragRect.height);\r\n\r\n                dropped = overlapRatio >= dropOverlap;\r\n            }\r\n\r\n            if (this.options.drop.checker) {\r\n                dropped = this.options.drop.checker(dragEvent, event, dropped, this, dropElement, draggable, draggableElement);\r\n            }\r\n\r\n            return dropped;\r\n        },\r\n\r\n        /*\\\r\n         * Interactable.dropChecker\r\n         [ method ]\r\n         *\r\n         * DEPRECATED. Use interactable.dropzone({ checker: function... }) instead.\r\n         *\r\n         * Gets or sets the function used to check if a dragged element is\r\n         * over this Interactable.\r\n         *\r\n         - checker (function) #optional The function that will be called when checking for a drop\r\n         = (Function | Interactable) The checker function or this Interactable\r\n         *\r\n         * The checker function takes the following arguments:\r\n         *\r\n         - dragEvent (InteractEvent) The related dragmove or dragend event\r\n         - event (TouchEvent | PointerEvent | MouseEvent) The user move/up/end Event related to the dragEvent\r\n         - dropped (boolean) The value from the default drop checker\r\n         - dropzone (Interactable) The dropzone interactable\r\n         - dropElement (Element) The dropzone element\r\n         - draggable (Interactable) The Interactable being dragged\r\n         - draggableElement (Element) The actual element that's being dragged\r\n         *\r\n         > Usage:\r\n         | interact(target)\r\n         | .dropChecker(function(dragEvent,         // related dragmove or dragend event\r\n         |                       event,             // TouchEvent/PointerEvent/MouseEvent\r\n         |                       dropped,           // bool result of the default checker\r\n         |                       dropzone,          // dropzone Interactable\r\n         |                       dropElement,       // dropzone elemnt\r\n         |                       draggable,         // draggable Interactable\r\n         |                       draggableElement) {// draggable element\r\n         |\r\n         |   return dropped && event.target.hasAttribute('allow-drop');\r\n         | }\r\n        \\*/\r\n        dropChecker: function (checker) {\r\n            if (isFunction(checker)) {\r\n                this.options.drop.checker = checker;\r\n\r\n                return this;\r\n            }\r\n            if (checker === null) {\r\n                delete this.options.getRect;\r\n\r\n                return this;\r\n            }\r\n\r\n            return this.options.drop.checker;\r\n        },\r\n\r\n        /*\\\r\n         * Interactable.accept\r\n         [ method ]\r\n         *\r\n         * Deprecated. add an `accept` property to the options object passed to\r\n         * @Interactable.dropzone instead.\r\n         *\r\n         * Gets or sets the Element or CSS selector match that this\r\n         * Interactable accepts if it is a dropzone.\r\n         *\r\n         - newValue (Element | string | null) #optional\r\n         * If it is an Element, then only that element can be dropped into this dropzone.\r\n         * If it is a string, the element being dragged must match it as a selector.\r\n         * If it is null, the accept options is cleared - it accepts any element.\r\n         *\r\n         = (string | Element | null | Interactable) The current accept option if given `undefined` or this Interactable\r\n        \\*/\r\n        accept: function (newValue) {\r\n            if (isElement(newValue)) {\r\n                this.options.drop.accept = newValue;\r\n\r\n                return this;\r\n            }\r\n\r\n            // test if it is a valid CSS selector\r\n            if (trySelector(newValue)) {\r\n                this.options.drop.accept = newValue;\r\n\r\n                return this;\r\n            }\r\n\r\n            if (newValue === null) {\r\n                delete this.options.drop.accept;\r\n\r\n                return this;\r\n            }\r\n\r\n            return this.options.drop.accept;\r\n        },\r\n\r\n        /*\\\r\n         * Interactable.resizable\r\n         [ method ]\r\n         *\r\n         * Gets or sets whether resize actions can be performed on the\r\n         * Interactable\r\n         *\r\n         = (boolean) Indicates if this can be the target of resize elements\r\n         | var isResizeable = interact('input[type=text]').resizable();\r\n         * or\r\n         - options (boolean | object) #optional true/false or An object with event listeners to be fired on resize events (object makes the Interactable resizable)\r\n         = (object) This Interactable\r\n         | interact(element).resizable({\r\n         |     onstart: function (event) {},\r\n         |     onmove : function (event) {},\r\n         |     onend  : function (event) {},\r\n         |\r\n         |     edges: {\r\n         |       top   : true,       // Use pointer coords to check for resize.\r\n         |       left  : false,      // Disable resizing from left edge.\r\n         |       bottom: '.resize-s',// Resize if pointer target matches selector\r\n         |       right : handleEl    // Resize if pointer target is the given Element\r\n         |     },\r\n         |\r\n         |     // Width and height can be adjusted independently. When `true`, width and\r\n         |     // height are adjusted at a 1:1 ratio.\r\n         |     square: false,\r\n         |\r\n         |     // Width and height can be adjusted independently. When `true`, width and\r\n         |     // height maintain the aspect ratio they had when resizing started.\r\n         |     preserveAspectRatio: false,\r\n         |\r\n         |     // a value of 'none' will limit the resize rect to a minimum of 0x0\r\n         |     // 'negate' will allow the rect to have negative width/height\r\n         |     // 'reposition' will keep the width/height positive by swapping\r\n         |     // the top and bottom edges and/or swapping the left and right edges\r\n         |     invert: 'none' || 'negate' || 'reposition'\r\n         |\r\n         |     // limit multiple resizes.\r\n         |     // See the explanation in the @Interactable.draggable example\r\n         |     max: Infinity,\r\n         |     maxPerElement: 1,\r\n         | });\r\n        \\*/\r\n        resizable: function (options) {\r\n            if (isObject(options)) {\r\n                this.options.resize.enabled = options.enabled === false? false: true;\r\n                this.setPerAction('resize', options);\r\n                this.setOnEvents('resize', options);\r\n\r\n                if (/^x$|^y$|^xy$/.test(options.axis)) {\r\n                    this.options.resize.axis = options.axis;\r\n                }\r\n                else if (options.axis === null) {\r\n                    this.options.resize.axis = defaultOptions.resize.axis;\r\n                }\r\n\r\n                if (isBool(options.preserveAspectRatio)) {\r\n                    this.options.resize.preserveAspectRatio = options.preserveAspectRatio;\r\n                }\r\n                else if (isBool(options.square)) {\r\n                    this.options.resize.square = options.square;\r\n                }\r\n\r\n                return this;\r\n            }\r\n            if (isBool(options)) {\r\n                this.options.resize.enabled = options;\r\n\r\n                return this;\r\n            }\r\n            return this.options.resize;\r\n        },\r\n\r\n        /*\\\r\n         * Interactable.squareResize\r\n         [ method ]\r\n         *\r\n         * Deprecated. Add a `square: true || false` property to @Interactable.resizable instead\r\n         *\r\n         * Gets or sets whether resizing is forced 1:1 aspect\r\n         *\r\n         = (boolean) Current setting\r\n         *\r\n         * or\r\n         *\r\n         - newValue (boolean) #optional\r\n         = (object) this Interactable\r\n        \\*/\r\n        squareResize: function (newValue) {\r\n            if (isBool(newValue)) {\r\n                this.options.resize.square = newValue;\r\n\r\n                return this;\r\n            }\r\n\r\n            if (newValue === null) {\r\n                delete this.options.resize.square;\r\n\r\n                return this;\r\n            }\r\n\r\n            return this.options.resize.square;\r\n        },\r\n\r\n        /*\\\r\n         * Interactable.gesturable\r\n         [ method ]\r\n         *\r\n         * Gets or sets whether multitouch gestures can be performed on the\r\n         * Interactable's element\r\n         *\r\n         = (boolean) Indicates if this can be the target of gesture events\r\n         | var isGestureable = interact(element).gesturable();\r\n         * or\r\n         - options (boolean | object) #optional true/false or An object with event listeners to be fired on gesture events (makes the Interactable gesturable)\r\n         = (object) this Interactable\r\n         | interact(element).gesturable({\r\n         |     onstart: function (event) {},\r\n         |     onmove : function (event) {},\r\n         |     onend  : function (event) {},\r\n         |\r\n         |     // limit multiple gestures.\r\n         |     // See the explanation in @Interactable.draggable example\r\n         |     max: Infinity,\r\n         |     maxPerElement: 1,\r\n         | });\r\n        \\*/\r\n        gesturable: function (options) {\r\n            if (isObject(options)) {\r\n                this.options.gesture.enabled = options.enabled === false? false: true;\r\n                this.setPerAction('gesture', options);\r\n                this.setOnEvents('gesture', options);\r\n\r\n                return this;\r\n            }\r\n\r\n            if (isBool(options)) {\r\n                this.options.gesture.enabled = options;\r\n\r\n                return this;\r\n            }\r\n\r\n            return this.options.gesture;\r\n        },\r\n\r\n        /*\\\r\n         * Interactable.autoScroll\r\n         [ method ]\r\n         **\r\n         * Deprecated. Add an `autoscroll` property to the options object\r\n         * passed to @Interactable.draggable or @Interactable.resizable instead.\r\n         *\r\n         * Returns or sets whether dragging and resizing near the edges of the\r\n         * window/container trigger autoScroll for this Interactable\r\n         *\r\n         = (object) Object with autoScroll properties\r\n         *\r\n         * or\r\n         *\r\n         - options (object | boolean) #optional\r\n         * options can be:\r\n         * - an object with margin, distance and interval properties,\r\n         * - true or false to enable or disable autoScroll or\r\n         = (Interactable) this Interactable\r\n        \\*/\r\n        autoScroll: function (options) {\r\n            if (isObject(options)) {\r\n                options = extend({ actions: ['drag', 'resize']}, options);\r\n            }\r\n            else if (isBool(options)) {\r\n                options = { actions: ['drag', 'resize'], enabled: options };\r\n            }\r\n\r\n            return this.setOptions('autoScroll', options);\r\n        },\r\n\r\n        /*\\\r\n         * Interactable.snap\r\n         [ method ]\r\n         **\r\n         * Deprecated. Add a `snap` property to the options object passed\r\n         * to @Interactable.draggable or @Interactable.resizable instead.\r\n         *\r\n         * Returns or sets if and how action coordinates are snapped. By\r\n         * default, snapping is relative to the pointer coordinates. You can\r\n         * change this by setting the\r\n         * [`elementOrigin`](https://github.com/taye/interact.js/pull/72).\r\n         **\r\n         = (boolean | object) `false` if snap is disabled; object with snap properties if snap is enabled\r\n         **\r\n         * or\r\n         **\r\n         - options (object | boolean | null) #optional\r\n         = (Interactable) this Interactable\r\n         > Usage\r\n         | interact(document.querySelector('#thing')).snap({\r\n         |     targets: [\r\n         |         // snap to this specific point\r\n         |         {\r\n         |             x: 100,\r\n         |             y: 100,\r\n         |             range: 25\r\n         |         },\r\n         |         // give this function the x and y page coords and snap to the object returned\r\n         |         function (x, y) {\r\n         |             return {\r\n         |                 x: x,\r\n         |                 y: (75 + 50 * Math.sin(x * 0.04)),\r\n         |                 range: 40\r\n         |             };\r\n         |         },\r\n         |         // create a function that snaps to a grid\r\n         |         interact.createSnapGrid({\r\n         |             x: 50,\r\n         |             y: 50,\r\n         |             range: 10,              // optional\r\n         |             offset: { x: 5, y: 10 } // optional\r\n         |         })\r\n         |     ],\r\n         |     // do not snap during normal movement.\r\n         |     // Instead, trigger only one snapped move event\r\n         |     // immediately before the end event.\r\n         |     endOnly: true,\r\n         |\r\n         |     relativePoints: [\r\n         |         { x: 0, y: 0 },  // snap relative to the top left of the element\r\n         |         { x: 1, y: 1 },  // and also to the bottom right\r\n         |     ],  \r\n         |\r\n         |     // offset the snap target coordinates\r\n         |     // can be an object with x/y or 'startCoords'\r\n         |     offset: { x: 50, y: 50 }\r\n         |   }\r\n         | });\r\n        \\*/\r\n        snap: function (options) {\r\n            var ret = this.setOptions('snap', options);\r\n\r\n            if (ret === this) { return this; }\r\n\r\n            return ret.drag;\r\n        },\r\n\r\n        setOptions: function (option, options) {\r\n            var actions = options && isArray(options.actions)\r\n                    ? options.actions\r\n                    : ['drag'];\r\n\r\n            var i;\r\n\r\n            if (isObject(options) || isBool(options)) {\r\n                for (i = 0; i < actions.length; i++) {\r\n                    var action = /resize/.test(actions[i])? 'resize' : actions[i];\r\n\r\n                    if (!isObject(this.options[action])) { continue; }\r\n\r\n                    var thisOption = this.options[action][option];\r\n\r\n                    if (isObject(options)) {\r\n                        extend(thisOption, options);\r\n                        thisOption.enabled = options.enabled === false? false: true;\r\n\r\n                        if (option === 'snap') {\r\n                            if (thisOption.mode === 'grid') {\r\n                                thisOption.targets = [\r\n                                    interact.createSnapGrid(extend({\r\n                                        offset: thisOption.gridOffset || { x: 0, y: 0 }\r\n                                    }, thisOption.grid || {}))\r\n                                ];\r\n                            }\r\n                            else if (thisOption.mode === 'anchor') {\r\n                                thisOption.targets = thisOption.anchors;\r\n                            }\r\n                            else if (thisOption.mode === 'path') {\r\n                                thisOption.targets = thisOption.paths;\r\n                            }\r\n\r\n                            if ('elementOrigin' in options) {\r\n                                thisOption.relativePoints = [options.elementOrigin];\r\n                            }\r\n                        }\r\n                    }\r\n                    else if (isBool(options)) {\r\n                        thisOption.enabled = options;\r\n                    }\r\n                }\r\n\r\n                return this;\r\n            }\r\n\r\n            var ret = {},\r\n                allActions = ['drag', 'resize', 'gesture'];\r\n\r\n            for (i = 0; i < allActions.length; i++) {\r\n                if (option in defaultOptions[allActions[i]]) {\r\n                    ret[allActions[i]] = this.options[allActions[i]][option];\r\n                }\r\n            }\r\n\r\n            return ret;\r\n        },\r\n\r\n\r\n        /*\\\r\n         * Interactable.inertia\r\n         [ method ]\r\n         **\r\n         * Deprecated. Add an `inertia` property to the options object passed\r\n         * to @Interactable.draggable or @Interactable.resizable instead.\r\n         *\r\n         * Returns or sets if and how events continue to run after the pointer is released\r\n         **\r\n         = (boolean | object) `false` if inertia is disabled; `object` with inertia properties if inertia is enabled\r\n         **\r\n         * or\r\n         **\r\n         - options (object | boolean | null) #optional\r\n         = (Interactable) this Interactable\r\n         > Usage\r\n         | // enable and use default settings\r\n         | interact(element).inertia(true);\r\n         |\r\n         | // enable and use custom settings\r\n         | interact(element).inertia({\r\n         |     // value greater than 0\r\n         |     // high values slow the object down more quickly\r\n         |     resistance     : 16,\r\n         |\r\n         |     // the minimum launch speed (pixels per second) that results in inertia start\r\n         |     minSpeed       : 200,\r\n         |\r\n         |     // inertia will stop when the object slows down to this speed\r\n         |     endSpeed       : 20,\r\n         |\r\n         |     // boolean; should actions be resumed when the pointer goes down during inertia\r\n         |     allowResume    : true,\r\n         |\r\n         |     // boolean; should the jump when resuming from inertia be ignored in event.dx/dy\r\n         |     zeroResumeDelta: false,\r\n         |\r\n         |     // if snap/restrict are set to be endOnly and inertia is enabled, releasing\r\n         |     // the pointer without triggering inertia will animate from the release\r\n         |     // point to the snaped/restricted point in the given amount of time (ms)\r\n         |     smoothEndDuration: 300,\r\n         |\r\n         |     // an array of action types that can have inertia (no gesture)\r\n         |     actions        : ['drag', 'resize']\r\n         | });\r\n         |\r\n         | // reset custom settings and use all defaults\r\n         | interact(element).inertia(null);\r\n        \\*/\r\n        inertia: function (options) {\r\n            var ret = this.setOptions('inertia', options);\r\n\r\n            if (ret === this) { return this; }\r\n\r\n            return ret.drag;\r\n        },\r\n\r\n        getAction: function (pointer, event, interaction, element) {\r\n            var action = this.defaultActionChecker(pointer, interaction, element);\r\n\r\n            if (this.options.actionChecker) {\r\n                return this.options.actionChecker(pointer, event, action, this, element, interaction);\r\n            }\r\n\r\n            return action;\r\n        },\r\n\r\n        defaultActionChecker: defaultActionChecker,\r\n\r\n        /*\\\r\n         * Interactable.actionChecker\r\n         [ method ]\r\n         *\r\n         * Gets or sets the function used to check action to be performed on\r\n         * pointerDown\r\n         *\r\n         - checker (function | null) #optional A function which takes a pointer event, defaultAction string, interactable, element and interaction as parameters and returns an object with name property 'drag' 'resize' or 'gesture' and optionally an `edges` object with boolean 'top', 'left', 'bottom' and right props.\r\n         = (Function | Interactable) The checker function or this Interactable\r\n         *\r\n         | interact('.resize-drag')\r\n         |   .resizable(true)\r\n         |   .draggable(true)\r\n         |   .actionChecker(function (pointer, event, action, interactable, element, interaction) {\r\n         |\r\n         |   if (interact.matchesSelector(event.target, '.drag-handle') {\r\n         |     // force drag with handle target\r\n         |     action.name = drag;\r\n         |   }\r\n         |   else {\r\n         |     // resize from the top and right edges\r\n         |     action.name  = 'resize';\r\n         |     action.edges = { top: true, right: true };\r\n         |   }\r\n         |\r\n         |   return action;\r\n         | });\r\n        \\*/\r\n        actionChecker: function (checker) {\r\n            if (isFunction(checker)) {\r\n                this.options.actionChecker = checker;\r\n\r\n                return this;\r\n            }\r\n\r\n            if (checker === null) {\r\n                delete this.options.actionChecker;\r\n\r\n                return this;\r\n            }\r\n\r\n            return this.options.actionChecker;\r\n        },\r\n\r\n        /*\\\r\n         * Interactable.getRect\r\n         [ method ]\r\n         *\r\n         * The default function to get an Interactables bounding rect. Can be\r\n         * overridden using @Interactable.rectChecker.\r\n         *\r\n         - element (Element) #optional The element to measure.\r\n         = (object) The object's bounding rectangle.\r\n         o {\r\n         o     top   : 0,\r\n         o     left  : 0,\r\n         o     bottom: 0,\r\n         o     right : 0,\r\n         o     width : 0,\r\n         o     height: 0\r\n         o }\r\n        \\*/\r\n        getRect: function rectCheck (element) {\r\n            element = element || this._element;\r\n\r\n            if (this.selector && !(isElement(element))) {\r\n                element = this._context.querySelector(this.selector);\r\n            }\r\n\r\n            return getElementRect(element);\r\n        },\r\n\r\n        /*\\\r\n         * Interactable.rectChecker\r\n         [ method ]\r\n         *\r\n         * Returns or sets the function used to calculate the interactable's\r\n         * element's rectangle\r\n         *\r\n         - checker (function) #optional A function which returns this Interactable's bounding rectangle. See @Interactable.getRect\r\n         = (function | object) The checker function or this Interactable\r\n        \\*/\r\n        rectChecker: function (checker) {\r\n            if (isFunction(checker)) {\r\n                this.getRect = checker;\r\n\r\n                return this;\r\n            }\r\n\r\n            if (checker === null) {\r\n                delete this.options.getRect;\r\n\r\n                return this;\r\n            }\r\n\r\n            return this.getRect;\r\n        },\r\n\r\n        /*\\\r\n         * Interactable.styleCursor\r\n         [ method ]\r\n         *\r\n         * Returns or sets whether the action that would be performed when the\r\n         * mouse on the element are checked on `mousemove` so that the cursor\r\n         * may be styled appropriately\r\n         *\r\n         - newValue (boolean) #optional\r\n         = (boolean | Interactable) The current setting or this Interactable\r\n        \\*/\r\n        styleCursor: function (newValue) {\r\n            if (isBool(newValue)) {\r\n                this.options.styleCursor = newValue;\r\n\r\n                return this;\r\n            }\r\n\r\n            if (newValue === null) {\r\n                delete this.options.styleCursor;\r\n\r\n                return this;\r\n            }\r\n\r\n            return this.options.styleCursor;\r\n        },\r\n\r\n        /*\\\r\n         * Interactable.preventDefault\r\n         [ method ]\r\n         *\r\n         * Returns or sets whether to prevent the browser's default behaviour\r\n         * in response to pointer events. Can be set to:\r\n         *  - `'always'` to always prevent\r\n         *  - `'never'` to never prevent\r\n         *  - `'auto'` to let interact.js try to determine what would be best\r\n         *\r\n         - newValue (string) #optional `true`, `false` or `'auto'`\r\n         = (string | Interactable) The current setting or this Interactable\r\n        \\*/\r\n        preventDefault: function (newValue) {\r\n            if (/^(always|never|auto)$/.test(newValue)) {\r\n                this.options.preventDefault = newValue;\r\n                return this;\r\n            }\r\n\r\n            if (isBool(newValue)) {\r\n                this.options.preventDefault = newValue? 'always' : 'never';\r\n                return this;\r\n            }\r\n\r\n            return this.options.preventDefault;\r\n        },\r\n\r\n        /*\\\r\n         * Interactable.origin\r\n         [ method ]\r\n         *\r\n         * Gets or sets the origin of the Interactable's element.  The x and y\r\n         * of the origin will be subtracted from action event coordinates.\r\n         *\r\n         - origin (object | string) #optional An object eg. { x: 0, y: 0 } or string 'parent', 'self' or any CSS selector\r\n         * OR\r\n         - origin (Element) #optional An HTML or SVG Element whose rect will be used\r\n         **\r\n         = (object) The current origin or this Interactable\r\n        \\*/\r\n        origin: function (newValue) {\r\n            if (trySelector(newValue)) {\r\n                this.options.origin = newValue;\r\n                return this;\r\n            }\r\n            else if (isObject(newValue)) {\r\n                this.options.origin = newValue;\r\n                return this;\r\n            }\r\n\r\n            return this.options.origin;\r\n        },\r\n\r\n        /*\\\r\n         * Interactable.deltaSource\r\n         [ method ]\r\n         *\r\n         * Returns or sets the mouse coordinate types used to calculate the\r\n         * movement of the pointer.\r\n         *\r\n         - newValue (string) #optional Use 'client' if you will be scrolling while interacting; Use 'page' if you want autoScroll to work\r\n         = (string | object) The current deltaSource or this Interactable\r\n        \\*/\r\n        deltaSource: function (newValue) {\r\n            if (newValue === 'page' || newValue === 'client') {\r\n                this.options.deltaSource = newValue;\r\n\r\n                return this;\r\n            }\r\n\r\n            return this.options.deltaSource;\r\n        },\r\n\r\n        /*\\\r\n         * Interactable.restrict\r\n         [ method ]\r\n         **\r\n         * Deprecated. Add a `restrict` property to the options object passed to\r\n         * @Interactable.draggable, @Interactable.resizable or @Interactable.gesturable instead.\r\n         *\r\n         * Returns or sets the rectangles within which actions on this\r\n         * interactable (after snap calculations) are restricted. By default,\r\n         * restricting is relative to the pointer coordinates. You can change\r\n         * this by setting the\r\n         * [`elementRect`](https://github.com/taye/interact.js/pull/72).\r\n         **\r\n         - options (object) #optional an object with keys drag, resize, and/or gesture whose values are rects, Elements, CSS selectors, or 'parent' or 'self'\r\n         = (object) The current restrictions object or this Interactable\r\n         **\r\n         | interact(element).restrict({\r\n         |     // the rect will be `interact.getElementRect(element.parentNode)`\r\n         |     drag: element.parentNode,\r\n         |\r\n         |     // x and y are relative to the the interactable's origin\r\n         |     resize: { x: 100, y: 100, width: 200, height: 200 }\r\n         | })\r\n         |\r\n         | interact('.draggable').restrict({\r\n         |     // the rect will be the selected element's parent\r\n         |     drag: 'parent',\r\n         |\r\n         |     // do not restrict during normal movement.\r\n         |     // Instead, trigger only one restricted move event\r\n         |     // immediately before the end event.\r\n         |     endOnly: true,\r\n         |\r\n         |     // https://github.com/taye/interact.js/pull/72#issue-41813493\r\n         |     elementRect: { top: 0, left: 0, bottom: 1, right: 1 }\r\n         | });\r\n        \\*/\r\n        restrict: function (options) {\r\n            if (!isObject(options)) {\r\n                return this.setOptions('restrict', options);\r\n            }\r\n\r\n            var actions = ['drag', 'resize', 'gesture'],\r\n                ret;\r\n\r\n            for (var i = 0; i < actions.length; i++) {\r\n                var action = actions[i];\r\n\r\n                if (action in options) {\r\n                    var perAction = extend({\r\n                            actions: [action],\r\n                            restriction: options[action]\r\n                        }, options);\r\n\r\n                    ret = this.setOptions('restrict', perAction);\r\n                }\r\n            }\r\n\r\n            return ret;\r\n        },\r\n\r\n        /*\\\r\n         * Interactable.context\r\n         [ method ]\r\n         *\r\n         * Gets the selector context Node of the Interactable. The default is `window.document`.\r\n         *\r\n         = (Node) The context Node of this Interactable\r\n         **\r\n        \\*/\r\n        context: function () {\r\n            return this._context;\r\n        },\r\n\r\n        _context: document,\r\n\r\n        /*\\\r\n         * Interactable.ignoreFrom\r\n         [ method ]\r\n         *\r\n         * If the target of the `mousedown`, `pointerdown` or `touchstart`\r\n         * event or any of it's parents match the given CSS selector or\r\n         * Element, no drag/resize/gesture is started.\r\n         *\r\n         - newValue (string | Element | null) #optional a CSS selector string, an Element or `null` to not ignore any elements\r\n         = (string | Element | object) The current ignoreFrom value or this Interactable\r\n         **\r\n         | interact(element, { ignoreFrom: document.getElementById('no-action') });\r\n         | // or\r\n         | interact(element).ignoreFrom('input, textarea, a');\r\n        \\*/\r\n        ignoreFrom: function (newValue) {\r\n            if (trySelector(newValue)) {            // CSS selector to match event.target\r\n                this.options.ignoreFrom = newValue;\r\n                return this;\r\n            }\r\n\r\n            if (isElement(newValue)) {              // specific element\r\n                this.options.ignoreFrom = newValue;\r\n                return this;\r\n            }\r\n\r\n            return this.options.ignoreFrom;\r\n        },\r\n\r\n        /*\\\r\n         * Interactable.allowFrom\r\n         [ method ]\r\n         *\r\n         * A drag/resize/gesture is started only If the target of the\r\n         * `mousedown`, `pointerdown` or `touchstart` event or any of it's\r\n         * parents match the given CSS selector or Element.\r\n         *\r\n         - newValue (string | Element | null) #optional a CSS selector string, an Element or `null` to allow from any element\r\n         = (string | Element | object) The current allowFrom value or this Interactable\r\n         **\r\n         | interact(element, { allowFrom: document.getElementById('drag-handle') });\r\n         | // or\r\n         | interact(element).allowFrom('.handle');\r\n        \\*/\r\n        allowFrom: function (newValue) {\r\n            if (trySelector(newValue)) {            // CSS selector to match event.target\r\n                this.options.allowFrom = newValue;\r\n                return this;\r\n            }\r\n\r\n            if (isElement(newValue)) {              // specific element\r\n                this.options.allowFrom = newValue;\r\n                return this;\r\n            }\r\n\r\n            return this.options.allowFrom;\r\n        },\r\n\r\n        /*\\\r\n         * Interactable.element\r\n         [ method ]\r\n         *\r\n         * If this is not a selector Interactable, it returns the element this\r\n         * interactable represents\r\n         *\r\n         = (Element) HTML / SVG Element\r\n        \\*/\r\n        element: function () {\r\n            return this._element;\r\n        },\r\n\r\n        /*\\\r\n         * Interactable.fire\r\n         [ method ]\r\n         *\r\n         * Calls listeners for the given InteractEvent type bound globally\r\n         * and directly to this Interactable\r\n         *\r\n         - iEvent (InteractEvent) The InteractEvent object to be fired on this Interactable\r\n         = (Interactable) this Interactable\r\n        \\*/\r\n        fire: function (iEvent) {\r\n            if (!(iEvent && iEvent.type) || !contains(eventTypes, iEvent.type)) {\r\n                return this;\r\n            }\r\n\r\n            var listeners,\r\n                i,\r\n                len,\r\n                onEvent = 'on' + iEvent.type,\r\n                funcName = '';\r\n\r\n            // Interactable#on() listeners\r\n            if (iEvent.type in this._iEvents) {\r\n                listeners = this._iEvents[iEvent.type];\r\n\r\n                for (i = 0, len = listeners.length; i < len && !iEvent.immediatePropagationStopped; i++) {\r\n                    funcName = listeners[i].name;\r\n                    listeners[i](iEvent);\r\n                }\r\n            }\r\n\r\n            // interactable.onevent listener\r\n            if (isFunction(this[onEvent])) {\r\n                funcName = this[onEvent].name;\r\n                this[onEvent](iEvent);\r\n            }\r\n\r\n            // interact.on() listeners\r\n            if (iEvent.type in globalEvents && (listeners = globalEvents[iEvent.type]))  {\r\n\r\n                for (i = 0, len = listeners.length; i < len && !iEvent.immediatePropagationStopped; i++) {\r\n                    funcName = listeners[i].name;\r\n                    listeners[i](iEvent);\r\n                }\r\n            }\r\n\r\n            return this;\r\n        },\r\n\r\n        /*\\\r\n         * Interactable.on\r\n         [ method ]\r\n         *\r\n         * Binds a listener for an InteractEvent or DOM event.\r\n         *\r\n         - eventType  (string | array | object) The types of events to listen for\r\n         - listener   (function) The function to be called on the given event(s)\r\n         - useCapture (boolean) #optional useCapture flag for addEventListener\r\n         = (object) This Interactable\r\n        \\*/\r\n        on: function (eventType, listener, useCapture) {\r\n            var i;\r\n\r\n            if (isString(eventType) && eventType.search(' ') !== -1) {\r\n                eventType = eventType.trim().split(/ +/);\r\n            }\r\n\r\n            if (isArray(eventType)) {\r\n                for (i = 0; i < eventType.length; i++) {\r\n                    this.on(eventType[i], listener, useCapture);\r\n                }\r\n\r\n                return this;\r\n            }\r\n\r\n            if (isObject(eventType)) {\r\n                for (var prop in eventType) {\r\n                    this.on(prop, eventType[prop], listener);\r\n                }\r\n\r\n                return this;\r\n            }\r\n\r\n            if (eventType === 'wheel') {\r\n                eventType = wheelEvent;\r\n            }\r\n\r\n            // convert to boolean\r\n            useCapture = useCapture? true: false;\r\n\r\n            if (contains(eventTypes, eventType)) {\r\n                // if this type of event was never bound to this Interactable\r\n                if (!(eventType in this._iEvents)) {\r\n                    this._iEvents[eventType] = [listener];\r\n                }\r\n                else {\r\n                    this._iEvents[eventType].push(listener);\r\n                }\r\n            }\r\n            // delegated event for selector\r\n            else if (this.selector) {\r\n                if (!delegatedEvents[eventType]) {\r\n                    delegatedEvents[eventType] = {\r\n                        selectors: [],\r\n                        contexts : [],\r\n                        listeners: []\r\n                    };\r\n\r\n                    // add delegate listener functions\r\n                    for (i = 0; i < documents.length; i++) {\r\n                        events.add(documents[i], eventType, delegateListener);\r\n                        events.add(documents[i], eventType, delegateUseCapture, true);\r\n                    }\r\n                }\r\n\r\n                var delegated = delegatedEvents[eventType],\r\n                    index;\r\n\r\n                for (index = delegated.selectors.length - 1; index >= 0; index--) {\r\n                    if (delegated.selectors[index] === this.selector\r\n                        && delegated.contexts[index] === this._context) {\r\n                        break;\r\n                    }\r\n                }\r\n\r\n                if (index === -1) {\r\n                    index = delegated.selectors.length;\r\n\r\n                    delegated.selectors.push(this.selector);\r\n                    delegated.contexts .push(this._context);\r\n                    delegated.listeners.push([]);\r\n                }\r\n\r\n                // keep listener and useCapture flag\r\n                delegated.listeners[index].push([listener, useCapture]);\r\n            }\r\n            else {\r\n                events.add(this._element, eventType, listener, useCapture);\r\n            }\r\n\r\n            return this;\r\n        },\r\n\r\n        /*\\\r\n         * Interactable.off\r\n         [ method ]\r\n         *\r\n         * Removes an InteractEvent or DOM event listener\r\n         *\r\n         - eventType  (string | array | object) The types of events that were listened for\r\n         - listener   (function) The listener function to be removed\r\n         - useCapture (boolean) #optional useCapture flag for removeEventListener\r\n         = (object) This Interactable\r\n        \\*/\r\n        off: function (eventType, listener, useCapture) {\r\n            var i;\r\n\r\n            if (isString(eventType) && eventType.search(' ') !== -1) {\r\n                eventType = eventType.trim().split(/ +/);\r\n            }\r\n\r\n            if (isArray(eventType)) {\r\n                for (i = 0; i < eventType.length; i++) {\r\n                    this.off(eventType[i], listener, useCapture);\r\n                }\r\n\r\n                return this;\r\n            }\r\n\r\n            if (isObject(eventType)) {\r\n                for (var prop in eventType) {\r\n                    this.off(prop, eventType[prop], listener);\r\n                }\r\n\r\n                return this;\r\n            }\r\n\r\n            var eventList,\r\n                index = -1;\r\n\r\n            // convert to boolean\r\n            useCapture = useCapture? true: false;\r\n\r\n            if (eventType === 'wheel') {\r\n                eventType = wheelEvent;\r\n            }\r\n\r\n            // if it is an action event type\r\n            if (contains(eventTypes, eventType)) {\r\n                eventList = this._iEvents[eventType];\r\n\r\n                if (eventList && (index = indexOf(eventList, listener)) !== -1) {\r\n                    this._iEvents[eventType].splice(index, 1);\r\n                }\r\n            }\r\n            // delegated event\r\n            else if (this.selector) {\r\n                var delegated = delegatedEvents[eventType],\r\n                    matchFound = false;\r\n\r\n                if (!delegated) { return this; }\r\n\r\n                // count from last index of delegated to 0\r\n                for (index = delegated.selectors.length - 1; index >= 0; index--) {\r\n                    // look for matching selector and context Node\r\n                    if (delegated.selectors[index] === this.selector\r\n                        && delegated.contexts[index] === this._context) {\r\n\r\n                        var listeners = delegated.listeners[index];\r\n\r\n                        // each item of the listeners array is an array: [function, useCaptureFlag]\r\n                        for (i = listeners.length - 1; i >= 0; i--) {\r\n                            var fn = listeners[i][0],\r\n                                useCap = listeners[i][1];\r\n\r\n                            // check if the listener functions and useCapture flags match\r\n                            if (fn === listener && useCap === useCapture) {\r\n                                // remove the listener from the array of listeners\r\n                                listeners.splice(i, 1);\r\n\r\n                                // if all listeners for this interactable have been removed\r\n                                // remove the interactable from the delegated arrays\r\n                                if (!listeners.length) {\r\n                                    delegated.selectors.splice(index, 1);\r\n                                    delegated.contexts .splice(index, 1);\r\n                                    delegated.listeners.splice(index, 1);\r\n\r\n                                    // remove delegate function from context\r\n                                    events.remove(this._context, eventType, delegateListener);\r\n                                    events.remove(this._context, eventType, delegateUseCapture, true);\r\n\r\n                                    // remove the arrays if they are empty\r\n                                    if (!delegated.selectors.length) {\r\n                                        delegatedEvents[eventType] = null;\r\n                                    }\r\n                                }\r\n\r\n                                // only remove one listener\r\n                                matchFound = true;\r\n                                break;\r\n                            }\r\n                        }\r\n\r\n                        if (matchFound) { break; }\r\n                    }\r\n                }\r\n            }\r\n            // remove listener from this Interatable's element\r\n            else {\r\n                events.remove(this._element, eventType, listener, useCapture);\r\n            }\r\n\r\n            return this;\r\n        },\r\n\r\n        /*\\\r\n         * Interactable.set\r\n         [ method ]\r\n         *\r\n         * Reset the options of this Interactable\r\n         - options (object) The new settings to apply\r\n         = (object) This Interactable\r\n        \\*/\r\n        set: function (options) {\r\n            if (!isObject(options)) {\r\n                options = {};\r\n            }\r\n\r\n            this.options = extend({}, defaultOptions.base);\r\n\r\n            var i,\r\n                actions = ['drag', 'drop', 'resize', 'gesture'],\r\n                methods = ['draggable', 'dropzone', 'resizable', 'gesturable'],\r\n                perActions = extend(extend({}, defaultOptions.perAction), options[action] || {});\r\n\r\n            for (i = 0; i < actions.length; i++) {\r\n                var action = actions[i];\r\n\r\n                this.options[action] = extend({}, defaultOptions[action]);\r\n\r\n                this.setPerAction(action, perActions);\r\n\r\n                this[methods[i]](options[action]);\r\n            }\r\n\r\n            var settings = [\r\n                    'accept', 'actionChecker', 'allowFrom', 'deltaSource',\r\n                    'dropChecker', 'ignoreFrom', 'origin', 'preventDefault',\r\n                    'rectChecker', 'styleCursor'\r\n                ];\r\n\r\n            for (i = 0, len = settings.length; i < len; i++) {\r\n                var setting = settings[i];\r\n\r\n                this.options[setting] = defaultOptions.base[setting];\r\n\r\n                if (setting in options) {\r\n                    this[setting](options[setting]);\r\n                }\r\n            }\r\n\r\n            return this;\r\n        },\r\n\r\n        /*\\\r\n         * Interactable.unset\r\n         [ method ]\r\n         *\r\n         * Remove this interactable from the list of interactables and remove\r\n         * it's drag, drop, resize and gesture capabilities\r\n         *\r\n         = (object) @interact\r\n        \\*/\r\n        unset: function () {\r\n            events.remove(this._element, 'all');\r\n\r\n            if (!isString(this.selector)) {\r\n                events.remove(this, 'all');\r\n                if (this.options.styleCursor) {\r\n                    this._element.style.cursor = '';\r\n                }\r\n            }\r\n            else {\r\n                // remove delegated events\r\n                for (var type in delegatedEvents) {\r\n                    var delegated = delegatedEvents[type];\r\n\r\n                    for (var i = 0; i < delegated.selectors.length; i++) {\r\n                        if (delegated.selectors[i] === this.selector\r\n                            && delegated.contexts[i] === this._context) {\r\n\r\n                            delegated.selectors.splice(i, 1);\r\n                            delegated.contexts .splice(i, 1);\r\n                            delegated.listeners.splice(i, 1);\r\n\r\n                            // remove the arrays if they are empty\r\n                            if (!delegated.selectors.length) {\r\n                                delegatedEvents[type] = null;\r\n                            }\r\n                        }\r\n\r\n                        events.remove(this._context, type, delegateListener);\r\n                        events.remove(this._context, type, delegateUseCapture, true);\r\n\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n\r\n            this.dropzone(false);\r\n\r\n            interactables.splice(indexOf(interactables, this), 1);\r\n\r\n            return interact;\r\n        }\r\n    };\r\n\r\n    function warnOnce (method, message) {\r\n        var warned = false;\r\n\r\n        return function () {\r\n            if (!warned) {\r\n                window.console.warn(message);\r\n                warned = true;\r\n            }\r\n\r\n            return method.apply(this, arguments);\r\n        };\r\n    }\r\n\r\n    Interactable.prototype.snap = warnOnce(Interactable.prototype.snap,\r\n         'Interactable#snap is deprecated. See the new documentation for snapping at http://interactjs.io/docs/snapping');\r\n    Interactable.prototype.restrict = warnOnce(Interactable.prototype.restrict,\r\n         'Interactable#restrict is deprecated. See the new documentation for resticting at http://interactjs.io/docs/restriction');\r\n    Interactable.prototype.inertia = warnOnce(Interactable.prototype.inertia,\r\n         'Interactable#inertia is deprecated. See the new documentation for inertia at http://interactjs.io/docs/inertia');\r\n    Interactable.prototype.autoScroll = warnOnce(Interactable.prototype.autoScroll,\r\n         'Interactable#autoScroll is deprecated. See the new documentation for autoScroll at http://interactjs.io/docs/#autoscroll');\r\n    Interactable.prototype.squareResize = warnOnce(Interactable.prototype.squareResize,\r\n         'Interactable#squareResize is deprecated. See http://interactjs.io/docs/#resize-square');\r\n\r\n    Interactable.prototype.accept = warnOnce(Interactable.prototype.accept,\r\n         'Interactable#accept is deprecated. use Interactable#dropzone({ accept: target }) instead');\r\n    Interactable.prototype.dropChecker = warnOnce(Interactable.prototype.dropChecker,\r\n         'Interactable#dropChecker is deprecated. use Interactable#dropzone({ dropChecker: checkerFunction }) instead');\r\n    Interactable.prototype.context = warnOnce(Interactable.prototype.context,\r\n         'Interactable#context as a method is deprecated. It will soon be a DOM Node instead');\r\n\r\n    /*\\\r\n     * interact.isSet\r\n     [ method ]\r\n     *\r\n     * Check if an element has been set\r\n     - element (Element) The Element being searched for\r\n     = (boolean) Indicates if the element or CSS selector was previously passed to interact\r\n    \\*/\r\n    interact.isSet = function(element, options) {\r\n        return interactables.indexOfElement(element, options && options.context) !== -1;\r\n    };\r\n\r\n    /*\\\r\n     * interact.on\r\n     [ method ]\r\n     *\r\n     * Adds a global listener for an InteractEvent or adds a DOM event to\r\n     * `document`\r\n     *\r\n     - type       (string | array | object) The types of events to listen for\r\n     - listener   (function) The function to be called on the given event(s)\r\n     - useCapture (boolean) #optional useCapture flag for addEventListener\r\n     = (object) interact\r\n    \\*/\r\n    interact.on = function (type, listener, useCapture) {\r\n        if (isString(type) && type.search(' ') !== -1) {\r\n            type = type.trim().split(/ +/);\r\n        }\r\n\r\n        if (isArray(type)) {\r\n            for (var i = 0; i < type.length; i++) {\r\n                interact.on(type[i], listener, useCapture);\r\n            }\r\n\r\n            return interact;\r\n        }\r\n\r\n        if (isObject(type)) {\r\n            for (var prop in type) {\r\n                interact.on(prop, type[prop], listener);\r\n            }\r\n\r\n            return interact;\r\n        }\r\n\r\n        // if it is an InteractEvent type, add listener to globalEvents\r\n        if (contains(eventTypes, type)) {\r\n            // if this type of event was never bound\r\n            if (!globalEvents[type]) {\r\n                globalEvents[type] = [listener];\r\n            }\r\n            else {\r\n                globalEvents[type].push(listener);\r\n            }\r\n        }\r\n        // If non InteractEvent type, addEventListener to document\r\n        else {\r\n            events.add(document, type, listener, useCapture);\r\n        }\r\n\r\n        return interact;\r\n    };\r\n\r\n    /*\\\r\n     * interact.off\r\n     [ method ]\r\n     *\r\n     * Removes a global InteractEvent listener or DOM event from `document`\r\n     *\r\n     - type       (string | array | object) The types of events that were listened for\r\n     - listener   (function) The listener function to be removed\r\n     - useCapture (boolean) #optional useCapture flag for removeEventListener\r\n     = (object) interact\r\n     \\*/\r\n    interact.off = function (type, listener, useCapture) {\r\n        if (isString(type) && type.search(' ') !== -1) {\r\n            type = type.trim().split(/ +/);\r\n        }\r\n\r\n        if (isArray(type)) {\r\n            for (var i = 0; i < type.length; i++) {\r\n                interact.off(type[i], listener, useCapture);\r\n            }\r\n\r\n            return interact;\r\n        }\r\n\r\n        if (isObject(type)) {\r\n            for (var prop in type) {\r\n                interact.off(prop, type[prop], listener);\r\n            }\r\n\r\n            return interact;\r\n        }\r\n\r\n        if (!contains(eventTypes, type)) {\r\n            events.remove(document, type, listener, useCapture);\r\n        }\r\n        else {\r\n            var index;\r\n\r\n            if (type in globalEvents\r\n                && (index = indexOf(globalEvents[type], listener)) !== -1) {\r\n                globalEvents[type].splice(index, 1);\r\n            }\r\n        }\r\n\r\n        return interact;\r\n    };\r\n\r\n    /*\\\r\n     * interact.enableDragging\r\n     [ method ]\r\n     *\r\n     * Deprecated.\r\n     *\r\n     * Returns or sets whether dragging is enabled for any Interactables\r\n     *\r\n     - newValue (boolean) #optional `true` to allow the action; `false` to disable action for all Interactables\r\n     = (boolean | object) The current setting or interact\r\n    \\*/\r\n    interact.enableDragging = warnOnce(function (newValue) {\r\n        if (newValue !== null && newValue !== undefined) {\r\n            actionIsEnabled.drag = newValue;\r\n\r\n            return interact;\r\n        }\r\n        return actionIsEnabled.drag;\r\n    }, 'interact.enableDragging is deprecated and will soon be removed.');\r\n\r\n    /*\\\r\n     * interact.enableResizing\r\n     [ method ]\r\n     *\r\n     * Deprecated.\r\n     *\r\n     * Returns or sets whether resizing is enabled for any Interactables\r\n     *\r\n     - newValue (boolean) #optional `true` to allow the action; `false` to disable action for all Interactables\r\n     = (boolean | object) The current setting or interact\r\n    \\*/\r\n    interact.enableResizing = warnOnce(function (newValue) {\r\n        if (newValue !== null && newValue !== undefined) {\r\n            actionIsEnabled.resize = newValue;\r\n\r\n            return interact;\r\n        }\r\n        return actionIsEnabled.resize;\r\n    }, 'interact.enableResizing is deprecated and will soon be removed.');\r\n\r\n    /*\\\r\n     * interact.enableGesturing\r\n     [ method ]\r\n     *\r\n     * Deprecated.\r\n     *\r\n     * Returns or sets whether gesturing is enabled for any Interactables\r\n     *\r\n     - newValue (boolean) #optional `true` to allow the action; `false` to disable action for all Interactables\r\n     = (boolean | object) The current setting or interact\r\n    \\*/\r\n    interact.enableGesturing = warnOnce(function (newValue) {\r\n        if (newValue !== null && newValue !== undefined) {\r\n            actionIsEnabled.gesture = newValue;\r\n\r\n            return interact;\r\n        }\r\n        return actionIsEnabled.gesture;\r\n    }, 'interact.enableGesturing is deprecated and will soon be removed.');\r\n\r\n    interact.eventTypes = eventTypes;\r\n\r\n    /*\\\r\n     * interact.debug\r\n     [ method ]\r\n     *\r\n     * Returns debugging data\r\n     = (object) An object with properties that outline the current state and expose internal functions and variables\r\n    \\*/\r\n    interact.debug = function () {\r\n        var interaction = interactions[0] || new Interaction();\r\n\r\n        return {\r\n            interactions          : interactions,\r\n            target                : interaction.target,\r\n            dragging              : interaction.dragging,\r\n            resizing              : interaction.resizing,\r\n            gesturing             : interaction.gesturing,\r\n            prepared              : interaction.prepared,\r\n            matches               : interaction.matches,\r\n            matchElements         : interaction.matchElements,\r\n\r\n            prevCoords            : interaction.prevCoords,\r\n            startCoords           : interaction.startCoords,\r\n\r\n            pointerIds            : interaction.pointerIds,\r\n            pointers              : interaction.pointers,\r\n            addPointer            : listeners.addPointer,\r\n            removePointer         : listeners.removePointer,\r\n            recordPointer        : listeners.recordPointer,\r\n\r\n            snap                  : interaction.snapStatus,\r\n            restrict              : interaction.restrictStatus,\r\n            inertia               : interaction.inertiaStatus,\r\n\r\n            downTime              : interaction.downTimes[0],\r\n            downEvent             : interaction.downEvent,\r\n            downPointer           : interaction.downPointer,\r\n            prevEvent             : interaction.prevEvent,\r\n\r\n            Interactable          : Interactable,\r\n            interactables         : interactables,\r\n            pointerIsDown         : interaction.pointerIsDown,\r\n            defaultOptions        : defaultOptions,\r\n            defaultActionChecker  : defaultActionChecker,\r\n\r\n            actionCursors         : actionCursors,\r\n            dragMove              : listeners.dragMove,\r\n            resizeMove            : listeners.resizeMove,\r\n            gestureMove           : listeners.gestureMove,\r\n            pointerUp             : listeners.pointerUp,\r\n            pointerDown           : listeners.pointerDown,\r\n            pointerMove           : listeners.pointerMove,\r\n            pointerHover          : listeners.pointerHover,\r\n\r\n            eventTypes            : eventTypes,\r\n\r\n            events                : events,\r\n            globalEvents          : globalEvents,\r\n            delegatedEvents       : delegatedEvents,\r\n\r\n            prefixedPropREs       : prefixedPropREs\r\n        };\r\n    };\r\n\r\n    // expose the functions used to calculate multi-touch properties\r\n    interact.getPointerAverage = pointerAverage;\r\n    interact.getTouchBBox     = touchBBox;\r\n    interact.getTouchDistance = touchDistance;\r\n    interact.getTouchAngle    = touchAngle;\r\n\r\n    interact.getElementRect         = getElementRect;\r\n    interact.getElementClientRect   = getElementClientRect;\r\n    interact.matchesSelector        = matchesSelector;\r\n    interact.closest                = closest;\r\n\r\n    /*\\\r\n     * interact.margin\r\n     [ method ]\r\n     *\r\n     * Deprecated. Use `interact(target).resizable({ margin: number });` instead.\r\n     * Returns or sets the margin for autocheck resizing used in\r\n     * @Interactable.getAction. That is the distance from the bottom and right\r\n     * edges of an element clicking in which will start resizing\r\n     *\r\n     - newValue (number) #optional\r\n     = (number | interact) The current margin value or interact\r\n    \\*/\r\n    interact.margin = warnOnce(function (newvalue) {\r\n        if (isNumber(newvalue)) {\r\n            margin = newvalue;\r\n\r\n            return interact;\r\n        }\r\n        return margin;\r\n    },\r\n    'interact.margin is deprecated. Use interact(target).resizable({ margin: number }); instead.') ;\r\n\r\n    /*\\\r\n     * interact.supportsTouch\r\n     [ method ]\r\n     *\r\n     = (boolean) Whether or not the browser supports touch input\r\n    \\*/\r\n    interact.supportsTouch = function () {\r\n        return supportsTouch;\r\n    };\r\n\r\n    /*\\\r\n     * interact.supportsPointerEvent\r\n     [ method ]\r\n     *\r\n     = (boolean) Whether or not the browser supports PointerEvents\r\n    \\*/\r\n    interact.supportsPointerEvent = function () {\r\n        return supportsPointerEvent;\r\n    };\r\n\r\n    /*\\\r\n     * interact.stop\r\n     [ method ]\r\n     *\r\n     * Cancels all interactions (end events are not fired)\r\n     *\r\n     - event (Event) An event on which to call preventDefault()\r\n     = (object) interact\r\n    \\*/\r\n    interact.stop = function (event) {\r\n        for (var i = interactions.length - 1; i >= 0; i--) {\r\n            interactions[i].stop(event);\r\n        }\r\n\r\n        return interact;\r\n    };\r\n\r\n    /*\\\r\n     * interact.dynamicDrop\r\n     [ method ]\r\n     *\r\n     * Returns or sets whether the dimensions of dropzone elements are\r\n     * calculated on every dragmove or only on dragstart for the default\r\n     * dropChecker\r\n     *\r\n     - newValue (boolean) #optional True to check on each move. False to check only before start\r\n     = (boolean | interact) The current setting or interact\r\n    \\*/\r\n    interact.dynamicDrop = function (newValue) {\r\n        if (isBool(newValue)) {\r\n            //if (dragging && dynamicDrop !== newValue && !newValue) {\r\n                //calcRects(dropzones);\r\n            //}\r\n\r\n            dynamicDrop = newValue;\r\n\r\n            return interact;\r\n        }\r\n        return dynamicDrop;\r\n    };\r\n\r\n    /*\\\r\n     * interact.pointerMoveTolerance\r\n     [ method ]\r\n     * Returns or sets the distance the pointer must be moved before an action\r\n     * sequence occurs. This also affects tolerance for tap events.\r\n     *\r\n     - newValue (number) #optional The movement from the start position must be greater than this value\r\n     = (number | Interactable) The current setting or interact\r\n    \\*/\r\n    interact.pointerMoveTolerance = function (newValue) {\r\n        if (isNumber(newValue)) {\r\n            pointerMoveTolerance = newValue;\r\n\r\n            return this;\r\n        }\r\n\r\n        return pointerMoveTolerance;\r\n    };\r\n\r\n    /*\\\r\n     * interact.maxInteractions\r\n     [ method ]\r\n     **\r\n     * Returns or sets the maximum number of concurrent interactions allowed.\r\n     * By default only 1 interaction is allowed at a time (for backwards\r\n     * compatibility). To allow multiple interactions on the same Interactables\r\n     * and elements, you need to enable it in the draggable, resizable and\r\n     * gesturable `'max'` and `'maxPerElement'` options.\r\n     **\r\n     - newValue (number) #optional Any number. newValue <= 0 means no interactions.\r\n    \\*/\r\n    interact.maxInteractions = function (newValue) {\r\n        if (isNumber(newValue)) {\r\n            maxInteractions = newValue;\r\n\r\n            return this;\r\n        }\r\n\r\n        return maxInteractions;\r\n    };\r\n\r\n    interact.createSnapGrid = function (grid) {\r\n        return function (x, y) {\r\n            var offsetX = 0,\r\n                offsetY = 0;\r\n\r\n            if (isObject(grid.offset)) {\r\n                offsetX = grid.offset.x;\r\n                offsetY = grid.offset.y;\r\n            }\r\n\r\n            var gridx = Math.round((x - offsetX) / grid.x),\r\n                gridy = Math.round((y - offsetY) / grid.y),\r\n\r\n                newX = gridx * grid.x + offsetX,\r\n                newY = gridy * grid.y + offsetY;\r\n\r\n            return {\r\n                x: newX,\r\n                y: newY,\r\n                range: grid.range\r\n            };\r\n        };\r\n    };\r\n\r\n    function endAllInteractions (event) {\r\n        for (var i = 0; i < interactions.length; i++) {\r\n            interactions[i].pointerEnd(event, event);\r\n        }\r\n    }\r\n\r\n    function listenToDocument (doc) {\r\n        if (contains(documents, doc)) { return; }\r\n\r\n        var win = doc.defaultView || doc.parentWindow;\r\n\r\n        // add delegate event listener\r\n        for (var eventType in delegatedEvents) {\r\n            events.add(doc, eventType, delegateListener);\r\n            events.add(doc, eventType, delegateUseCapture, true);\r\n        }\r\n\r\n        if (PointerEvent) {\r\n            if (PointerEvent === win.MSPointerEvent) {\r\n                pEventTypes = {\r\n                    up: 'MSPointerUp', down: 'MSPointerDown', over: 'mouseover',\r\n                    out: 'mouseout', move: 'MSPointerMove', cancel: 'MSPointerCancel' };\r\n            }\r\n            else {\r\n                pEventTypes = {\r\n                    up: 'pointerup', down: 'pointerdown', over: 'pointerover',\r\n                    out: 'pointerout', move: 'pointermove', cancel: 'pointercancel' };\r\n            }\r\n\r\n            events.add(doc, pEventTypes.down  , listeners.selectorDown );\r\n            events.add(doc, pEventTypes.move  , listeners.pointerMove  );\r\n            events.add(doc, pEventTypes.over  , listeners.pointerOver  );\r\n            events.add(doc, pEventTypes.out   , listeners.pointerOut   );\r\n            events.add(doc, pEventTypes.up    , listeners.pointerUp    );\r\n            events.add(doc, pEventTypes.cancel, listeners.pointerCancel);\r\n\r\n            // autoscroll\r\n            events.add(doc, pEventTypes.move, listeners.autoScrollMove);\r\n        }\r\n        else {\r\n            events.add(doc, 'mousedown', listeners.selectorDown);\r\n            events.add(doc, 'mousemove', listeners.pointerMove );\r\n            events.add(doc, 'mouseup'  , listeners.pointerUp   );\r\n            events.add(doc, 'mouseover', listeners.pointerOver );\r\n            events.add(doc, 'mouseout' , listeners.pointerOut  );\r\n\r\n            events.add(doc, 'touchstart' , listeners.selectorDown );\r\n            events.add(doc, 'touchmove'  , listeners.pointerMove  );\r\n            events.add(doc, 'touchend'   , listeners.pointerUp    );\r\n            events.add(doc, 'touchcancel', listeners.pointerCancel);\r\n\r\n            // autoscroll\r\n            events.add(doc, 'mousemove', listeners.autoScrollMove);\r\n            events.add(doc, 'touchmove', listeners.autoScrollMove);\r\n        }\r\n\r\n        events.add(win, 'blur', endAllInteractions);\r\n\r\n        try {\r\n            if (win.frameElement) {\r\n                var parentDoc = win.frameElement.ownerDocument,\r\n                    parentWindow = parentDoc.defaultView;\r\n\r\n                events.add(parentDoc   , 'mouseup'      , listeners.pointerEnd);\r\n                events.add(parentDoc   , 'touchend'     , listeners.pointerEnd);\r\n                events.add(parentDoc   , 'touchcancel'  , listeners.pointerEnd);\r\n                events.add(parentDoc   , 'pointerup'    , listeners.pointerEnd);\r\n                events.add(parentDoc   , 'MSPointerUp'  , listeners.pointerEnd);\r\n                events.add(parentWindow, 'blur'         , endAllInteractions );\r\n            }\r\n        }\r\n        catch (error) {\r\n            interact.windowParentError = error;\r\n        }\r\n\r\n        // prevent native HTML5 drag on interact.js target elements\r\n        events.add(doc, 'dragstart', function (event) {\r\n            for (var i = 0; i < interactions.length; i++) {\r\n                var interaction = interactions[i];\r\n\r\n                if (interaction.element\r\n                    && (interaction.element === event.target\r\n                        || nodeContains(interaction.element, event.target))) {\r\n\r\n                    interaction.checkAndPreventDefault(event, interaction.target, interaction.element);\r\n                    return;\r\n                }\r\n            }\r\n        });\r\n\r\n        if (events.useAttachEvent) {\r\n            // For IE's lack of Event#preventDefault\r\n            events.add(doc, 'selectstart', function (event) {\r\n                var interaction = interactions[0];\r\n\r\n                if (interaction.currentAction()) {\r\n                    interaction.checkAndPreventDefault(event);\r\n                }\r\n            });\r\n\r\n            // For IE's bad dblclick event sequence\r\n            events.add(doc, 'dblclick', doOnInteractions('ie8Dblclick'));\r\n        }\r\n\r\n        documents.push(doc);\r\n    }\r\n\r\n    listenToDocument(document);\r\n\r\n    function indexOf (array, target) {\r\n        for (var i = 0, len = array.length; i < len; i++) {\r\n            if (array[i] === target) {\r\n                return i;\r\n            }\r\n        }\r\n\r\n        return -1;\r\n    }\r\n\r\n    function contains (array, target) {\r\n        return indexOf(array, target) !== -1;\r\n    }\r\n\r\n    function matchesSelector (element, selector, nodeList) {\r\n        if (ie8MatchesSelector) {\r\n            return ie8MatchesSelector(element, selector, nodeList);\r\n        }\r\n\r\n        // remove /deep/ from selectors if shadowDOM polyfill is used\r\n        if (window !== realWindow) {\r\n            selector = selector.replace(/\\/deep\\//g, ' ');\r\n        }\r\n\r\n        return element[prefixedMatchesSelector](selector);\r\n    }\r\n\r\n    function matchesUpTo (element, selector, limit) {\r\n        while (isElement(element)) {\r\n            if (matchesSelector(element, selector)) {\r\n                return true;\r\n            }\r\n\r\n            element = parentElement(element);\r\n\r\n            if (element === limit) {\r\n                return matchesSelector(element, selector);\r\n            }\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    // For IE8's lack of an Element#matchesSelector\r\n    // taken from http://tanalin.com/en/blog/2012/12/matches-selector-ie8/ and modified\r\n    if (!(prefixedMatchesSelector in Element.prototype) || !isFunction(Element.prototype[prefixedMatchesSelector])) {\r\n        ie8MatchesSelector = function (element, selector, elems) {\r\n            elems = elems || element.parentNode.querySelectorAll(selector);\r\n\r\n            for (var i = 0, len = elems.length; i < len; i++) {\r\n                if (elems[i] === element) {\r\n                    return true;\r\n                }\r\n            }\r\n\r\n            return false;\r\n        };\r\n    }\r\n\r\n    // requestAnimationFrame polyfill\r\n    (function() {\r\n        var lastTime = 0,\r\n            vendors = ['ms', 'moz', 'webkit', 'o'];\r\n\r\n        for(var x = 0; x < vendors.length && !realWindow.requestAnimationFrame; ++x) {\r\n            reqFrame = realWindow[vendors[x]+'RequestAnimationFrame'];\r\n            cancelFrame = realWindow[vendors[x]+'CancelAnimationFrame'] || realWindow[vendors[x]+'CancelRequestAnimationFrame'];\r\n        }\r\n\r\n        if (!reqFrame) {\r\n            reqFrame = function(callback) {\r\n                var currTime = new Date().getTime(),\r\n                    timeToCall = Math.max(0, 16 - (currTime - lastTime)),\r\n                    id = setTimeout(function() { callback(currTime + timeToCall); },\r\n                  timeToCall);\r\n                lastTime = currTime + timeToCall;\r\n                return id;\r\n            };\r\n        }\r\n\r\n        if (!cancelFrame) {\r\n            cancelFrame = function(id) {\r\n                clearTimeout(id);\r\n            };\r\n        }\r\n    }());\r\n\r\n    /* global exports: true, module, define */\r\n\r\n    // http://documentcloud.github.io/underscore/docs/underscore.html#section-11\r\n    if (typeof exports !== 'undefined') {\r\n        if (typeof module !== 'undefined' && module.exports) {\r\n            exports = module.exports = interact;\r\n        }\r\n        exports.interact = interact;\r\n    }\r\n    // AMD\r\n    else if (typeof define === 'function' && define.amd) {\r\n        define('interact', function() {\r\n            return interact;\r\n        });\r\n    }\r\n    else {\r\n        realWindow.interact = interact;\r\n    }\r\n\r\n} (typeof window === 'undefined'? undefined : window));","import {inject} from 'aurelia-framework';\r\nimport {PictureService} from '../../services/picture-service';\r\nimport * as interact from './interact';\r\n\r\n@inject(PictureService)\r\nexport class PictureTest {\r\n\r\n    pictureUrl = '';\r\n    isLoaded = false;\r\n    \r\n    constructor(pictureService) {\r\n        this.pictureService = pictureService;\r\n    }\r\n\r\n    created() {\r\n        console.log(interact.interact);\r\n        interact.interact('#dragTest')\r\n                .draggable({\r\n                    // enable inertial throwing\r\n                    inertia: true,\r\n                    // keep the element within the area of it's parent\r\n                    restrict: {\r\n                        restriction: \"parent\",\r\n                        endOnly: true,\r\n                        elementRect: { top: -0.1, left: -0.1, bottom: 1.1, right: 1.1 }\r\n                    },\r\n                    // enable autoScroll\r\n                    autoScroll: true,\r\n                    // call this function on every dragmove event\r\n                    onmove: this.dragMoveListener,\r\n                    // call this function on every dragend event\r\n                    onend: function (event) {\r\n                    var textEl = event.target.querySelector('p');\r\n                        textEl && (textEl.textContent =\r\n                            'moved a distance of '\r\n                            + (Math.sqrt(event.dx * event.dx +\r\n                                        event.dy * event.dy)|0) + 'px');\r\n                    }\r\n                })\r\n                .resizable({\r\n                    preserveAspectRatio: true,\r\n                    edges: { left: true, right: true, bottom: true, top: true }\r\n                })\r\n                .on('resizemove', function (event) {\r\n                    var target = event.target,\r\n                        x = (parseFloat(target.getAttribute('data-x')) || 0),\r\n                        y = (parseFloat(target.getAttribute('data-y')) || 0);\r\n\r\n                    // update the element's style\r\n                    target.style.width  = event.rect.width + 'px';\r\n                    target.style.height = event.rect.height + 'px';\r\n\r\n                    // translate when resizing from top or left edges\r\n                    x += event.deltaRect.left;\r\n                    y += event.deltaRect.top;\r\n\r\n                    target.style.webkitTransform = target.style.transform =\r\n                        'translate(' + x + 'px,' + y + 'px)';\r\n\r\n                    target.setAttribute('data-x', x);\r\n                    target.setAttribute('data-y', y);\r\n                    target.textContent = Math.round(event.rect.width) + '×' + Math.round(event.rect.height);\r\n                });\r\n    }\r\n\r\n    test() {\r\n        this.pictureService.getPicture('testFrame', false).then(\r\n            (success) => {\r\n                console.log('SUCCESS');\r\n                console.log(success);\r\n                var response = JSON.parse(success.response);\r\n                this.pictureUrl = response.imageUrl;\r\n                this.isLoaded = true;\r\n            },\r\n            (failure) => {\r\n                console.log('FAILURE');\r\n                console.log(failure);\r\n            }\r\n        )\r\n    }\r\n    \r\n    dragMoveListener(event) {\r\n        // console.log(event);\r\n      var target = event.target,\r\n          // keep the dragged position in the data-x/data-y attributes\r\n          x = (parseFloat(target.getAttribute('data-x')) || 0) + event.dx,\r\n          y = (parseFloat(target.getAttribute('data-y')) || 0) + event.dy;\r\n\r\n      // translate the element\r\n      target.style.webkitTransform =\r\n          target.style.transform =\r\n          'translate(' + x + 'px, ' + y + 'px)';\r\n\r\n      // update the posiion attributes\r\n      target.setAttribute('data-x', x);\r\n      target.setAttribute('data-y', y);\r\n  }\r\n}","import {inject} from 'aurelia-framework';\r\nimport {UserService} from '../../services/user-service';\r\n\r\n@inject(UserService)\r\nexport class UserList {\r\n    constructor(userService) {\r\n        this.userService = userService;\r\n        this.users = [];\r\n        this.error = {};\r\n        this.isWorking = false;\r\n    }\r\n\r\n    created() {\r\n        this.updateUserList(0, 10);\r\n    }\r\n\r\n    updateUserList(page, size) {\r\n        this.isWorking = true;\r\n        this.userService.getUsers(page, size)\r\n                .then(\r\n                    userResponse => {\r\n                        this.users = JSON.parse(userResponse.response);\r\n                        this.isWorking = false;\r\n                    }, \r\n                    errorResponse => {\r\n                        this.error.title = 'Ups';\r\n                        this.error.description = 'Parece que el sistema no response, por favor intenta nuevamente mas tarde.';\r\n                        this.isWorking = false;\r\n                    }\r\n                );\r\n    }\r\n\r\n}","import {inject, NewInstance} from 'aurelia-framework';\r\nimport {ValidationController, validateTrigger, ValidationRules} from 'aurelia-validation';\r\nimport {UserService} from '../../services/user-service';\r\n\r\n@inject(UserService,NewInstance.of(ValidationController))\r\nexport class UserRegistration {\r\n    \r\n    firstName = '';\r\n    lastName = '';\r\n    email = '';\r\n    password = '';\r\n\r\n    constructor(userService, validationController) {\r\n        this.userService = userService;\r\n        this.validationController = validationController;\r\n        this.isWorking = false;\r\n        this.success = false;\r\n        this.serverError = {};\r\n    }\r\n\r\n    created() {\r\n        this.validationController.validateTrigger = validateTrigger.manual;\r\n\r\n        ValidationRules\r\n            .ensure(\"firstName\").required().withMessage(\"El nombre no puede estar vacio.\")\r\n            .ensure(\"lastName\").required().withMessage(\"El apellido no puede estar vacio.\")\r\n            .ensure(\"email\").email().required().withMessage(\"El email no es valido, por favor ingrese un email valido.\")\r\n            .ensure(\"password\").minLength(8).required().withMessage(\"La contraseña debe tener al menos 8 caracteres\")\r\n            .on(this);\r\n    }\r\n\r\n    register() {\r\n        this.success = false;\r\n        this.isWorking = true;\r\n\r\n        var user = { \r\n            firstName: this.firstName,\r\n            lastName: this.lastName,\r\n            email: this.email, \r\n            password: this.password\r\n        }\r\n\r\n        setTimeout(() => {\r\n            this.validationController.validate()\r\n                .then((validation) => {\r\n                    if(validation.valid) {\r\n                        this.success = true;\r\n                    }\r\n                }).then(() => this.isWorking = false);\r\n        }, 1000);\r\n    }\r\n\r\n    postUser(user) {\r\n        this.userService.postUser(user).then(\r\n            () => {\r\n                this.success = true;\r\n            },\r\n            failure => {\r\n                var failureMessage = JSON.parse(failure.response);\r\n                this.serverError = {\r\n                    title: failureMessage.title,\r\n                    description: failureMessage.description\r\n                };\r\n            }\r\n        ).then(() => this.isWorking = false);\r\n    }\r\n\r\n}"],"sourceRoot":".."}
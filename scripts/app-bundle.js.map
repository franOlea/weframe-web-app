{"version":3,"sources":["src/app.js","src/environment.js","src/main.js","src/resources/index.js","src/services/frame-service.js","src/services/picture-service.js","src/services/user-service.js","src/components/frame/frame-list.js","src/components/frame/frame-thumbnail.js","src/components/frame/frame-upload.js","src/components/picture/canvas-test.js","src/components/picture/interact.js","src/components/picture/picture-test.js","src/components/user/user-list.js","src/components/user/user-registration.js","src/components/picture/picture-upload.js"],"names":["App","message","debug","testing","webApiUrl","webApiUsersPath","webApiPicturesPath","webApiFramesPath","configure","aurelia","use","standardConfiguration","feature","plugin","developmentLogging","start","then","setRoot","config","FrameService","restClient","getFrames","pageNumber","pageSize","createRequest","asGet","withBaseUrl","withTimeout","send","getFrame","id","postFrame","frame","asPost","withContent","PictureService","getPicture","uniquePictureName","isOriginalSize","withParams","uniqueName","original","putPicture","file","formatName","onProgress","formData","FormData","append","withProgressCallback","evt","console","log","UserService","getUsers","getUser","postUser","user","FrameList","frameService","frames","error","isWorking","created","updateFrameList","page","size","JSON","parse","frameResponse","response","title","description","FrameThumbnail","pictureService","FrameUpload","of","validationController","success","serverError","validateTrigger","manual","ensure","required","withMessage","on","upload","imageFiles","validate","validation","valid","doUpload","imageUniqueName","imageFormatName","doUploadFrame","failureMessage","failure","name","height","length","width","picture","imageKey","price","CanvasTest","rangeVal","showVal","recolor","rgbToHsl","drawImage","imageUrl","ctx","canvas","getContext","img","Image","crossOrigin","onload","src","colorshift","imgData","getImageData","data","i","red","green","blue","alpha","hsl","hue","h","newRgb","hslToRgb","s","l","r","g","b","putImageData","max","Math","min","d","hue2rgb","p","q","t","round","realWindow","window","el","document","createTextNode","ownerDocument","wrap","DocumentFragment","blank","SVGElement","SVGSVGElement","SVGElementInstance","HTMLElement","Element","PointerEvent","MSPointerEvent","pEventTypes","hypot","x","y","sqrt","tmpXY","documents","interactables","interactions","dynamicDrop","delegatedEvents","defaultOptions","base","accept","actionChecker","styleCursor","preventDefault","origin","deltaSource","allowFrom","ignoreFrom","_context","dropChecker","drag","enabled","manualStart","Infinity","maxPerElement","snap","restrict","inertia","autoScroll","axis","drop","overlap","resize","square","preserveAspectRatio","margin","NaN","edges","invert","gesture","perAction","endOnly","range","targets","offsets","relativePoints","container","speed","resistance","minSpeed","endSpeed","allowResume","zeroResumeDelta","smoothEndDuration","_holdDuration","interaction","scroll","options","target","prepared","getWindow","element","now","Date","getTime","dtx","prevTimeX","dty","prevTimeY","vx","vy","sx","sy","velocity","isWindow","scrollBy","scrollLeft","scrollTop","isScrolling","cancelFrame","reqFrame","stop","supportsTouch","DocumentTouch","supportsPointerEvent","pointerMoveTolerance","prevTouchTime","maxInteractions","actionCursors","all","atob","resizex","resizey","resizexy","resizetop","resizeleft","resizebottom","resizeright","resizetopleft","resizebottomright","resizetopright","resizebottomleft","actionIsEnabled","wheelEvent","eventTypes","globalEvents","isOperaMobile","navigator","appName","userAgent","match","isIOS7","test","platform","appVersion","prefixedMatchesSelector","prototype","ie8MatchesSelector","requestAnimationFrame","cancelAnimationFrame","events","useAttachEvent","addEvent","removeEvent","elements","attachedListeners","add","type","listener","useCapture","elementIndex","indexOf","typeCount","push","supplied","wrapped","useCount","contains","ret","listeners","listenerIndex","event","immediatePropagationStopped","srcElement","currentTarget","preventDef","stopPropagation","stopProp","stopImmediatePropagation","stopImmProp","pageX","clientX","documentElement","pageY","clientY","Boolean","remove","hasOwnProperty","len","splice","returnValue","cancelBubble","_elements","_targets","_attachedListeners","isElement","o","_window","nodeType","nodeName","thing","Window","isDocFrag","isArray","isObject","undefined","isFunction","isNumber","isBool","isString","trySelector","value","querySelector","extend","dest","source","prop","prefixedPropREs","webkit","pointerExtend","deprecated","vendor","copyCoords","client","timeStamp","setEventXY","targetObj","pointers","pointer","pointerAverage","getPageXY","getClientXY","setEventDeltas","prev","cur","dt","isNativePointer","Event","Touch","getXY","xy","scrollX","scrollY","getScrollXY","win","getPointerId","pointerId","identifier","getActualElement","correspondingUseElement","node","rootNode","defaultView","parentWindow","getElementClientRect","clientRect","getBoundingClientRect","getClientRects","left","right","top","bottom","getElementRect","getTouchPair","touches","changedTouches","average","screenX","screenY","touchBBox","minX","minY","maxX","maxY","touchDistance","sourceX","sourceY","dx","dy","touchAngle","prevAngle","angle","atan","PI","dr","drClamped","getOriginXY","interactable","parentElement","getRect","closest","_getQBezierValue","p1","p2","p3","iT","getQuadraticCurvePoint","startX","startY","cpX","cpY","endX","endY","position","easeOutQuad","c","nodeContains","parent","child","parentNode","selector","matchesSelector","host","inContext","testIgnore","interactableElement","matchesUpTo","testAllow","checkAxis","thisAxis","checkSnap","action","checkRestrict","checkAutoScroll","withinInteractionLimit","maxActions","activeInteractions","targetCount","targetElementCount","otherAction","active","interacting","indexOfDeepestElement","dropzone","deepestZone","index","deepestZoneParents","dropzoneParents","n","unshift","ownerSVGElement","parents","lastChild","previousSibling","Interaction","dropTarget","dropElement","prevDropTarget","prevDropElement","matches","matchElements","inertiaStatus","smoothEnd","ending","startEvent","upCoords","xe","ye","t0","vx0","vys","duration","resumeDx","resumeDy","lambda_v0","one_ve_v0","Function","bind","boundInertiaFrame","inertiaFrame","boundSmoothEndFrame","smoothEndFrame","that","activeDrops","dropzones","rects","pointerIds","downTargets","downTimes","holdTimers","prevCoords","curCoords","startCoords","pointerDelta","downEvent","downPointer","_eventTarget","_curEventTarget","prevEvent","tapTime","prevTap","startOffset","restrictOffset","snapOffsets","startDistance","prevDistance","distance","scale","startAngle","snapStatus","realX","realY","snappedX","snappedY","locked","changed","restrictStatus","restrictedX","restrictedY","restricted","pointerIsDown","pointerWasMoved","gesturing","dragging","resizing","resizeAxes","mouse","ptr","pointerOver","eventTarget","curMatches","curMatchElements","prevTargetElement","addPointer","elementInteractable","get","elementAction","validateAction","getAction","pushCurMatches","forEachSelector","validateSelector","pointerHover","move","curEventTarget","_doc","style","cursor","getActionCursor","checkAndPreventDefault","pointerOut","selectorDown","eventCopy","pointerIndex","setTimeout","pointerHold","collectEventTargets","pushMatches","context","querySelectorAll","pointerDown","forceAction","_element","newAction","setModifications","coords","preEnd","shouldMove","shouldSnap","shouldRestrict","setSnapping","setRestriction","setStartOffsets","rect","snapOffset","offset","elementRect","pointerMove","pageUp","clientUp","inertiaPosition","recordPointer","duplicateMove","clearTimeout","InteractEvent","absX","abs","absY","targetAxis","thisInteraction","getDraggable","selectorInteractable","starting","autoScrollMove","dragStart","dragEvent","fire","setActiveDrops","dropEvents","getDropEvents","activate","fireActiveDrops","dragMove","draggableElement","getDrop","leave","enter","resizeStart","resizeEvent","startRect","linkedEdges","_linkedEdges","resizeStartAspectRatio","resizeRects","current","previous","delta","deltaRect","resizeMove","invertible","originalEdges","swap","edge","gestureStart","gestureEvent","ds","gestureMove","isNaN","pointerUp","pointerEnd","removePointer","pointerCancel","ie8Dblclick","endEvent","inertiaOptions","pointerSpeed","inertiaPossible","endSnap","endRestrict","snapRestrict","vy0","v0","calcInertia","statusObject","useStatusXY","modifiedXe","modifiedYe","deactivate","collectDrops","drops","dropElements","j","currentElement","prevElement","dragElement","possibleDrops","validDrops","dropCheck","dropIndex","pointerEvent","relatedTarget","draggable","dragLeave","prevDropzone","dragEnter","dragmove","currentAction","clearTargets","lambda","te","progress","exp","quadPoint","eventType","collectSelectors","els","_iEvents","interact","isSet","firePointers","interval","createNewDoubleTap","preventOriginalDefault","originalEvent","originalPointer","pointerType","double","propagationStopped","doubleTap","matchElement","pageCoords","status","relIndex","relative","inRange","snapChanged","restriction","prevent","inertiaDur","x0","y0","innerWidth","innerHeight","_updateEventTargets","getInteractionFromPointer","mouseEvent","doOnInteractions","method","path","phase","related","clientX0","clientY0","ctrlKey","altKey","shiftKey","metaKey","button","buttons","detail","axes","box","da","prevScale","velocityX","velocityY","atan2","up","down","swipe","cursorKey","edgeNames","checkResizeEdge","defaultActionChecker","shouldResize","resizeEdges","resizeOptions","actionName","interactionListeners","delegateListener","fakeEvent","delegated","selectors","contexts","delegateUseCapture","call","indexOfElement","interactableGet","callback","Interactable","Node","listenToDocument","set","setOnEvents","phases","ondrop","ondropactivate","ondropdeactivate","ondragenter","ondragleave","ondropmove","onstart","onmove","onend","oninertiastart","setPerAction","option","checker","dropped","dropOverlap","horizontal","vertical","dragRect","cx","cy","overlapArea","overlapRatio","newValue","resizable","squareResize","gesturable","actions","setOptions","thisOption","mode","createSnapGrid","gridOffset","grid","anchors","paths","elementOrigin","allActions","rectCheck","rectChecker","iEvent","onEvent","funcName","search","trim","split","off","eventList","matchFound","fn","useCap","methods","perActions","settings","setting","unset","warnOnce","warned","warn","apply","arguments","enableDragging","enableResizing","enableGesturing","downTime","getPointerAverage","getTouchBBox","getTouchDistance","getTouchAngle","newvalue","offsetX","offsetY","gridx","gridy","newX","newY","endAllInteractions","doc","over","out","cancel","frameElement","parentDoc","windowParentError","array","nodeList","replace","limit","elems","lastTime","vendors","currTime","timeToCall","exports","module","define","amd","PictureTest","pictureUrl","isLoaded","dragMoveListener","textEl","textContent","parseFloat","getAttribute","webkitTransform","transform","setAttribute","UserList","userService","users","updateUserList","userResponse","UserRegistration","firstName","lastName","email","password","minLength","register","PictureUpload","selectedFiles","clearFiles","getElementById"],"mappings":"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","file":"app-bundle.js","sourcesContent":["export class App {\n  constructor() {\n    this.message = 'Hello World!';\n  }\n}\n","export default {\n  debug: true,\n  testing: true,\n  webApiUrl: 'http://weframers-franolea.rhcloud.com',\n  webApiUsersPath: 'users',\n  webApiPicturesPath: 'pictures',\n  webApiFramesPath: 'frames'\n};\n","import environment from './environment';\n\nexport function configure(aurelia) {\n  aurelia.use\n    .standardConfiguration()\n    .feature('resources')\n    .plugin('aurelia-validation');\n\n  if (environment.debug) {\n    aurelia.use.developmentLogging();\n  }\n\n  if (environment.testing) {\n    aurelia.use.plugin('aurelia-testing');\n  }\n\n  aurelia.start().then(() => aurelia.setRoot());\n}\n","export function configure(config) {\n  //config.globalResources([]);\n}\n","import {HttpClient} from 'aurelia-http-client';\r\nimport environment from '../environment';\r\n\r\nexport class FrameService {\r\n    constructor() {\r\n        this.restClient = new HttpClient();\r\n    }\r\n\r\n    getFrames(pageNumber, pageSize) {\r\n        return this.restClient.createRequest(environment.webApiFramesPath)\r\n                .asGet()\r\n                .withBaseUrl(environment.webApiUrl)\r\n                .withTimeout(5000)\r\n                .send()\r\n    }\r\n\r\n    getFrame(id) {\r\n        return this.restClient.createRequest(environment.webApiFramesPath + `/${id}`)\r\n                .asGet()\r\n                .withBaseUrl(environment.webApiUrl)\r\n                .withTimeout(2000)\r\n                .send()\r\n    }\r\n\r\n    postFrame(frame) {\r\n        return this.restClient.createRequest(environment.webApiFramesPath)\r\n                .asPost()\r\n                .withBaseUrl(environment.webApiUrl)\r\n                .withContent(frame)\r\n                .withTimeout(3000)\r\n                .send()\r\n    }\r\n}","import {HttpClient} from 'aurelia-http-client';\r\nimport environment from '../environment';\r\n\r\nexport class PictureService {\r\n    constructor() {\r\n        this.restClient = new HttpClient();\r\n    }\r\n\r\n    getPicture(uniquePictureName, isOriginalSize) {\r\n        return this.restClient.createRequest(environment.webApiPicturesPath)\r\n                .asGet()\r\n                .withParams({\r\n                    uniqueName: uniquePictureName,\r\n                    original: isOriginalSize\r\n                })\r\n                .withBaseUrl(environment.webApiUrl)\r\n                .withTimeout(5000)\r\n                .send();\r\n    }\r\n\r\n    putPicture(uniqueName, file, formatName, onProgress) {\r\n        var formData = new FormData();\r\n        formData.append('uniqueName', uniqueName);\r\n        formData.append('file', file);\r\n        formData.append('formatName', formatName);\r\n\r\n        return this.restClient.createRequest(environment.webApiPicturesPath)\r\n            .asPost()\r\n            .withContent(formData)\r\n            .withBaseUrl(environment.webApiUrl)\r\n            .withProgressCallback((evt)=>console.log(evt))\r\n            .send();\r\n    }\r\n}","import {HttpClient} from 'aurelia-http-client';\r\nimport environment from '../environment';\r\n\r\nexport class UserService {\r\n    constructor() {\r\n        this.restClient = new HttpClient();\r\n    }\r\n\r\n    getUsers() {\r\n        return getUsers(0, 10);\r\n    }\r\n\r\n    getUsers(pageNumber, pageSize) {\r\n        return this.restClient.createRequest(environment.webApiUsersPath)\r\n                .asGet()\r\n                .withBaseUrl(environment.webApiUrl)\r\n                .withTimeout(5000)\r\n                .send()\r\n    }\r\n\r\n    getUser(id) {\r\n        return this.restClient.createRequest(environment.webApiUsersPath + `/${id}`)\r\n                .asGet()\r\n                .withBaseUrl(environment.webApiUrl)\r\n                .withTimeout(2000)\r\n                .send()\r\n    }\r\n\r\n    postUser(user) {\r\n        return this.restClient.createRequest(environment.webApiUsersPath)\r\n                .asPost()\r\n                .withBaseUrl(environment.webApiUrl)\r\n                .withContent(user)\r\n                .withTimeout(3000)\r\n                .send()\r\n    }\r\n\r\n}","import {inject} from 'aurelia-framework';\r\nimport {FrameService} from '../../services/frame-service';\r\n\r\n@inject(FrameService)\r\nexport class FrameList {\r\n    constructor(frameService) {\r\n        this.frameService = frameService;\r\n        this.frames = [];\r\n        this.error = {};\r\n        this.isWorking = false;\r\n    }\r\n\r\n    created() {\r\n        this.updateFrameList(0,10);\r\n    }\r\n\r\n    updateFrameList(page, size) {\r\n        this.isWorking = true;\r\n        this.frameService.getFrames(page, size)\r\n                .then(\r\n                    frameResponse => {\r\n                        this.frames = JSON.parse(frameResponse.response);\r\n                        this.isWorking = false;\r\n                    }, \r\n                    errorResponse => {\r\n                        this.error.title = 'Ups';\r\n                        this.error.description = 'Parece que el sistema no response, por favor intenta nuevamente mas tarde.';\r\n                        this.isWorking = false;\r\n                    }\r\n                );\r\n    }\r\n}","import {inject} from 'aurelia-framework';\r\nimport {bindable} from 'aurelia-framework';\r\nimport {FrameService} from '../../services/frame-service';\r\nimport {PictureService} from '../../services/picture-service';\r\n\r\n@inject(FrameService, PictureService)\r\nexport class FrameThumbnail {\r\n\r\n    @bindable id;\r\n\r\n    constructor(frameService, pictureService) {\r\n        this.frameService = frameService;\r\n        this.pictureService = pictureService;\r\n        this.isWorking = false;\r\n    }\r\n\r\n    created() {\r\n        \r\n    }\r\n}","import {inject, NewInstance} from 'aurelia-framework';\r\nimport {ValidationController, validateTrigger, ValidationRules} from 'aurelia-validation';\r\nimport {PictureService} from '../../services/picture-service';\r\nimport {FrameService} from '../../services/frame-service';\r\n\r\n@inject(PictureService,FrameService,NewInstance.of(ValidationController))\r\nexport class FrameUpload {\r\n\r\n    constructor(pictureService, frameService, validationController) {\r\n        this.pictureService = pictureService;\r\n        this.frameService = frameService;\r\n        this.validationController = validationController;\r\n        this.isWorking = false;\r\n        this.success = false;\r\n        this.serverError = {};\r\n    }\r\n\r\n    created() {\r\n        this.validationController.validateTrigger = validateTrigger.manual;\r\n\r\n        ValidationRules\r\n            .ensure(\"name\")\r\n                    .required()\r\n                    .withMessage(\"El nombre unico no puede estar vacio.\")\r\n            .ensure(\"uniqueName\")\r\n                    .required()\r\n                    .withMessage(\"El nombre unico no puede estar vacio.\")\r\n            .ensure(\"imageUniqueName\")\r\n                    .required()\r\n                    .withMessage(\"El nombre unico de la imagen no puede estar vacio.\")\r\n            .ensure(\"imageFile\")\r\n                    .required()\r\n                    .withMessage(\"El archivo no puede estar vacio.\")\r\n            .ensure(\"imageFormatName\")\r\n                    .required()\r\n                    .withMessage(\"El nombre del formato de archivo de imagen no puede estar vacio.\")\r\n            .on(this);\r\n    }\r\n\r\n    upload() {\r\n        this.success = false;\r\n        this.isWorking = true;\r\n\r\n        console.log(this.imageFiles);\r\n\r\n        this.validationController.validate().then((validation) => {\r\n            if(validation.valid) {\r\n                this.doUpload();\r\n                // setTimeout(() => {\r\n                //     this.success = true;\r\n                // }, 1000).then(() => this.isWorking = false);\r\n            } else {\r\n                this.isWorking = false\r\n            }\r\n        });\r\n    }\r\n\r\n    doUpload() {\r\n        return this.pictureService.putPicture(\r\n            this.imageUniqueName,\r\n            this.imageFiles[0],\r\n            this.imageFormatName,\r\n            null)\r\n            .then(\r\n                () => {\r\n                    this.doUploadFrame();\r\n                },\r\n                failure => {\r\n                    var failureMessage = JSON.parse(failure.response);\r\n                    this.serverError = {\r\n                        title: failureMessage.title,\r\n                        description: failureMessage.description\r\n                    };\r\n                }\r\n            );\r\n    }\r\n\r\n    doUploadFrame() {\r\n        var frame = {\r\n            name: this.name,\r\n            uniqueName: this.uniqueName,\r\n            description: this.description,\r\n            height: this.height,\r\n            length: this.width,\r\n            picture: {\r\n                imageKey: this.imageUniqueName\r\n            },\r\n            price: this.price\r\n        };\r\n\r\n        this.frameService.postFrame(frame).then(\r\n            () => {\r\n                this.success = true;\r\n            },\r\n            failure => {\r\n                var failureMessage = JSON.parse(failure.response);\r\n                this.serverError = {\r\n                    title: failureMessage.title,\r\n                    description: failureMessage.description\r\n                };\r\n            }\r\n        ).then(() => this.isWorking = false);\r\n    }\r\n\r\n}","import {inject} from 'aurelia-framework';\r\nimport {PictureService} from '../../services/picture-service';\r\n\r\n@inject(PictureService)\r\nexport class CanvasTest {\r\n    constructor(pictureService) {\r\n        this.pictureService = pictureService;\r\n        this.rangeVal = 0;\r\n    }\r\n\r\n    showVal() {\r\n        // console.log(this.rangeVal);\r\n        this.recolor(this.rangeVal);\r\n    }\r\n\r\n    created() {\r\n        console.log(this.rgbToHsl(0,0,0));\r\n        console.log(this.rgbToHsl(255,255,0));\r\n        console.log(this.rgbToHsl(255,255,255));\r\n        this.pictureService.getPicture('testPicture', false).then(\r\n            (success) => {\r\n                console.log('SUCCESS');\r\n                console.log(success);\r\n                var response = JSON.parse(success.response);\r\n                this.drawImage(response.imageUrl);\r\n            },\r\n            (failure) => {\r\n                console.log('FAILURE');\r\n                console.log(failure);\r\n            }\r\n        )\r\n    }\r\n\r\n    drawImage(imageUrl) {\r\n        this.ctx = this.canvas.getContext(\"2d\");\r\n        \r\n        var img = new Image();\r\n        img.crossOrigin = \"anonymous\";\r\n        img.onload = () => {\r\n            this.ctx.drawImage(img, 0, 0, 600, 400);\r\n            this.ctx.drawImage(img, 0, 400, 600, 400);\r\n            // shift blueish colors to greenish colors\r\n            this.recolor(.33);\r\n        };\r\n        img.src = imageUrl;\r\n    }\r\n\r\n    recolor(colorshift) {\r\n        var imgData = this.ctx.getImageData(0, 0, 600, 400);\r\n        var data = imgData.data;\r\n\r\n        for (var i = 0; i < data.length; i += 4) {\r\n            var red = data[i + 0];\r\n            var green = data[i + 1];\r\n            var blue = data[i + 2];\r\n            var alpha = data[i + 3];\r\n\r\n            // skip transparent/semiTransparent pixels\r\n            if (alpha < 200) {\r\n                continue;\r\n            }\r\n\r\n            var hsl = this.rgbToHsl(red, green, blue);\r\n            var hue = hsl.h * 360;\r\n\r\n            // change blueish pixels to the new color\r\n            if (hue > 200 && hue < 300) {\r\n                var newRgb = this.hslToRgb(hsl.h + colorshift, hsl.s, hsl.l);\r\n                data[i + 0] = newRgb.r;\r\n                data[i + 1] = newRgb.g;\r\n                data[i + 2] = newRgb.b;\r\n                data[i + 3] = 255;\r\n            }\r\n        }\r\n        this.ctx.putImageData(imgData, 400, 0);\r\n    }\r\n\r\n\r\n    rgbToHsl(r, g, b) {\r\n        r /= 255, g /= 255, b /= 255;\r\n        var max = Math.max(r, g, b),\r\n            min = Math.min(r, g, b);\r\n        var h, s, l = (max + min) / 2;\r\n\r\n        if (max == min) {\r\n            h = s = 0; // achromatic\r\n        } else {\r\n            var d = max - min;\r\n            s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\r\n            switch (max) {\r\n                case r:\r\n                    h = (g - b) / d + (g < b ? 6 : 0);\r\n                    break;\r\n                case g:\r\n                    h = (b - r) / d + 2;\r\n                    break;\r\n                case b:\r\n                    h = (r - g) / d + 4;\r\n                    break;\r\n            }\r\n            h /= 6;\r\n        }\r\n\r\n        return ({\r\n            h: h,\r\n            s: s,\r\n            l: l,\r\n        });\r\n    }\r\n\r\n\r\n    hslToRgb(h, s, l) {\r\n        var r, g, b;\r\n\r\n        if (s == 0) {\r\n            r = g = b = l; // achromatic\r\n        } else {\r\n            function hue2rgb(p, q, t) {\r\n                if (t < 0) t += 1;\r\n                if (t > 1) t -= 1;\r\n                if (t < 1 / 6) return p + (q - p) * 6 * t;\r\n                if (t < 1 / 2) return q;\r\n                if (t < 2 / 3) return p + (q - p) * (2 / 3 - t) * 6;\r\n                return p;\r\n            }\r\n\r\n            var q = l < 0.5 ? l * (1 + s) : l + s - l * s;\r\n            var p = 2 * l - q;\r\n            r = hue2rgb(p, q, h + 1 / 3);\r\n            g = hue2rgb(p, q, h);\r\n            b = hue2rgb(p, q, h - 1 / 3);\r\n        }\r\n\r\n        return ({\r\n            r: Math.round(r * 255),\r\n            g: Math.round(g * 255),\r\n            b: Math.round(b * 255),\r\n        });\r\n    }\r\n    \r\n}","/**\r\n * interact.js v1.2.6\r\n *\r\n * Copyright (c) 2012-2015 Taye Adeyemi <dev@taye.me>\r\n * Open source under the MIT License.\r\n * https://raw.github.com/taye/interact.js/master/LICENSE\r\n */\r\n(function (realWindow) {\r\n    'use strict';\r\n\r\n    // return early if there's no window to work with (eg. Node.js)\r\n    if (!realWindow) { return; }\r\n\r\n    var // get wrapped window if using Shadow DOM polyfill\r\n        window = (function () {\r\n            // create a TextNode\r\n            var el = realWindow.document.createTextNode('');\r\n\r\n            // check if it's wrapped by a polyfill\r\n            if (el.ownerDocument !== realWindow.document\r\n                && typeof realWindow.wrap === 'function'\r\n                && realWindow.wrap(el) === el) {\r\n                // return wrapped window\r\n                return realWindow.wrap(realWindow);\r\n            }\r\n\r\n            // no Shadow DOM polyfil or native implementation\r\n            return realWindow;\r\n        }()),\r\n\r\n        document           = window.document,\r\n        DocumentFragment   = window.DocumentFragment   || blank,\r\n        SVGElement         = window.SVGElement         || blank,\r\n        SVGSVGElement      = window.SVGSVGElement      || blank,\r\n        SVGElementInstance = window.SVGElementInstance || blank,\r\n        HTMLElement        = window.HTMLElement        || window.Element,\r\n\r\n        PointerEvent = (window.PointerEvent || window.MSPointerEvent),\r\n        pEventTypes,\r\n\r\n        hypot = Math.hypot || function (x, y) { return Math.sqrt(x * x + y * y); },\r\n\r\n        tmpXY = {},     // reduce object creation in getXY()\r\n\r\n        documents       = [],   // all documents being listened to\r\n\r\n        interactables   = [],   // all set interactables\r\n        interactions    = [],   // all interactions\r\n\r\n        dynamicDrop     = false,\r\n\r\n        // {\r\n        //      type: {\r\n        //          selectors: ['selector', ...],\r\n        //          contexts : [document, ...],\r\n        //          listeners: [[listener, useCapture], ...]\r\n        //      }\r\n        //  }\r\n        delegatedEvents = {},\r\n\r\n        defaultOptions = {\r\n            base: {\r\n                accept        : null,\r\n                actionChecker : null,\r\n                styleCursor   : true,\r\n                preventDefault: 'auto',\r\n                origin        : { x: 0, y: 0 },\r\n                deltaSource   : 'page',\r\n                allowFrom     : null,\r\n                ignoreFrom    : null,\r\n                _context      : document,\r\n                dropChecker   : null\r\n            },\r\n\r\n            drag: {\r\n                enabled: false,\r\n                manualStart: true,\r\n                max: Infinity,\r\n                maxPerElement: 1,\r\n\r\n                snap: null,\r\n                restrict: null,\r\n                inertia: null,\r\n                autoScroll: null,\r\n\r\n                axis: 'xy'\r\n            },\r\n\r\n            drop: {\r\n                enabled: false,\r\n                accept: null,\r\n                overlap: 'pointer'\r\n            },\r\n\r\n            resize: {\r\n                enabled: false,\r\n                manualStart: false,\r\n                max: Infinity,\r\n                maxPerElement: 1,\r\n\r\n                snap: null,\r\n                restrict: null,\r\n                inertia: null,\r\n                autoScroll: null,\r\n\r\n                square: false,\r\n                preserveAspectRatio: false,\r\n                axis: 'xy',\r\n\r\n                // use default margin\r\n                margin: NaN,\r\n\r\n                // object with props left, right, top, bottom which are\r\n                // true/false values to resize when the pointer is over that edge,\r\n                // CSS selectors to match the handles for each direction\r\n                // or the Elements for each handle\r\n                edges: null,\r\n\r\n                // a value of 'none' will limit the resize rect to a minimum of 0x0\r\n                // 'negate' will alow the rect to have negative width/height\r\n                // 'reposition' will keep the width/height positive by swapping\r\n                // the top and bottom edges and/or swapping the left and right edges\r\n                invert: 'none'\r\n            },\r\n\r\n            gesture: {\r\n                manualStart: false,\r\n                enabled: false,\r\n                max: Infinity,\r\n                maxPerElement: 1,\r\n\r\n                restrict: null\r\n            },\r\n\r\n            perAction: {\r\n                manualStart: false,\r\n                max: Infinity,\r\n                maxPerElement: 1,\r\n\r\n                snap: {\r\n                    enabled     : false,\r\n                    endOnly     : false,\r\n                    range       : Infinity,\r\n                    targets     : null,\r\n                    offsets     : null,\r\n\r\n                    relativePoints: null\r\n                },\r\n\r\n                restrict: {\r\n                    enabled: false,\r\n                    endOnly: false\r\n                },\r\n\r\n                autoScroll: {\r\n                    enabled     : false,\r\n                    container   : null,     // the item that is scrolled (Window or HTMLElement)\r\n                    margin      : 60,\r\n                    speed       : 300       // the scroll speed in pixels per second\r\n                },\r\n\r\n                inertia: {\r\n                    enabled          : false,\r\n                    resistance       : 10,    // the lambda in exponential decay\r\n                    minSpeed         : 100,   // target speed must be above this for inertia to start\r\n                    endSpeed         : 10,    // the speed at which inertia is slow enough to stop\r\n                    allowResume      : true,  // allow resuming an action in inertia phase\r\n                    zeroResumeDelta  : true,  // if an action is resumed after launch, set dx/dy to 0\r\n                    smoothEndDuration: 300    // animate to snap/restrict endOnly if there's no inertia\r\n                }\r\n            },\r\n\r\n            _holdDuration: 600\r\n        },\r\n\r\n        // Things related to autoScroll\r\n        autoScroll = {\r\n            interaction: null,\r\n            i: null,    // the handle returned by window.setInterval\r\n            x: 0, y: 0, // Direction each pulse is to scroll in\r\n\r\n            // scroll the window by the values in scroll.x/y\r\n            scroll: function () {\r\n                var options = autoScroll.interaction.target.options[autoScroll.interaction.prepared.name].autoScroll,\r\n                    container = options.container || getWindow(autoScroll.interaction.element),\r\n                    now = new Date().getTime(),\r\n                    // change in time in seconds\r\n                    dtx = (now - autoScroll.prevTimeX) / 1000,\r\n                    dty = (now - autoScroll.prevTimeY) / 1000,\r\n                    vx, vy, sx, sy;\r\n\r\n                // displacement\r\n                if (options.velocity) {\r\n                  vx = options.velocity.x;\r\n                  vy = options.velocity.y;\r\n                }\r\n                else {\r\n                  vx = vy = options.speed\r\n                }\r\n \r\n                sx = vx * dtx;\r\n                sy = vy * dty;\r\n\r\n                if (sx >= 1 || sy >= 1) {\r\n                    if (isWindow(container)) {\r\n                        container.scrollBy(autoScroll.x * sx, autoScroll.y * sy);\r\n                    }\r\n                    else if (container) {\r\n                        container.scrollLeft += autoScroll.x * sx;\r\n                        container.scrollTop  += autoScroll.y * sy;\r\n                    }\r\n\r\n                    if (sx >=1) autoScroll.prevTimeX = now;\r\n                    if (sy >= 1) autoScroll.prevTimeY = now;\r\n                }\r\n\r\n                if (autoScroll.isScrolling) {\r\n                    cancelFrame(autoScroll.i);\r\n                    autoScroll.i = reqFrame(autoScroll.scroll);\r\n                }\r\n            },\r\n\r\n            isScrolling: false,\r\n            prevTimeX: 0,\r\n            prevTimeY: 0,\r\n\r\n            start: function (interaction) {\r\n                autoScroll.isScrolling = true;\r\n                cancelFrame(autoScroll.i);\r\n\r\n                autoScroll.interaction = interaction;\r\n                autoScroll.prevTimeX = new Date().getTime();\r\n                autoScroll.prevTimeY = new Date().getTime();\r\n                autoScroll.i = reqFrame(autoScroll.scroll);\r\n            },\r\n\r\n            stop: function () {\r\n                autoScroll.isScrolling = false;\r\n                cancelFrame(autoScroll.i);\r\n            }\r\n        },\r\n\r\n        // Does the browser support touch input?\r\n        supportsTouch = (('ontouchstart' in window) || window.DocumentTouch && document instanceof window.DocumentTouch),\r\n\r\n        // Does the browser support PointerEvents\r\n        supportsPointerEvent = !!PointerEvent,\r\n\r\n        // Less Precision with touch input\r\n        margin = supportsTouch || supportsPointerEvent? 20: 10,\r\n\r\n        pointerMoveTolerance = 1,\r\n\r\n        // for ignoring browser's simulated mouse events\r\n        prevTouchTime = 0,\r\n\r\n        // Allow this many interactions to happen simultaneously\r\n        maxInteractions = Infinity,\r\n\r\n        // Check if is IE9 or older\r\n        actionCursors = (document.all && !window.atob) ? {\r\n            drag    : 'move',\r\n            resizex : 'e-resize',\r\n            resizey : 's-resize',\r\n            resizexy: 'se-resize',\r\n\r\n            resizetop        : 'n-resize',\r\n            resizeleft       : 'w-resize',\r\n            resizebottom     : 's-resize',\r\n            resizeright      : 'e-resize',\r\n            resizetopleft    : 'se-resize',\r\n            resizebottomright: 'se-resize',\r\n            resizetopright   : 'ne-resize',\r\n            resizebottomleft : 'ne-resize',\r\n\r\n            gesture : ''\r\n        } : {\r\n            drag    : 'move',\r\n            resizex : 'ew-resize',\r\n            resizey : 'ns-resize',\r\n            resizexy: 'nwse-resize',\r\n\r\n            resizetop        : 'ns-resize',\r\n            resizeleft       : 'ew-resize',\r\n            resizebottom     : 'ns-resize',\r\n            resizeright      : 'ew-resize',\r\n            resizetopleft    : 'nwse-resize',\r\n            resizebottomright: 'nwse-resize',\r\n            resizetopright   : 'nesw-resize',\r\n            resizebottomleft : 'nesw-resize',\r\n\r\n            gesture : ''\r\n        },\r\n\r\n        actionIsEnabled = {\r\n            drag   : true,\r\n            resize : true,\r\n            gesture: true\r\n        },\r\n\r\n        // because Webkit and Opera still use 'mousewheel' event type\r\n        wheelEvent = 'onmousewheel' in document? 'mousewheel': 'wheel',\r\n\r\n        eventTypes = [\r\n            'dragstart',\r\n            'dragmove',\r\n            'draginertiastart',\r\n            'dragend',\r\n            'dragenter',\r\n            'dragleave',\r\n            'dropactivate',\r\n            'dropdeactivate',\r\n            'dropmove',\r\n            'drop',\r\n            'resizestart',\r\n            'resizemove',\r\n            'resizeinertiastart',\r\n            'resizeend',\r\n            'gesturestart',\r\n            'gesturemove',\r\n            'gestureinertiastart',\r\n            'gestureend',\r\n\r\n            'down',\r\n            'move',\r\n            'up',\r\n            'cancel',\r\n            'tap',\r\n            'doubletap',\r\n            'hold'\r\n        ],\r\n\r\n        globalEvents = {},\r\n\r\n        // Opera Mobile must be handled differently\r\n        isOperaMobile = navigator.appName == 'Opera' &&\r\n            supportsTouch &&\r\n            navigator.userAgent.match('Presto'),\r\n\r\n        // scrolling doesn't change the result of getClientRects on iOS 7\r\n        isIOS7 = (/iP(hone|od|ad)/.test(navigator.platform)\r\n                         && /OS 7[^\\d]/.test(navigator.appVersion)),\r\n\r\n        // prefix matchesSelector\r\n        prefixedMatchesSelector = 'matches' in Element.prototype?\r\n                'matches': 'webkitMatchesSelector' in Element.prototype?\r\n                    'webkitMatchesSelector': 'mozMatchesSelector' in Element.prototype?\r\n                        'mozMatchesSelector': 'oMatchesSelector' in Element.prototype?\r\n                            'oMatchesSelector': 'msMatchesSelector',\r\n\r\n        // will be polyfill function if browser is IE8\r\n        ie8MatchesSelector,\r\n\r\n        // native requestAnimationFrame or polyfill\r\n        reqFrame = realWindow.requestAnimationFrame,\r\n        cancelFrame = realWindow.cancelAnimationFrame,\r\n\r\n        // Events wrapper\r\n        events = (function () {\r\n            var useAttachEvent = ('attachEvent' in window) && !('addEventListener' in window),\r\n                addEvent       = useAttachEvent?  'attachEvent': 'addEventListener',\r\n                removeEvent    = useAttachEvent?  'detachEvent': 'removeEventListener',\r\n                on             = useAttachEvent? 'on': '',\r\n\r\n                elements          = [],\r\n                targets           = [],\r\n                attachedListeners = [];\r\n\r\n            function add (element, type, listener, useCapture) {\r\n                var elementIndex = indexOf(elements, element),\r\n                    target = targets[elementIndex];\r\n\r\n                if (!target) {\r\n                    target = {\r\n                        events: {},\r\n                        typeCount: 0\r\n                    };\r\n\r\n                    elementIndex = elements.push(element) - 1;\r\n                    targets.push(target);\r\n\r\n                    attachedListeners.push((useAttachEvent ? {\r\n                            supplied: [],\r\n                            wrapped : [],\r\n                            useCount: []\r\n                        } : null));\r\n                }\r\n\r\n                if (!target.events[type]) {\r\n                    target.events[type] = [];\r\n                    target.typeCount++;\r\n                }\r\n\r\n                if (!contains(target.events[type], listener)) {\r\n                    var ret;\r\n\r\n                    if (useAttachEvent) {\r\n                        var listeners = attachedListeners[elementIndex],\r\n                            listenerIndex = indexOf(listeners.supplied, listener);\r\n\r\n                        var wrapped = listeners.wrapped[listenerIndex] || function (event) {\r\n                            if (!event.immediatePropagationStopped) {\r\n                                event.target = event.srcElement;\r\n                                event.currentTarget = element;\r\n\r\n                                event.preventDefault = event.preventDefault || preventDef;\r\n                                event.stopPropagation = event.stopPropagation || stopProp;\r\n                                event.stopImmediatePropagation = event.stopImmediatePropagation || stopImmProp;\r\n\r\n                                if (/mouse|click/.test(event.type)) {\r\n                                    event.pageX = event.clientX + getWindow(element).document.documentElement.scrollLeft;\r\n                                    event.pageY = event.clientY + getWindow(element).document.documentElement.scrollTop;\r\n                                }\r\n\r\n                                listener(event);\r\n                            }\r\n                        };\r\n\r\n                        ret = element[addEvent](on + type, wrapped, Boolean(useCapture));\r\n\r\n                        if (listenerIndex === -1) {\r\n                            listeners.supplied.push(listener);\r\n                            listeners.wrapped.push(wrapped);\r\n                            listeners.useCount.push(1);\r\n                        }\r\n                        else {\r\n                            listeners.useCount[listenerIndex]++;\r\n                        }\r\n                    }\r\n                    else {\r\n                        ret = element[addEvent](type, listener, useCapture || false);\r\n                    }\r\n                    target.events[type].push(listener);\r\n\r\n                    return ret;\r\n                }\r\n            }\r\n\r\n            function remove (element, type, listener, useCapture) {\r\n                var i,\r\n                    elementIndex = indexOf(elements, element),\r\n                    target = targets[elementIndex],\r\n                    listeners,\r\n                    listenerIndex,\r\n                    wrapped = listener;\r\n\r\n                if (!target || !target.events) {\r\n                    return;\r\n                }\r\n\r\n                if (useAttachEvent) {\r\n                    listeners = attachedListeners[elementIndex];\r\n                    listenerIndex = indexOf(listeners.supplied, listener);\r\n                    wrapped = listeners.wrapped[listenerIndex];\r\n                }\r\n\r\n                if (type === 'all') {\r\n                    for (type in target.events) {\r\n                        if (target.events.hasOwnProperty(type)) {\r\n                            remove(element, type, 'all');\r\n                        }\r\n                    }\r\n                    return;\r\n                }\r\n\r\n                if (target.events[type]) {\r\n                    var len = target.events[type].length;\r\n\r\n                    if (listener === 'all') {\r\n                        for (i = 0; i < len; i++) {\r\n                            remove(element, type, target.events[type][i], Boolean(useCapture));\r\n                        }\r\n                        return;\r\n                    } else {\r\n                        for (i = 0; i < len; i++) {\r\n                            if (target.events[type][i] === listener) {\r\n                                element[removeEvent](on + type, wrapped, useCapture || false);\r\n                                target.events[type].splice(i, 1);\r\n\r\n                                if (useAttachEvent && listeners) {\r\n                                    listeners.useCount[listenerIndex]--;\r\n                                    if (listeners.useCount[listenerIndex] === 0) {\r\n                                        listeners.supplied.splice(listenerIndex, 1);\r\n                                        listeners.wrapped.splice(listenerIndex, 1);\r\n                                        listeners.useCount.splice(listenerIndex, 1);\r\n                                    }\r\n                                }\r\n\r\n                                break;\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                    if (target.events[type] && target.events[type].length === 0) {\r\n                        target.events[type] = null;\r\n                        target.typeCount--;\r\n                    }\r\n                }\r\n\r\n                if (!target.typeCount) {\r\n                    targets.splice(elementIndex, 1);\r\n                    elements.splice(elementIndex, 1);\r\n                    attachedListeners.splice(elementIndex, 1);\r\n                }\r\n            }\r\n\r\n            function preventDef () {\r\n                this.returnValue = false;\r\n            }\r\n\r\n            function stopProp () {\r\n                this.cancelBubble = true;\r\n            }\r\n\r\n            function stopImmProp () {\r\n                this.cancelBubble = true;\r\n                this.immediatePropagationStopped = true;\r\n            }\r\n\r\n            return {\r\n                add: add,\r\n                remove: remove,\r\n                useAttachEvent: useAttachEvent,\r\n\r\n                _elements: elements,\r\n                _targets: targets,\r\n                _attachedListeners: attachedListeners\r\n            };\r\n        }());\r\n\r\n    function blank () {}\r\n\r\n    function isElement (o) {\r\n        if (!o || (typeof o !== 'object')) { return false; }\r\n\r\n        var _window = getWindow(o) || window;\r\n\r\n        return (/object|function/.test(typeof _window.Element)\r\n            ? o instanceof _window.Element //DOM2\r\n            : o.nodeType === 1 && typeof o.nodeName === \"string\");\r\n    }\r\n    function isWindow (thing) { return thing === window || !!(thing && thing.Window) && (thing instanceof thing.Window); }\r\n    function isDocFrag (thing) { return !!thing && thing instanceof DocumentFragment; }\r\n    function isArray (thing) {\r\n        return isObject(thing)\r\n                && (typeof thing.length !== undefined)\r\n                && isFunction(thing.splice);\r\n    }\r\n    function isObject   (thing) { return !!thing && (typeof thing === 'object'); }\r\n    function isFunction (thing) { return typeof thing === 'function'; }\r\n    function isNumber   (thing) { return typeof thing === 'number'  ; }\r\n    function isBool     (thing) { return typeof thing === 'boolean' ; }\r\n    function isString   (thing) { return typeof thing === 'string'  ; }\r\n\r\n    function trySelector (value) {\r\n        if (!isString(value)) { return false; }\r\n\r\n        // an exception will be raised if it is invalid\r\n        document.querySelector(value);\r\n        return true;\r\n    }\r\n\r\n    function extend (dest, source) {\r\n        for (var prop in source) {\r\n            dest[prop] = source[prop];\r\n        }\r\n        return dest;\r\n    }\r\n\r\n    var prefixedPropREs = {\r\n      webkit: /(Movement[XY]|Radius[XY]|RotationAngle|Force)$/\r\n    };\r\n\r\n    function pointerExtend (dest, source) {\r\n        for (var prop in source) {\r\n          var deprecated = false;\r\n\r\n          // skip deprecated prefixed properties\r\n          for (var vendor in prefixedPropREs) {\r\n            if (prop.indexOf(vendor) === 0 && prefixedPropREs[vendor].test(prop)) {\r\n              deprecated = true;\r\n              break;\r\n            }\r\n          }\r\n\r\n          if (!deprecated) {\r\n            dest[prop] = source[prop];\r\n          }\r\n        }\r\n        return dest;\r\n    }\r\n\r\n    function copyCoords (dest, src) {\r\n        dest.page = dest.page || {};\r\n        dest.page.x = src.page.x;\r\n        dest.page.y = src.page.y;\r\n\r\n        dest.client = dest.client || {};\r\n        dest.client.x = src.client.x;\r\n        dest.client.y = src.client.y;\r\n\r\n        dest.timeStamp = src.timeStamp;\r\n    }\r\n\r\n    function setEventXY (targetObj, pointers, interaction) {\r\n        var pointer = (pointers.length > 1\r\n                       ? pointerAverage(pointers)\r\n                       : pointers[0]);\r\n\r\n        getPageXY(pointer, tmpXY, interaction);\r\n        targetObj.page.x = tmpXY.x;\r\n        targetObj.page.y = tmpXY.y;\r\n\r\n        getClientXY(pointer, tmpXY, interaction);\r\n        targetObj.client.x = tmpXY.x;\r\n        targetObj.client.y = tmpXY.y;\r\n\r\n        targetObj.timeStamp = new Date().getTime();\r\n    }\r\n\r\n    function setEventDeltas (targetObj, prev, cur) {\r\n        targetObj.page.x     = cur.page.x      - prev.page.x;\r\n        targetObj.page.y     = cur.page.y      - prev.page.y;\r\n        targetObj.client.x   = cur.client.x    - prev.client.x;\r\n        targetObj.client.y   = cur.client.y    - prev.client.y;\r\n        targetObj.timeStamp = new Date().getTime() - prev.timeStamp;\r\n\r\n        // set pointer velocity\r\n        var dt = Math.max(targetObj.timeStamp / 1000, 0.001);\r\n        targetObj.page.speed   = hypot(targetObj.page.x, targetObj.page.y) / dt;\r\n        targetObj.page.vx      = targetObj.page.x / dt;\r\n        targetObj.page.vy      = targetObj.page.y / dt;\r\n\r\n        targetObj.client.speed = hypot(targetObj.client.x, targetObj.page.y) / dt;\r\n        targetObj.client.vx    = targetObj.client.x / dt;\r\n        targetObj.client.vy    = targetObj.client.y / dt;\r\n    }\r\n\r\n    function isNativePointer (pointer) {\r\n        return (pointer instanceof window.Event\r\n            || (supportsTouch && window.Touch && pointer instanceof window.Touch));\r\n    }\r\n\r\n    // Get specified X/Y coords for mouse or event.touches[0]\r\n    function getXY (type, pointer, xy) {\r\n        xy = xy || {};\r\n        type = type || 'page';\r\n\r\n        xy.x = pointer[type + 'X'];\r\n        xy.y = pointer[type + 'Y'];\r\n\r\n        return xy;\r\n    }\r\n\r\n    function getPageXY (pointer, page) {\r\n        page = page || {};\r\n\r\n        // Opera Mobile handles the viewport and scrolling oddly\r\n        if (isOperaMobile && isNativePointer(pointer)) {\r\n            getXY('screen', pointer, page);\r\n\r\n            page.x += window.scrollX;\r\n            page.y += window.scrollY;\r\n        }\r\n        else {\r\n            getXY('page', pointer, page);\r\n        }\r\n\r\n        return page;\r\n    }\r\n\r\n    function getClientXY (pointer, client) {\r\n        client = client || {};\r\n\r\n        if (isOperaMobile && isNativePointer(pointer)) {\r\n            // Opera Mobile handles the viewport and scrolling oddly\r\n            getXY('screen', pointer, client);\r\n        }\r\n        else {\r\n          getXY('client', pointer, client);\r\n        }\r\n\r\n        return client;\r\n    }\r\n\r\n    function getScrollXY (win) {\r\n        win = win || window;\r\n        return {\r\n            x: win.scrollX || win.document.documentElement.scrollLeft,\r\n            y: win.scrollY || win.document.documentElement.scrollTop\r\n        };\r\n    }\r\n\r\n    function getPointerId (pointer) {\r\n        return isNumber(pointer.pointerId)? pointer.pointerId : pointer.identifier;\r\n    }\r\n\r\n    function getActualElement (element) {\r\n        return (element instanceof SVGElementInstance\r\n            ? element.correspondingUseElement\r\n            : element);\r\n    }\r\n\r\n    function getWindow (node) {\r\n        if (isWindow(node)) {\r\n            return node;\r\n        }\r\n\r\n        var rootNode = (node.ownerDocument || node);\r\n\r\n        return rootNode.defaultView || rootNode.parentWindow || window;\r\n    }\r\n\r\n    function getElementClientRect (element) {\r\n        var clientRect = (element instanceof SVGElement\r\n                            ? element.getBoundingClientRect()\r\n                            : element.getClientRects()[0]);\r\n\r\n        return clientRect && {\r\n            left  : clientRect.left,\r\n            right : clientRect.right,\r\n            top   : clientRect.top,\r\n            bottom: clientRect.bottom,\r\n            width : clientRect.width || clientRect.right - clientRect.left,\r\n            height: clientRect.height || clientRect.bottom - clientRect.top\r\n        };\r\n    }\r\n\r\n    function getElementRect (element) {\r\n        var clientRect = getElementClientRect(element);\r\n\r\n        if (!isIOS7 && clientRect) {\r\n            var scroll = getScrollXY(getWindow(element));\r\n\r\n            clientRect.left   += scroll.x;\r\n            clientRect.right  += scroll.x;\r\n            clientRect.top    += scroll.y;\r\n            clientRect.bottom += scroll.y;\r\n        }\r\n\r\n        return clientRect;\r\n    }\r\n\r\n    function getTouchPair (event) {\r\n        var touches = [];\r\n\r\n        // array of touches is supplied\r\n        if (isArray(event)) {\r\n            touches[0] = event[0];\r\n            touches[1] = event[1];\r\n        }\r\n        // an event\r\n        else {\r\n            if (event.type === 'touchend') {\r\n                if (event.touches.length === 1) {\r\n                    touches[0] = event.touches[0];\r\n                    touches[1] = event.changedTouches[0];\r\n                }\r\n                else if (event.touches.length === 0) {\r\n                    touches[0] = event.changedTouches[0];\r\n                    touches[1] = event.changedTouches[1];\r\n                }\r\n            }\r\n            else {\r\n                touches[0] = event.touches[0];\r\n                touches[1] = event.touches[1];\r\n            }\r\n        }\r\n\r\n        return touches;\r\n    }\r\n\r\n    function pointerAverage (pointers) {\r\n        var average = {\r\n            pageX  : 0,\r\n            pageY  : 0,\r\n            clientX: 0,\r\n            clientY: 0,\r\n            screenX: 0,\r\n            screenY: 0\r\n        };\r\n        var prop;\r\n\r\n        for (var i = 0; i < pointers.length; i++) {\r\n            for (prop in average) {\r\n                average[prop] += pointers[i][prop];\r\n            }\r\n        }\r\n        for (prop in average) {\r\n            average[prop] /= pointers.length;\r\n        }\r\n\r\n        return average;\r\n    }\r\n\r\n    function touchBBox (event) {\r\n        if (!event.length && !(event.touches && event.touches.length > 1)) {\r\n            return;\r\n        }\r\n\r\n        var touches = getTouchPair(event),\r\n            minX = Math.min(touches[0].pageX, touches[1].pageX),\r\n            minY = Math.min(touches[0].pageY, touches[1].pageY),\r\n            maxX = Math.max(touches[0].pageX, touches[1].pageX),\r\n            maxY = Math.max(touches[0].pageY, touches[1].pageY);\r\n\r\n        return {\r\n            x: minX,\r\n            y: minY,\r\n            left: minX,\r\n            top: minY,\r\n            width: maxX - minX,\r\n            height: maxY - minY\r\n        };\r\n    }\r\n\r\n    function touchDistance (event, deltaSource) {\r\n        deltaSource = deltaSource || defaultOptions.deltaSource;\r\n\r\n        var sourceX = deltaSource + 'X',\r\n            sourceY = deltaSource + 'Y',\r\n            touches = getTouchPair(event);\r\n\r\n\r\n        var dx = touches[0][sourceX] - touches[1][sourceX],\r\n            dy = touches[0][sourceY] - touches[1][sourceY];\r\n\r\n        return hypot(dx, dy);\r\n    }\r\n\r\n    function touchAngle (event, prevAngle, deltaSource) {\r\n        deltaSource = deltaSource || defaultOptions.deltaSource;\r\n\r\n        var sourceX = deltaSource + 'X',\r\n            sourceY = deltaSource + 'Y',\r\n            touches = getTouchPair(event),\r\n            dx = touches[0][sourceX] - touches[1][sourceX],\r\n            dy = touches[0][sourceY] - touches[1][sourceY],\r\n            angle = 180 * Math.atan(dy / dx) / Math.PI;\r\n\r\n        if (isNumber(prevAngle)) {\r\n            var dr = angle - prevAngle,\r\n                drClamped = dr % 360;\r\n\r\n            if (drClamped > 315) {\r\n                angle -= 360 + (angle / 360)|0 * 360;\r\n            }\r\n            else if (drClamped > 135) {\r\n                angle -= 180 + (angle / 360)|0 * 360;\r\n            }\r\n            else if (drClamped < -315) {\r\n                angle += 360 + (angle / 360)|0 * 360;\r\n            }\r\n            else if (drClamped < -135) {\r\n                angle += 180 + (angle / 360)|0 * 360;\r\n            }\r\n        }\r\n\r\n        return  angle;\r\n    }\r\n\r\n    function getOriginXY (interactable, element) {\r\n        var origin = interactable\r\n                ? interactable.options.origin\r\n                : defaultOptions.origin;\r\n\r\n        if (origin === 'parent') {\r\n            origin = parentElement(element);\r\n        }\r\n        else if (origin === 'self') {\r\n            origin = interactable.getRect(element);\r\n        }\r\n        else if (trySelector(origin)) {\r\n            origin = closest(element, origin) || { x: 0, y: 0 };\r\n        }\r\n\r\n        if (isFunction(origin)) {\r\n            origin = origin(interactable && element);\r\n        }\r\n\r\n        if (isElement(origin))  {\r\n            origin = getElementRect(origin);\r\n        }\r\n\r\n        origin.x = ('x' in origin)? origin.x : origin.left;\r\n        origin.y = ('y' in origin)? origin.y : origin.top;\r\n\r\n        return origin;\r\n    }\r\n\r\n    // http://stackoverflow.com/a/5634528/2280888\r\n    function _getQBezierValue(t, p1, p2, p3) {\r\n        var iT = 1 - t;\r\n        return iT * iT * p1 + 2 * iT * t * p2 + t * t * p3;\r\n    }\r\n\r\n    function getQuadraticCurvePoint(startX, startY, cpX, cpY, endX, endY, position) {\r\n        return {\r\n            x:  _getQBezierValue(position, startX, cpX, endX),\r\n            y:  _getQBezierValue(position, startY, cpY, endY)\r\n        };\r\n    }\r\n\r\n    // http://gizma.com/easing/\r\n    function easeOutQuad (t, b, c, d) {\r\n        t /= d;\r\n        return -c * t*(t-2) + b;\r\n    }\r\n\r\n    function nodeContains (parent, child) {\r\n        while (child) {\r\n            if (child === parent) {\r\n                return true;\r\n            }\r\n\r\n            child = child.parentNode;\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    function closest (child, selector) {\r\n        var parent = parentElement(child);\r\n\r\n        while (isElement(parent)) {\r\n            if (matchesSelector(parent, selector)) { return parent; }\r\n\r\n            parent = parentElement(parent);\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    function parentElement (node) {\r\n        var parent = node.parentNode;\r\n\r\n        if (isDocFrag(parent)) {\r\n            // skip past #shado-root fragments\r\n            while ((parent = parent.host) && isDocFrag(parent)) {}\r\n\r\n            return parent;\r\n        }\r\n\r\n        return parent;\r\n    }\r\n\r\n    function inContext (interactable, element) {\r\n        return interactable._context === element.ownerDocument\r\n                || nodeContains(interactable._context, element);\r\n    }\r\n\r\n    function testIgnore (interactable, interactableElement, element) {\r\n        var ignoreFrom = interactable.options.ignoreFrom;\r\n\r\n        if (!ignoreFrom || !isElement(element)) { return false; }\r\n\r\n        if (isString(ignoreFrom)) {\r\n            return matchesUpTo(element, ignoreFrom, interactableElement);\r\n        }\r\n        else if (isElement(ignoreFrom)) {\r\n            return nodeContains(ignoreFrom, element);\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    function testAllow (interactable, interactableElement, element) {\r\n        var allowFrom = interactable.options.allowFrom;\r\n\r\n        if (!allowFrom) { return true; }\r\n\r\n        if (!isElement(element)) { return false; }\r\n\r\n        if (isString(allowFrom)) {\r\n            return matchesUpTo(element, allowFrom, interactableElement);\r\n        }\r\n        else if (isElement(allowFrom)) {\r\n            return nodeContains(allowFrom, element);\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    function checkAxis (axis, interactable) {\r\n        if (!interactable) { return false; }\r\n\r\n        var thisAxis = interactable.options.drag.axis;\r\n\r\n        return (axis === 'xy' || thisAxis === 'xy' || thisAxis === axis);\r\n    }\r\n\r\n    function checkSnap (interactable, action) {\r\n        var options = interactable.options;\r\n\r\n        if (/^resize/.test(action)) {\r\n            action = 'resize';\r\n        }\r\n\r\n        return options[action].snap && options[action].snap.enabled;\r\n    }\r\n\r\n    function checkRestrict (interactable, action) {\r\n        var options = interactable.options;\r\n\r\n        if (/^resize/.test(action)) {\r\n            action = 'resize';\r\n        }\r\n\r\n        return  options[action].restrict && options[action].restrict.enabled;\r\n    }\r\n\r\n    function checkAutoScroll (interactable, action) {\r\n        var options = interactable.options;\r\n\r\n        if (/^resize/.test(action)) {\r\n            action = 'resize';\r\n        }\r\n\r\n        return  options[action].autoScroll && options[action].autoScroll.enabled;\r\n    }\r\n\r\n    function withinInteractionLimit (interactable, element, action) {\r\n        var options = interactable.options,\r\n            maxActions = options[action.name].max,\r\n            maxPerElement = options[action.name].maxPerElement,\r\n            activeInteractions = 0,\r\n            targetCount = 0,\r\n            targetElementCount = 0;\r\n\r\n        for (var i = 0, len = interactions.length; i < len; i++) {\r\n            var interaction = interactions[i],\r\n                otherAction = interaction.prepared.name,\r\n                active = interaction.interacting();\r\n\r\n            if (!active) { continue; }\r\n\r\n            activeInteractions++;\r\n\r\n            if (activeInteractions >= maxInteractions) {\r\n                return false;\r\n            }\r\n\r\n            if (interaction.target !== interactable) { continue; }\r\n\r\n            targetCount += (otherAction === action.name)|0;\r\n\r\n            if (targetCount >= maxActions) {\r\n                return false;\r\n            }\r\n\r\n            if (interaction.element === element) {\r\n                targetElementCount++;\r\n\r\n                if (otherAction !== action.name || targetElementCount >= maxPerElement) {\r\n                    return false;\r\n                }\r\n            }\r\n        }\r\n\r\n        return maxInteractions > 0;\r\n    }\r\n\r\n    // Test for the element that's \"above\" all other qualifiers\r\n    function indexOfDeepestElement (elements) {\r\n        var dropzone,\r\n            deepestZone = elements[0],\r\n            index = deepestZone? 0: -1,\r\n            parent,\r\n            deepestZoneParents = [],\r\n            dropzoneParents = [],\r\n            child,\r\n            i,\r\n            n;\r\n\r\n        for (i = 1; i < elements.length; i++) {\r\n            dropzone = elements[i];\r\n\r\n            // an element might belong to multiple selector dropzones\r\n            if (!dropzone || dropzone === deepestZone) {\r\n                continue;\r\n            }\r\n\r\n            if (!deepestZone) {\r\n                deepestZone = dropzone;\r\n                index = i;\r\n                continue;\r\n            }\r\n\r\n            // check if the deepest or current are document.documentElement or document.rootElement\r\n            // - if the current dropzone is, do nothing and continue\r\n            if (dropzone.parentNode === dropzone.ownerDocument) {\r\n                continue;\r\n            }\r\n            // - if deepest is, update with the current dropzone and continue to next\r\n            else if (deepestZone.parentNode === dropzone.ownerDocument) {\r\n                deepestZone = dropzone;\r\n                index = i;\r\n                continue;\r\n            }\r\n\r\n            if (!deepestZoneParents.length) {\r\n                parent = deepestZone;\r\n                while (parent.parentNode && parent.parentNode !== parent.ownerDocument) {\r\n                    deepestZoneParents.unshift(parent);\r\n                    parent = parent.parentNode;\r\n                }\r\n            }\r\n\r\n            // if this element is an svg element and the current deepest is\r\n            // an HTMLElement\r\n            if (deepestZone instanceof HTMLElement\r\n                && dropzone instanceof SVGElement\r\n                && !(dropzone instanceof SVGSVGElement)) {\r\n\r\n                if (dropzone === deepestZone.parentNode) {\r\n                    continue;\r\n                }\r\n\r\n                parent = dropzone.ownerSVGElement;\r\n            }\r\n            else {\r\n                parent = dropzone;\r\n            }\r\n\r\n            dropzoneParents = [];\r\n\r\n            while (parent.parentNode !== parent.ownerDocument) {\r\n                dropzoneParents.unshift(parent);\r\n                parent = parent.parentNode;\r\n            }\r\n\r\n            n = 0;\r\n\r\n            // get (position of last common ancestor) + 1\r\n            while (dropzoneParents[n] && dropzoneParents[n] === deepestZoneParents[n]) {\r\n                n++;\r\n            }\r\n\r\n            var parents = [\r\n                dropzoneParents[n - 1],\r\n                dropzoneParents[n],\r\n                deepestZoneParents[n]\r\n            ];\r\n\r\n            child = parents[0].lastChild;\r\n\r\n            while (child) {\r\n                if (child === parents[1]) {\r\n                    deepestZone = dropzone;\r\n                    index = i;\r\n                    deepestZoneParents = [];\r\n\r\n                    break;\r\n                }\r\n                else if (child === parents[2]) {\r\n                    break;\r\n                }\r\n\r\n                child = child.previousSibling;\r\n            }\r\n        }\r\n\r\n        return index;\r\n    }\r\n\r\n    function Interaction () {\r\n        this.target          = null; // current interactable being interacted with\r\n        this.element         = null; // the target element of the interactable\r\n        this.dropTarget      = null; // the dropzone a drag target might be dropped into\r\n        this.dropElement     = null; // the element at the time of checking\r\n        this.prevDropTarget  = null; // the dropzone that was recently dragged away from\r\n        this.prevDropElement = null; // the element at the time of checking\r\n\r\n        this.prepared        = {     // action that's ready to be fired on next move event\r\n            name : null,\r\n            axis : null,\r\n            edges: null\r\n        };\r\n\r\n        this.matches         = [];   // all selectors that are matched by target element\r\n        this.matchElements   = [];   // corresponding elements\r\n\r\n        this.inertiaStatus = {\r\n            active       : false,\r\n            smoothEnd    : false,\r\n            ending       : false,\r\n\r\n            startEvent: null,\r\n            upCoords: {},\r\n\r\n            xe: 0, ye: 0,\r\n            sx: 0, sy: 0,\r\n\r\n            t0: 0,\r\n            vx0: 0, vys: 0,\r\n            duration: 0,\r\n\r\n            resumeDx: 0,\r\n            resumeDy: 0,\r\n\r\n            lambda_v0: 0,\r\n            one_ve_v0: 0,\r\n            i  : null\r\n        };\r\n\r\n        if (isFunction(Function.prototype.bind)) {\r\n            this.boundInertiaFrame = this.inertiaFrame.bind(this);\r\n            this.boundSmoothEndFrame = this.smoothEndFrame.bind(this);\r\n        }\r\n        else {\r\n            var that = this;\r\n\r\n            this.boundInertiaFrame = function () { return that.inertiaFrame(); };\r\n            this.boundSmoothEndFrame = function () { return that.smoothEndFrame(); };\r\n        }\r\n\r\n        this.activeDrops = {\r\n            dropzones: [],      // the dropzones that are mentioned below\r\n            elements : [],      // elements of dropzones that accept the target draggable\r\n            rects    : []       // the rects of the elements mentioned above\r\n        };\r\n\r\n        // keep track of added pointers\r\n        this.pointers    = [];\r\n        this.pointerIds  = [];\r\n        this.downTargets = [];\r\n        this.downTimes   = [];\r\n        this.holdTimers  = [];\r\n\r\n        // Previous native pointer move event coordinates\r\n        this.prevCoords = {\r\n            page     : { x: 0, y: 0 },\r\n            client   : { x: 0, y: 0 },\r\n            timeStamp: 0\r\n        };\r\n        // current native pointer move event coordinates\r\n        this.curCoords = {\r\n            page     : { x: 0, y: 0 },\r\n            client   : { x: 0, y: 0 },\r\n            timeStamp: 0\r\n        };\r\n\r\n        // Starting InteractEvent pointer coordinates\r\n        this.startCoords = {\r\n            page     : { x: 0, y: 0 },\r\n            client   : { x: 0, y: 0 },\r\n            timeStamp: 0\r\n        };\r\n\r\n        // Change in coordinates and time of the pointer\r\n        this.pointerDelta = {\r\n            page     : { x: 0, y: 0, vx: 0, vy: 0, speed: 0 },\r\n            client   : { x: 0, y: 0, vx: 0, vy: 0, speed: 0 },\r\n            timeStamp: 0\r\n        };\r\n\r\n        this.downEvent   = null;    // pointerdown/mousedown/touchstart event\r\n        this.downPointer = {};\r\n\r\n        this._eventTarget    = null;\r\n        this._curEventTarget = null;\r\n\r\n        this.prevEvent = null;      // previous action event\r\n        this.tapTime   = 0;         // time of the most recent tap event\r\n        this.prevTap   = null;\r\n\r\n        this.startOffset    = { left: 0, right: 0, top: 0, bottom: 0 };\r\n        this.restrictOffset = { left: 0, right: 0, top: 0, bottom: 0 };\r\n        this.snapOffsets    = [];\r\n\r\n        this.gesture = {\r\n            start: { x: 0, y: 0 },\r\n\r\n            startDistance: 0,   // distance between two touches of touchStart\r\n            prevDistance : 0,\r\n            distance     : 0,\r\n\r\n            scale: 1,           // gesture.distance / gesture.startDistance\r\n\r\n            startAngle: 0,      // angle of line joining two touches\r\n            prevAngle : 0       // angle of the previous gesture event\r\n        };\r\n\r\n        this.snapStatus = {\r\n            x       : 0, y       : 0,\r\n            dx      : 0, dy      : 0,\r\n            realX   : 0, realY   : 0,\r\n            snappedX: 0, snappedY: 0,\r\n            targets : [],\r\n            locked  : false,\r\n            changed : false\r\n        };\r\n\r\n        this.restrictStatus = {\r\n            dx         : 0, dy         : 0,\r\n            restrictedX: 0, restrictedY: 0,\r\n            snap       : null,\r\n            restricted : false,\r\n            changed    : false\r\n        };\r\n\r\n        this.restrictStatus.snap = this.snapStatus;\r\n\r\n        this.pointerIsDown   = false;\r\n        this.pointerWasMoved = false;\r\n        this.gesturing       = false;\r\n        this.dragging        = false;\r\n        this.resizing        = false;\r\n        this.resizeAxes      = 'xy';\r\n\r\n        this.mouse = false;\r\n\r\n        interactions.push(this);\r\n    }\r\n\r\n    Interaction.prototype = {\r\n        getPageXY  : function (pointer, xy) { return   getPageXY(pointer, xy, this); },\r\n        getClientXY: function (pointer, xy) { return getClientXY(pointer, xy, this); },\r\n        setEventXY : function (target, ptr) { return  setEventXY(target, ptr, this); },\r\n\r\n        pointerOver: function (pointer, event, eventTarget) {\r\n            if (this.prepared.name || !this.mouse) { return; }\r\n\r\n            var curMatches = [],\r\n                curMatchElements = [],\r\n                prevTargetElement = this.element;\r\n\r\n            this.addPointer(pointer);\r\n\r\n            if (this.target\r\n                && (testIgnore(this.target, this.element, eventTarget)\r\n                    || !testAllow(this.target, this.element, eventTarget))) {\r\n                // if the eventTarget should be ignored or shouldn't be allowed\r\n                // clear the previous target\r\n                this.target = null;\r\n                this.element = null;\r\n                this.matches = [];\r\n                this.matchElements = [];\r\n            }\r\n\r\n            var elementInteractable = interactables.get(eventTarget),\r\n                elementAction = (elementInteractable\r\n                                 && !testIgnore(elementInteractable, eventTarget, eventTarget)\r\n                                 && testAllow(elementInteractable, eventTarget, eventTarget)\r\n                                 && validateAction(\r\n                                     elementInteractable.getAction(pointer, event, this, eventTarget),\r\n                                     elementInteractable));\r\n\r\n            if (elementAction && !withinInteractionLimit(elementInteractable, eventTarget, elementAction)) {\r\n                 elementAction = null;\r\n            }\r\n\r\n            function pushCurMatches (interactable, selector) {\r\n                if (interactable\r\n                    && inContext(interactable, eventTarget)\r\n                    && !testIgnore(interactable, eventTarget, eventTarget)\r\n                    && testAllow(interactable, eventTarget, eventTarget)\r\n                    && matchesSelector(eventTarget, selector)) {\r\n\r\n                    curMatches.push(interactable);\r\n                    curMatchElements.push(eventTarget);\r\n                }\r\n            }\r\n\r\n            if (elementAction) {\r\n                this.target = elementInteractable;\r\n                this.element = eventTarget;\r\n                this.matches = [];\r\n                this.matchElements = [];\r\n            }\r\n            else {\r\n                interactables.forEachSelector(pushCurMatches);\r\n\r\n                if (this.validateSelector(pointer, event, curMatches, curMatchElements)) {\r\n                    this.matches = curMatches;\r\n                    this.matchElements = curMatchElements;\r\n\r\n                    this.pointerHover(pointer, event, this.matches, this.matchElements);\r\n                    events.add(eventTarget,\r\n                                        PointerEvent? pEventTypes.move : 'mousemove',\r\n                                        listeners.pointerHover);\r\n                }\r\n                else if (this.target) {\r\n                    if (nodeContains(prevTargetElement, eventTarget)) {\r\n                        this.pointerHover(pointer, event, this.matches, this.matchElements);\r\n                        events.add(this.element,\r\n                                            PointerEvent? pEventTypes.move : 'mousemove',\r\n                                            listeners.pointerHover);\r\n                    }\r\n                    else {\r\n                        this.target = null;\r\n                        this.element = null;\r\n                        this.matches = [];\r\n                        this.matchElements = [];\r\n                    }\r\n                }\r\n            }\r\n        },\r\n\r\n        // Check what action would be performed on pointerMove target if a mouse\r\n        // button were pressed and change the cursor accordingly\r\n        pointerHover: function (pointer, event, eventTarget, curEventTarget, matches, matchElements) {\r\n            var target = this.target;\r\n\r\n            if (!this.prepared.name && this.mouse) {\r\n\r\n                var action;\r\n\r\n                // update pointer coords for defaultActionChecker to use\r\n                this.setEventXY(this.curCoords, [pointer]);\r\n\r\n                if (matches) {\r\n                    action = this.validateSelector(pointer, event, matches, matchElements);\r\n                }\r\n                else if (target) {\r\n                    action = validateAction(target.getAction(this.pointers[0], event, this, this.element), this.target);\r\n                }\r\n\r\n                if (target && target.options.styleCursor) {\r\n                    if (action) {\r\n                        target._doc.documentElement.style.cursor = getActionCursor(action);\r\n                    }\r\n                    else {\r\n                        target._doc.documentElement.style.cursor = '';\r\n                    }\r\n                }\r\n            }\r\n            else if (this.prepared.name) {\r\n                this.checkAndPreventDefault(event, target, this.element);\r\n            }\r\n        },\r\n\r\n        pointerOut: function (pointer, event, eventTarget) {\r\n            if (this.prepared.name) { return; }\r\n\r\n            // Remove temporary event listeners for selector Interactables\r\n            if (!interactables.get(eventTarget)) {\r\n                events.remove(eventTarget,\r\n                                       PointerEvent? pEventTypes.move : 'mousemove',\r\n                                       listeners.pointerHover);\r\n            }\r\n\r\n            if (this.target && this.target.options.styleCursor && !this.interacting()) {\r\n                this.target._doc.documentElement.style.cursor = '';\r\n            }\r\n        },\r\n\r\n        selectorDown: function (pointer, event, eventTarget, curEventTarget) {\r\n            var that = this,\r\n                // copy event to be used in timeout for IE8\r\n                eventCopy = events.useAttachEvent? extend({}, event) : event,\r\n                element = eventTarget,\r\n                pointerIndex = this.addPointer(pointer),\r\n                action;\r\n\r\n            this.holdTimers[pointerIndex] = setTimeout(function () {\r\n                that.pointerHold(events.useAttachEvent? eventCopy : pointer, eventCopy, eventTarget, curEventTarget);\r\n            }, defaultOptions._holdDuration);\r\n\r\n            this.pointerIsDown = true;\r\n\r\n            // Check if the down event hits the current inertia target\r\n            if (this.inertiaStatus.active && this.target.selector) {\r\n                // climb up the DOM tree from the event target\r\n                while (isElement(element)) {\r\n\r\n                    // if this element is the current inertia target element\r\n                    if (element === this.element\r\n                        // and the prospective action is the same as the ongoing one\r\n                        && validateAction(this.target.getAction(pointer, event, this, this.element), this.target).name === this.prepared.name) {\r\n\r\n                        // stop inertia so that the next move will be a normal one\r\n                        cancelFrame(this.inertiaStatus.i);\r\n                        this.inertiaStatus.active = false;\r\n\r\n                        this.collectEventTargets(pointer, event, eventTarget, 'down');\r\n                        return;\r\n                    }\r\n                    element = parentElement(element);\r\n                }\r\n            }\r\n\r\n            // do nothing if interacting\r\n            if (this.interacting()) {\r\n                this.collectEventTargets(pointer, event, eventTarget, 'down');\r\n                return;\r\n            }\r\n\r\n            function pushMatches (interactable, selector, context) {\r\n                var elements = ie8MatchesSelector\r\n                    ? context.querySelectorAll(selector)\r\n                    : undefined;\r\n\r\n                if (inContext(interactable, element)\r\n                    && !testIgnore(interactable, element, eventTarget)\r\n                    && testAllow(interactable, element, eventTarget)\r\n                    && matchesSelector(element, selector, elements)) {\r\n\r\n                    that.matches.push(interactable);\r\n                    that.matchElements.push(element);\r\n                }\r\n            }\r\n\r\n            // update pointer coords for defaultActionChecker to use\r\n            this.setEventXY(this.curCoords, [pointer]);\r\n            this.downEvent = event;\r\n\r\n            while (isElement(element) && !action) {\r\n                this.matches = [];\r\n                this.matchElements = [];\r\n\r\n                interactables.forEachSelector(pushMatches);\r\n\r\n                action = this.validateSelector(pointer, event, this.matches, this.matchElements);\r\n                element = parentElement(element);\r\n            }\r\n\r\n            if (action) {\r\n                this.prepared.name  = action.name;\r\n                this.prepared.axis  = action.axis;\r\n                this.prepared.edges = action.edges;\r\n\r\n                this.collectEventTargets(pointer, event, eventTarget, 'down');\r\n\r\n                return this.pointerDown(pointer, event, eventTarget, curEventTarget, action);\r\n            }\r\n            else {\r\n                // do these now since pointerDown isn't being called from here\r\n                this.downTimes[pointerIndex] = new Date().getTime();\r\n                this.downTargets[pointerIndex] = eventTarget;\r\n                pointerExtend(this.downPointer, pointer);\r\n\r\n                copyCoords(this.prevCoords, this.curCoords);\r\n                this.pointerWasMoved = false;\r\n            }\r\n\r\n            this.collectEventTargets(pointer, event, eventTarget, 'down');\r\n        },\r\n\r\n        // Determine action to be performed on next pointerMove and add appropriate\r\n        // style and event Listeners\r\n        pointerDown: function (pointer, event, eventTarget, curEventTarget, forceAction) {\r\n            if (!forceAction && !this.inertiaStatus.active && this.pointerWasMoved && this.prepared.name) {\r\n                this.checkAndPreventDefault(event, this.target, this.element);\r\n\r\n                return;\r\n            }\r\n\r\n            this.pointerIsDown = true;\r\n            this.downEvent = event;\r\n\r\n            var pointerIndex = this.addPointer(pointer),\r\n                action;\r\n\r\n            // If it is the second touch of a multi-touch gesture, keep the\r\n            // target the same and get a new action if a target was set by the\r\n            // first touch\r\n            if (this.pointerIds.length > 1 && this.target._element === this.element) {\r\n                var newAction = validateAction(forceAction || this.target.getAction(pointer, event, this, this.element), this.target);\r\n\r\n                if (withinInteractionLimit(this.target, this.element, newAction)) {\r\n                    action = newAction;\r\n                }\r\n\r\n                this.prepared.name = null;\r\n            }\r\n            // Otherwise, set the target if there is no action prepared\r\n            else if (!this.prepared.name) {\r\n                var interactable = interactables.get(curEventTarget);\r\n\r\n                if (interactable\r\n                    && !testIgnore(interactable, curEventTarget, eventTarget)\r\n                    && testAllow(interactable, curEventTarget, eventTarget)\r\n                    && (action = validateAction(forceAction || interactable.getAction(pointer, event, this, curEventTarget), interactable, eventTarget))\r\n                    && withinInteractionLimit(interactable, curEventTarget, action)) {\r\n                    this.target = interactable;\r\n                    this.element = curEventTarget;\r\n                }\r\n            }\r\n\r\n            var target = this.target,\r\n                options = target && target.options;\r\n\r\n            if (target && (forceAction || !this.prepared.name)) {\r\n                action = action || validateAction(forceAction || target.getAction(pointer, event, this, curEventTarget), target, this.element);\r\n\r\n                this.setEventXY(this.startCoords, this.pointers);\r\n\r\n                if (!action) { return; }\r\n\r\n                if (options.styleCursor) {\r\n                    target._doc.documentElement.style.cursor = getActionCursor(action);\r\n                }\r\n\r\n                this.resizeAxes = action.name === 'resize'? action.axis : null;\r\n\r\n                if (action === 'gesture' && this.pointerIds.length < 2) {\r\n                    action = null;\r\n                }\r\n\r\n                this.prepared.name  = action.name;\r\n                this.prepared.axis  = action.axis;\r\n                this.prepared.edges = action.edges;\r\n\r\n                this.snapStatus.snappedX = this.snapStatus.snappedY =\r\n                    this.restrictStatus.restrictedX = this.restrictStatus.restrictedY = NaN;\r\n\r\n                this.downTimes[pointerIndex] = new Date().getTime();\r\n                this.downTargets[pointerIndex] = eventTarget;\r\n                pointerExtend(this.downPointer, pointer);\r\n\r\n                copyCoords(this.prevCoords, this.startCoords);\r\n                this.pointerWasMoved = false;\r\n\r\n                this.checkAndPreventDefault(event, target, this.element);\r\n            }\r\n            // if inertia is active try to resume action\r\n            else if (this.inertiaStatus.active\r\n                && curEventTarget === this.element\r\n                && validateAction(target.getAction(pointer, event, this, this.element), target).name === this.prepared.name) {\r\n\r\n                cancelFrame(this.inertiaStatus.i);\r\n                this.inertiaStatus.active = false;\r\n\r\n                this.checkAndPreventDefault(event, target, this.element);\r\n            }\r\n        },\r\n\r\n        setModifications: function (coords, preEnd) {\r\n            var target         = this.target,\r\n                shouldMove     = true,\r\n                shouldSnap     = checkSnap(target, this.prepared.name)     && (!target.options[this.prepared.name].snap.endOnly     || preEnd),\r\n                shouldRestrict = checkRestrict(target, this.prepared.name) && (!target.options[this.prepared.name].restrict.endOnly || preEnd);\r\n\r\n            if (shouldSnap    ) { this.setSnapping   (coords); } else { this.snapStatus    .locked     = false; }\r\n            if (shouldRestrict) { this.setRestriction(coords); } else { this.restrictStatus.restricted = false; }\r\n\r\n            if (shouldSnap && this.snapStatus.locked && !this.snapStatus.changed) {\r\n                shouldMove = shouldRestrict && this.restrictStatus.restricted && this.restrictStatus.changed;\r\n            }\r\n            else if (shouldRestrict && this.restrictStatus.restricted && !this.restrictStatus.changed) {\r\n                shouldMove = false;\r\n            }\r\n\r\n            return shouldMove;\r\n        },\r\n\r\n        setStartOffsets: function (action, interactable, element) {\r\n            var rect = interactable.getRect(element),\r\n                origin = getOriginXY(interactable, element),\r\n                snap = interactable.options[this.prepared.name].snap,\r\n                restrict = interactable.options[this.prepared.name].restrict,\r\n                width, height;\r\n\r\n            if (rect) {\r\n                this.startOffset.left = this.startCoords.page.x - rect.left;\r\n                this.startOffset.top  = this.startCoords.page.y - rect.top;\r\n\r\n                this.startOffset.right  = rect.right  - this.startCoords.page.x;\r\n                this.startOffset.bottom = rect.bottom - this.startCoords.page.y;\r\n\r\n                if ('width' in rect) { width = rect.width; }\r\n                else { width = rect.right - rect.left; }\r\n                if ('height' in rect) { height = rect.height; }\r\n                else { height = rect.bottom - rect.top; }\r\n            }\r\n            else {\r\n                this.startOffset.left = this.startOffset.top = this.startOffset.right = this.startOffset.bottom = 0;\r\n            }\r\n\r\n            this.snapOffsets.splice(0);\r\n\r\n            var snapOffset = snap && snap.offset === 'startCoords'\r\n                                ? {\r\n                                    x: this.startCoords.page.x - origin.x,\r\n                                    y: this.startCoords.page.y - origin.y\r\n                                }\r\n                                : snap && snap.offset || { x: 0, y: 0 };\r\n\r\n            if (rect && snap && snap.relativePoints && snap.relativePoints.length) {\r\n                for (var i = 0; i < snap.relativePoints.length; i++) {\r\n                    this.snapOffsets.push({\r\n                        x: this.startOffset.left - (width  * snap.relativePoints[i].x) + snapOffset.x,\r\n                        y: this.startOffset.top  - (height * snap.relativePoints[i].y) + snapOffset.y\r\n                    });\r\n                }\r\n            }\r\n            else {\r\n                this.snapOffsets.push(snapOffset);\r\n            }\r\n\r\n            if (rect && restrict.elementRect) {\r\n                this.restrictOffset.left = this.startOffset.left - (width  * restrict.elementRect.left);\r\n                this.restrictOffset.top  = this.startOffset.top  - (height * restrict.elementRect.top);\r\n\r\n                this.restrictOffset.right  = this.startOffset.right  - (width  * (1 - restrict.elementRect.right));\r\n                this.restrictOffset.bottom = this.startOffset.bottom - (height * (1 - restrict.elementRect.bottom));\r\n            }\r\n            else {\r\n                this.restrictOffset.left = this.restrictOffset.top = this.restrictOffset.right = this.restrictOffset.bottom = 0;\r\n            }\r\n        },\r\n\r\n        /*\\\r\n         * Interaction.start\r\n         [ method ]\r\n         *\r\n         * Start an action with the given Interactable and Element as tartgets. The\r\n         * action must be enabled for the target Interactable and an appropriate number\r\n         * of pointers must be held down  1 for drag/resize, 2 for gesture.\r\n         *\r\n         * Use it with `interactable.<action>able({ manualStart: false })` to always\r\n         * [start actions manually](https://github.com/taye/interact.js/issues/114)\r\n         *\r\n         - action       (object)  The action to be performed - drag, resize, etc.\r\n         - interactable (Interactable) The Interactable to target\r\n         - element      (Element) The DOM Element to target\r\n         = (object) interact\r\n         **\r\n         | interact(target)\r\n         |   .draggable({\r\n         |     // disable the default drag start by down->move\r\n         |     manualStart: true\r\n         |   })\r\n         |   // start dragging after the user holds the pointer down\r\n         |   .on('hold', function (event) {\r\n         |     var interaction = event.interaction;\r\n         |\r\n         |     if (!interaction.interacting()) {\r\n         |       interaction.start({ name: 'drag' },\r\n         |                         event.interactable,\r\n         |                         event.currentTarget);\r\n         |     }\r\n         | });\r\n        \\*/\r\n        start: function (action, interactable, element) {\r\n            if (this.interacting()\r\n                || !this.pointerIsDown\r\n                || this.pointerIds.length < (action.name === 'gesture'? 2 : 1)) {\r\n                return;\r\n            }\r\n\r\n            // if this interaction had been removed after stopping\r\n            // add it back\r\n            if (indexOf(interactions, this) === -1) {\r\n                interactions.push(this);\r\n            }\r\n\r\n            // set the startCoords if there was no prepared action\r\n            if (!this.prepared.name) {\r\n                this.setEventXY(this.startCoords);\r\n            }\r\n\r\n            this.prepared.name  = action.name;\r\n            this.prepared.axis  = action.axis;\r\n            this.prepared.edges = action.edges;\r\n            this.target         = interactable;\r\n            this.element        = element;\r\n\r\n            this.setStartOffsets(action.name, interactable, element);\r\n            this.setModifications(this.startCoords.page);\r\n\r\n            this.prevEvent = this[this.prepared.name + 'Start'](this.downEvent);\r\n        },\r\n\r\n        pointerMove: function (pointer, event, eventTarget, curEventTarget, preEnd) {\r\n            if (this.inertiaStatus.active) {\r\n                var pageUp   = this.inertiaStatus.upCoords.page;\r\n                var clientUp = this.inertiaStatus.upCoords.client;\r\n\r\n                var inertiaPosition = {\r\n                    pageX  : pageUp.x   + this.inertiaStatus.sx,\r\n                    pageY  : pageUp.y   + this.inertiaStatus.sy,\r\n                    clientX: clientUp.x + this.inertiaStatus.sx,\r\n                    clientY: clientUp.y + this.inertiaStatus.sy\r\n                };\r\n\r\n                this.setEventXY(this.curCoords, [inertiaPosition]);\r\n            }\r\n            else {\r\n                this.recordPointer(pointer);\r\n                this.setEventXY(this.curCoords, this.pointers);\r\n            }\r\n\r\n            var duplicateMove = (this.curCoords.page.x === this.prevCoords.page.x\r\n                                 && this.curCoords.page.y === this.prevCoords.page.y\r\n                                 && this.curCoords.client.x === this.prevCoords.client.x\r\n                                 && this.curCoords.client.y === this.prevCoords.client.y);\r\n\r\n            var dx, dy,\r\n                pointerIndex = this.mouse? 0 : indexOf(this.pointerIds, getPointerId(pointer));\r\n\r\n            // register movement greater than pointerMoveTolerance\r\n            if (this.pointerIsDown && !this.pointerWasMoved) {\r\n                dx = this.curCoords.client.x - this.startCoords.client.x;\r\n                dy = this.curCoords.client.y - this.startCoords.client.y;\r\n\r\n                this.pointerWasMoved = hypot(dx, dy) > pointerMoveTolerance;\r\n            }\r\n\r\n            if (!duplicateMove && (!this.pointerIsDown || this.pointerWasMoved)) {\r\n                if (this.pointerIsDown) {\r\n                    clearTimeout(this.holdTimers[pointerIndex]);\r\n                }\r\n\r\n                this.collectEventTargets(pointer, event, eventTarget, 'move');\r\n            }\r\n\r\n            if (!this.pointerIsDown) { return; }\r\n\r\n            if (duplicateMove && this.pointerWasMoved && !preEnd) {\r\n                this.checkAndPreventDefault(event, this.target, this.element);\r\n                return;\r\n            }\r\n\r\n            // set pointer coordinate, time changes and speeds\r\n            setEventDeltas(this.pointerDelta, this.prevCoords, this.curCoords);\r\n\r\n            if (!this.prepared.name) { return; }\r\n\r\n            if (this.pointerWasMoved\r\n                // ignore movement while inertia is active\r\n                && (!this.inertiaStatus.active || (pointer instanceof InteractEvent && /inertiastart/.test(pointer.type)))) {\r\n\r\n                // if just starting an action, calculate the pointer speed now\r\n                if (!this.interacting()) {\r\n                    setEventDeltas(this.pointerDelta, this.prevCoords, this.curCoords);\r\n\r\n                    // check if a drag is in the correct axis\r\n                    if (this.prepared.name === 'drag') {\r\n                        var absX = Math.abs(dx),\r\n                            absY = Math.abs(dy),\r\n                            targetAxis = this.target.options.drag.axis,\r\n                            axis = (absX > absY ? 'x' : absX < absY ? 'y' : 'xy');\r\n\r\n                        // if the movement isn't in the axis of the interactable\r\n                        if (axis !== 'xy' && targetAxis !== 'xy' && targetAxis !== axis) {\r\n                            // cancel the prepared action\r\n                            this.prepared.name = null;\r\n\r\n                            // then try to get a drag from another ineractable\r\n\r\n                            var element = eventTarget;\r\n\r\n                            // check element interactables\r\n                            while (isElement(element)) {\r\n                                var elementInteractable = interactables.get(element);\r\n\r\n                                if (elementInteractable\r\n                                    && elementInteractable !== this.target\r\n                                    && !elementInteractable.options.drag.manualStart\r\n                                    && elementInteractable.getAction(this.downPointer, this.downEvent, this, element).name === 'drag'\r\n                                    && checkAxis(axis, elementInteractable)) {\r\n\r\n                                    this.prepared.name = 'drag';\r\n                                    this.target = elementInteractable;\r\n                                    this.element = element;\r\n                                    break;\r\n                                }\r\n\r\n                                element = parentElement(element);\r\n                            }\r\n\r\n                            // if there's no drag from element interactables,\r\n                            // check the selector interactables\r\n                            if (!this.prepared.name) {\r\n                                var thisInteraction = this;\r\n\r\n                                var getDraggable = function (interactable, selector, context) {\r\n                                    var elements = ie8MatchesSelector\r\n                                        ? context.querySelectorAll(selector)\r\n                                        : undefined;\r\n\r\n                                    if (interactable === thisInteraction.target) { return; }\r\n\r\n                                    if (inContext(interactable, eventTarget)\r\n                                        && !interactable.options.drag.manualStart\r\n                                        && !testIgnore(interactable, element, eventTarget)\r\n                                        && testAllow(interactable, element, eventTarget)\r\n                                        && matchesSelector(element, selector, elements)\r\n                                        && interactable.getAction(thisInteraction.downPointer, thisInteraction.downEvent, thisInteraction, element).name === 'drag'\r\n                                        && checkAxis(axis, interactable)\r\n                                        && withinInteractionLimit(interactable, element, 'drag')) {\r\n\r\n                                        return interactable;\r\n                                    }\r\n                                };\r\n\r\n                                element = eventTarget;\r\n\r\n                                while (isElement(element)) {\r\n                                    var selectorInteractable = interactables.forEachSelector(getDraggable);\r\n\r\n                                    if (selectorInteractable) {\r\n                                        this.prepared.name = 'drag';\r\n                                        this.target = selectorInteractable;\r\n                                        this.element = element;\r\n                                        break;\r\n                                    }\r\n\r\n                                    element = parentElement(element);\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n\r\n                var starting = !!this.prepared.name && !this.interacting();\r\n\r\n                if (starting\r\n                    && (this.target.options[this.prepared.name].manualStart\r\n                        || !withinInteractionLimit(this.target, this.element, this.prepared))) {\r\n                    this.stop(event);\r\n                    return;\r\n                }\r\n\r\n                if (this.prepared.name && this.target) {\r\n                    if (starting) {\r\n                        this.start(this.prepared, this.target, this.element);\r\n                    }\r\n\r\n                    var shouldMove = this.setModifications(this.curCoords.page, preEnd);\r\n\r\n                    // move if snapping or restriction doesn't prevent it\r\n                    if (shouldMove || starting) {\r\n                        this.prevEvent = this[this.prepared.name + 'Move'](event);\r\n                    }\r\n\r\n                    this.checkAndPreventDefault(event, this.target, this.element);\r\n                }\r\n            }\r\n\r\n            copyCoords(this.prevCoords, this.curCoords);\r\n\r\n            if (this.dragging || this.resizing) {\r\n                this.autoScrollMove(pointer);\r\n            }\r\n        },\r\n\r\n        dragStart: function (event) {\r\n            var dragEvent = new InteractEvent(this, event, 'drag', 'start', this.element);\r\n\r\n            this.dragging = true;\r\n            this.target.fire(dragEvent);\r\n\r\n            // reset active dropzones\r\n            this.activeDrops.dropzones = [];\r\n            this.activeDrops.elements  = [];\r\n            this.activeDrops.rects     = [];\r\n\r\n            if (!this.dynamicDrop) {\r\n                this.setActiveDrops(this.element);\r\n            }\r\n\r\n            var dropEvents = this.getDropEvents(event, dragEvent);\r\n\r\n            if (dropEvents.activate) {\r\n                this.fireActiveDrops(dropEvents.activate);\r\n            }\r\n\r\n            return dragEvent;\r\n        },\r\n\r\n        dragMove: function (event) {\r\n            var target = this.target,\r\n                dragEvent  = new InteractEvent(this, event, 'drag', 'move', this.element),\r\n                draggableElement = this.element,\r\n                drop = this.getDrop(dragEvent, event, draggableElement);\r\n\r\n            this.dropTarget = drop.dropzone;\r\n            this.dropElement = drop.element;\r\n\r\n            var dropEvents = this.getDropEvents(event, dragEvent);\r\n\r\n            target.fire(dragEvent);\r\n\r\n            if (dropEvents.leave) { this.prevDropTarget.fire(dropEvents.leave); }\r\n            if (dropEvents.enter) {     this.dropTarget.fire(dropEvents.enter); }\r\n            if (dropEvents.move ) {     this.dropTarget.fire(dropEvents.move ); }\r\n\r\n            this.prevDropTarget  = this.dropTarget;\r\n            this.prevDropElement = this.dropElement;\r\n\r\n            return dragEvent;\r\n        },\r\n\r\n        resizeStart: function (event) {\r\n            var resizeEvent = new InteractEvent(this, event, 'resize', 'start', this.element);\r\n\r\n            if (this.prepared.edges) {\r\n                var startRect = this.target.getRect(this.element);\r\n\r\n                /*\r\n                 * When using the `resizable.square` or `resizable.preserveAspectRatio` options, resizing from one edge\r\n                 * will affect another. E.g. with `resizable.square`, resizing to make the right edge larger will make\r\n                 * the bottom edge larger by the same amount. We call these 'linked' edges. Any linked edges will depend\r\n                 * on the active edges and the edge being interacted with.\r\n                 */\r\n                if (this.target.options.resize.square || this.target.options.resize.preserveAspectRatio) {\r\n                    var linkedEdges = extend({}, this.prepared.edges);\r\n\r\n                    linkedEdges.top    = linkedEdges.top    || (linkedEdges.left   && !linkedEdges.bottom);\r\n                    linkedEdges.left   = linkedEdges.left   || (linkedEdges.top    && !linkedEdges.right );\r\n                    linkedEdges.bottom = linkedEdges.bottom || (linkedEdges.right  && !linkedEdges.top   );\r\n                    linkedEdges.right  = linkedEdges.right  || (linkedEdges.bottom && !linkedEdges.left  );\r\n\r\n                    this.prepared._linkedEdges = linkedEdges;\r\n                }\r\n                else {\r\n                    this.prepared._linkedEdges = null;\r\n                }\r\n\r\n                // if using `resizable.preserveAspectRatio` option, record aspect ratio at the start of the resize\r\n                if (this.target.options.resize.preserveAspectRatio) {\r\n                    this.resizeStartAspectRatio = startRect.width / startRect.height;\r\n                }\r\n\r\n                this.resizeRects = {\r\n                    start     : startRect,\r\n                    current   : extend({}, startRect),\r\n                    restricted: extend({}, startRect),\r\n                    previous  : extend({}, startRect),\r\n                    delta     : {\r\n                        left: 0, right : 0, width : 0,\r\n                        top : 0, bottom: 0, height: 0\r\n                    }\r\n                };\r\n\r\n                resizeEvent.rect = this.resizeRects.restricted;\r\n                resizeEvent.deltaRect = this.resizeRects.delta;\r\n            }\r\n\r\n            this.target.fire(resizeEvent);\r\n\r\n            this.resizing = true;\r\n\r\n            return resizeEvent;\r\n        },\r\n\r\n        resizeMove: function (event) {\r\n            var resizeEvent = new InteractEvent(this, event, 'resize', 'move', this.element);\r\n\r\n            var edges = this.prepared.edges,\r\n                invert = this.target.options.resize.invert,\r\n                invertible = invert === 'reposition' || invert === 'negate';\r\n\r\n            if (edges) {\r\n                var dx = resizeEvent.dx,\r\n                    dy = resizeEvent.dy,\r\n\r\n                    start      = this.resizeRects.start,\r\n                    current    = this.resizeRects.current,\r\n                    restricted = this.resizeRects.restricted,\r\n                    delta      = this.resizeRects.delta,\r\n                    previous   = extend(this.resizeRects.previous, restricted),\r\n\r\n                    originalEdges = edges;\r\n\r\n                // `resize.preserveAspectRatio` takes precedence over `resize.square`\r\n                if (this.target.options.resize.preserveAspectRatio) {\r\n                    var resizeStartAspectRatio = this.resizeStartAspectRatio;\r\n\r\n                    edges = this.prepared._linkedEdges;\r\n\r\n                    if ((originalEdges.left && originalEdges.bottom)\r\n                        || (originalEdges.right && originalEdges.top)) {\r\n                        dy = -dx / resizeStartAspectRatio;\r\n                    }\r\n                    else if (originalEdges.left || originalEdges.right) { dy = dx / resizeStartAspectRatio; }\r\n                    else if (originalEdges.top || originalEdges.bottom) { dx = dy * resizeStartAspectRatio; }\r\n                }\r\n                else if (this.target.options.resize.square) {\r\n                    edges = this.prepared._linkedEdges;\r\n\r\n                    if ((originalEdges.left && originalEdges.bottom)\r\n                        || (originalEdges.right && originalEdges.top)) {\r\n                        dy = -dx;\r\n                    }\r\n                    else if (originalEdges.left || originalEdges.right) { dy = dx; }\r\n                    else if (originalEdges.top || originalEdges.bottom) { dx = dy; }\r\n                }\r\n\r\n                // update the 'current' rect without modifications\r\n                if (edges.top   ) { current.top    += dy; }\r\n                if (edges.bottom) { current.bottom += dy; }\r\n                if (edges.left  ) { current.left   += dx; }\r\n                if (edges.right ) { current.right  += dx; }\r\n\r\n                if (invertible) {\r\n                    // if invertible, copy the current rect\r\n                    extend(restricted, current);\r\n\r\n                    if (invert === 'reposition') {\r\n                        // swap edge values if necessary to keep width/height positive\r\n                        var swap;\r\n\r\n                        if (restricted.top > restricted.bottom) {\r\n                            swap = restricted.top;\r\n\r\n                            restricted.top = restricted.bottom;\r\n                            restricted.bottom = swap;\r\n                        }\r\n                        if (restricted.left > restricted.right) {\r\n                            swap = restricted.left;\r\n\r\n                            restricted.left = restricted.right;\r\n                            restricted.right = swap;\r\n                        }\r\n                    }\r\n                }\r\n                else {\r\n                    // if not invertible, restrict to minimum of 0x0 rect\r\n                    restricted.top    = Math.min(current.top, start.bottom);\r\n                    restricted.bottom = Math.max(current.bottom, start.top);\r\n                    restricted.left   = Math.min(current.left, start.right);\r\n                    restricted.right  = Math.max(current.right, start.left);\r\n                }\r\n\r\n                restricted.width  = restricted.right  - restricted.left;\r\n                restricted.height = restricted.bottom - restricted.top ;\r\n\r\n                for (var edge in restricted) {\r\n                    delta[edge] = restricted[edge] - previous[edge];\r\n                }\r\n\r\n                resizeEvent.edges = this.prepared.edges;\r\n                resizeEvent.rect = restricted;\r\n                resizeEvent.deltaRect = delta;\r\n            }\r\n\r\n            this.target.fire(resizeEvent);\r\n\r\n            return resizeEvent;\r\n        },\r\n\r\n        gestureStart: function (event) {\r\n            var gestureEvent = new InteractEvent(this, event, 'gesture', 'start', this.element);\r\n\r\n            gestureEvent.ds = 0;\r\n\r\n            this.gesture.startDistance = this.gesture.prevDistance = gestureEvent.distance;\r\n            this.gesture.startAngle = this.gesture.prevAngle = gestureEvent.angle;\r\n            this.gesture.scale = 1;\r\n\r\n            this.gesturing = true;\r\n\r\n            this.target.fire(gestureEvent);\r\n\r\n            return gestureEvent;\r\n        },\r\n\r\n        gestureMove: function (event) {\r\n            if (!this.pointerIds.length) {\r\n                return this.prevEvent;\r\n            }\r\n\r\n            var gestureEvent;\r\n\r\n            gestureEvent = new InteractEvent(this, event, 'gesture', 'move', this.element);\r\n            gestureEvent.ds = gestureEvent.scale - this.gesture.scale;\r\n\r\n            this.target.fire(gestureEvent);\r\n\r\n            this.gesture.prevAngle = gestureEvent.angle;\r\n            this.gesture.prevDistance = gestureEvent.distance;\r\n\r\n            if (gestureEvent.scale !== Infinity &&\r\n                gestureEvent.scale !== null &&\r\n                gestureEvent.scale !== undefined  &&\r\n                !isNaN(gestureEvent.scale)) {\r\n\r\n                this.gesture.scale = gestureEvent.scale;\r\n            }\r\n\r\n            return gestureEvent;\r\n        },\r\n\r\n        pointerHold: function (pointer, event, eventTarget) {\r\n            this.collectEventTargets(pointer, event, eventTarget, 'hold');\r\n        },\r\n\r\n        pointerUp: function (pointer, event, eventTarget, curEventTarget) {\r\n            var pointerIndex = this.mouse? 0 : indexOf(this.pointerIds, getPointerId(pointer));\r\n\r\n            clearTimeout(this.holdTimers[pointerIndex]);\r\n\r\n            this.collectEventTargets(pointer, event, eventTarget, 'up' );\r\n            this.collectEventTargets(pointer, event, eventTarget, 'tap');\r\n\r\n            this.pointerEnd(pointer, event, eventTarget, curEventTarget);\r\n\r\n            this.removePointer(pointer);\r\n        },\r\n\r\n        pointerCancel: function (pointer, event, eventTarget, curEventTarget) {\r\n            var pointerIndex = this.mouse? 0 : indexOf(this.pointerIds, getPointerId(pointer));\r\n\r\n            clearTimeout(this.holdTimers[pointerIndex]);\r\n\r\n            this.collectEventTargets(pointer, event, eventTarget, 'cancel');\r\n            this.pointerEnd(pointer, event, eventTarget, curEventTarget);\r\n\r\n            this.removePointer(pointer);\r\n        },\r\n\r\n        // http://www.quirksmode.org/dom/events/click.html\r\n        // >Events leading to dblclick\r\n        //\r\n        // IE8 doesn't fire down event before dblclick.\r\n        // This workaround tries to fire a tap and doubletap after dblclick\r\n        ie8Dblclick: function (pointer, event, eventTarget) {\r\n            if (this.prevTap\r\n                && event.clientX === this.prevTap.clientX\r\n                && event.clientY === this.prevTap.clientY\r\n                && eventTarget   === this.prevTap.target) {\r\n\r\n                this.downTargets[0] = eventTarget;\r\n                this.downTimes[0] = new Date().getTime();\r\n                this.collectEventTargets(pointer, event, eventTarget, 'tap');\r\n            }\r\n        },\r\n\r\n        // End interact move events and stop auto-scroll unless inertia is enabled\r\n        pointerEnd: function (pointer, event, eventTarget, curEventTarget) {\r\n            var endEvent,\r\n                target = this.target,\r\n                options = target && target.options,\r\n                inertiaOptions = options && this.prepared.name && options[this.prepared.name].inertia,\r\n                inertiaStatus = this.inertiaStatus;\r\n\r\n            if (this.interacting()) {\r\n\r\n                if (inertiaStatus.active && !inertiaStatus.ending) { return; }\r\n\r\n                var pointerSpeed,\r\n                    now = new Date().getTime(),\r\n                    inertiaPossible = false,\r\n                    inertia = false,\r\n                    smoothEnd = false,\r\n                    endSnap = checkSnap(target, this.prepared.name) && options[this.prepared.name].snap.endOnly,\r\n                    endRestrict = checkRestrict(target, this.prepared.name) && options[this.prepared.name].restrict.endOnly,\r\n                    dx = 0,\r\n                    dy = 0,\r\n                    startEvent;\r\n\r\n                if (this.dragging) {\r\n                    if      (options.drag.axis === 'x' ) { pointerSpeed = Math.abs(this.pointerDelta.client.vx); }\r\n                    else if (options.drag.axis === 'y' ) { pointerSpeed = Math.abs(this.pointerDelta.client.vy); }\r\n                    else   /*options.drag.axis === 'xy'*/{ pointerSpeed = this.pointerDelta.client.speed; }\r\n                }\r\n                else {\r\n                    pointerSpeed = this.pointerDelta.client.speed;\r\n                }\r\n\r\n                // check if inertia should be started\r\n                inertiaPossible = (inertiaOptions && inertiaOptions.enabled\r\n                                   && this.prepared.name !== 'gesture'\r\n                                   && event !== inertiaStatus.startEvent);\r\n\r\n                inertia = (inertiaPossible\r\n                           && (now - this.curCoords.timeStamp) < 50\r\n                           && pointerSpeed > inertiaOptions.minSpeed\r\n                           && pointerSpeed > inertiaOptions.endSpeed);\r\n\r\n                if (inertiaPossible && !inertia && (endSnap || endRestrict)) {\r\n\r\n                    var snapRestrict = {};\r\n\r\n                    snapRestrict.snap = snapRestrict.restrict = snapRestrict;\r\n\r\n                    if (endSnap) {\r\n                        this.setSnapping(this.curCoords.page, snapRestrict);\r\n                        if (snapRestrict.locked) {\r\n                            dx += snapRestrict.dx;\r\n                            dy += snapRestrict.dy;\r\n                        }\r\n                    }\r\n\r\n                    if (endRestrict) {\r\n                        this.setRestriction(this.curCoords.page, snapRestrict);\r\n                        if (snapRestrict.restricted) {\r\n                            dx += snapRestrict.dx;\r\n                            dy += snapRestrict.dy;\r\n                        }\r\n                    }\r\n\r\n                    if (dx || dy) {\r\n                        smoothEnd = true;\r\n                    }\r\n                }\r\n\r\n                if (inertia || smoothEnd) {\r\n                    copyCoords(inertiaStatus.upCoords, this.curCoords);\r\n\r\n                    this.pointers[0] = inertiaStatus.startEvent = startEvent =\r\n                        new InteractEvent(this, event, this.prepared.name, 'inertiastart', this.element);\r\n\r\n                    inertiaStatus.t0 = now;\r\n\r\n                    target.fire(inertiaStatus.startEvent);\r\n\r\n                    if (inertia) {\r\n                        inertiaStatus.vx0 = this.pointerDelta.client.vx;\r\n                        inertiaStatus.vy0 = this.pointerDelta.client.vy;\r\n                        inertiaStatus.v0 = pointerSpeed;\r\n\r\n                        this.calcInertia(inertiaStatus);\r\n\r\n                        var page = extend({}, this.curCoords.page),\r\n                            origin = getOriginXY(target, this.element),\r\n                            statusObject;\r\n\r\n                        page.x = page.x + inertiaStatus.xe - origin.x;\r\n                        page.y = page.y + inertiaStatus.ye - origin.y;\r\n\r\n                        statusObject = {\r\n                            useStatusXY: true,\r\n                            x: page.x,\r\n                            y: page.y,\r\n                            dx: 0,\r\n                            dy: 0,\r\n                            snap: null\r\n                        };\r\n\r\n                        statusObject.snap = statusObject;\r\n\r\n                        dx = dy = 0;\r\n\r\n                        if (endSnap) {\r\n                            var snap = this.setSnapping(this.curCoords.page, statusObject);\r\n\r\n                            if (snap.locked) {\r\n                                dx += snap.dx;\r\n                                dy += snap.dy;\r\n                            }\r\n                        }\r\n\r\n                        if (endRestrict) {\r\n                            var restrict = this.setRestriction(this.curCoords.page, statusObject);\r\n\r\n                            if (restrict.restricted) {\r\n                                dx += restrict.dx;\r\n                                dy += restrict.dy;\r\n                            }\r\n                        }\r\n\r\n                        inertiaStatus.modifiedXe += dx;\r\n                        inertiaStatus.modifiedYe += dy;\r\n\r\n                        inertiaStatus.i = reqFrame(this.boundInertiaFrame);\r\n                    }\r\n                    else {\r\n                        inertiaStatus.smoothEnd = true;\r\n                        inertiaStatus.xe = dx;\r\n                        inertiaStatus.ye = dy;\r\n\r\n                        inertiaStatus.sx = inertiaStatus.sy = 0;\r\n\r\n                        inertiaStatus.i = reqFrame(this.boundSmoothEndFrame);\r\n                    }\r\n\r\n                    inertiaStatus.active = true;\r\n                    return;\r\n                }\r\n\r\n                if (endSnap || endRestrict) {\r\n                    // fire a move event at the snapped coordinates\r\n                    this.pointerMove(pointer, event, eventTarget, curEventTarget, true);\r\n                }\r\n            }\r\n\r\n            if (this.dragging) {\r\n                endEvent = new InteractEvent(this, event, 'drag', 'end', this.element);\r\n\r\n                var draggableElement = this.element,\r\n                    drop = this.getDrop(endEvent, event, draggableElement);\r\n\r\n                this.dropTarget = drop.dropzone;\r\n                this.dropElement = drop.element;\r\n\r\n                var dropEvents = this.getDropEvents(event, endEvent);\r\n\r\n                if (dropEvents.leave) { this.prevDropTarget.fire(dropEvents.leave); }\r\n                if (dropEvents.enter) {     this.dropTarget.fire(dropEvents.enter); }\r\n                if (dropEvents.drop ) {     this.dropTarget.fire(dropEvents.drop ); }\r\n                if (dropEvents.deactivate) {\r\n                    this.fireActiveDrops(dropEvents.deactivate);\r\n                }\r\n\r\n                target.fire(endEvent);\r\n            }\r\n            else if (this.resizing) {\r\n                endEvent = new InteractEvent(this, event, 'resize', 'end', this.element);\r\n                target.fire(endEvent);\r\n            }\r\n            else if (this.gesturing) {\r\n                endEvent = new InteractEvent(this, event, 'gesture', 'end', this.element);\r\n                target.fire(endEvent);\r\n            }\r\n\r\n            this.stop(event);\r\n        },\r\n\r\n        collectDrops: function (element) {\r\n            var drops = [],\r\n                elements = [],\r\n                i;\r\n\r\n            element = element || this.element;\r\n\r\n            // collect all dropzones and their elements which qualify for a drop\r\n            for (i = 0; i < interactables.length; i++) {\r\n                if (!interactables[i].options.drop.enabled) { continue; }\r\n\r\n                var current = interactables[i],\r\n                    accept = current.options.drop.accept;\r\n\r\n                // test the draggable element against the dropzone's accept setting\r\n                if ((isElement(accept) && accept !== element)\r\n                    || (isString(accept)\r\n                        && !matchesSelector(element, accept))) {\r\n\r\n                    continue;\r\n                }\r\n\r\n                // query for new elements if necessary\r\n                var dropElements = current.selector? current._context.querySelectorAll(current.selector) : [current._element];\r\n\r\n                for (var j = 0, len = dropElements.length; j < len; j++) {\r\n                    var currentElement = dropElements[j];\r\n\r\n                    if (currentElement === element) {\r\n                        continue;\r\n                    }\r\n\r\n                    drops.push(current);\r\n                    elements.push(currentElement);\r\n                }\r\n            }\r\n\r\n            return {\r\n                dropzones: drops,\r\n                elements: elements\r\n            };\r\n        },\r\n\r\n        fireActiveDrops: function (event) {\r\n            var i,\r\n                current,\r\n                currentElement,\r\n                prevElement;\r\n\r\n            // loop through all active dropzones and trigger event\r\n            for (i = 0; i < this.activeDrops.dropzones.length; i++) {\r\n                current = this.activeDrops.dropzones[i];\r\n                currentElement = this.activeDrops.elements [i];\r\n\r\n                // prevent trigger of duplicate events on same element\r\n                if (currentElement !== prevElement) {\r\n                    // set current element as event target\r\n                    event.target = currentElement;\r\n                    current.fire(event);\r\n                }\r\n                prevElement = currentElement;\r\n            }\r\n        },\r\n\r\n        // Collect a new set of possible drops and save them in activeDrops.\r\n        // setActiveDrops should always be called when a drag has just started or a\r\n        // drag event happens while dynamicDrop is true\r\n        setActiveDrops: function (dragElement) {\r\n            // get dropzones and their elements that could receive the draggable\r\n            var possibleDrops = this.collectDrops(dragElement, true);\r\n\r\n            this.activeDrops.dropzones = possibleDrops.dropzones;\r\n            this.activeDrops.elements  = possibleDrops.elements;\r\n            this.activeDrops.rects     = [];\r\n\r\n            for (var i = 0; i < this.activeDrops.dropzones.length; i++) {\r\n                this.activeDrops.rects[i] = this.activeDrops.dropzones[i].getRect(this.activeDrops.elements[i]);\r\n            }\r\n        },\r\n\r\n        getDrop: function (dragEvent, event, dragElement) {\r\n            var validDrops = [];\r\n\r\n            if (dynamicDrop) {\r\n                this.setActiveDrops(dragElement);\r\n            }\r\n\r\n            // collect all dropzones and their elements which qualify for a drop\r\n            for (var j = 0; j < this.activeDrops.dropzones.length; j++) {\r\n                var current        = this.activeDrops.dropzones[j],\r\n                    currentElement = this.activeDrops.elements [j],\r\n                    rect           = this.activeDrops.rects    [j];\r\n\r\n                validDrops.push(current.dropCheck(dragEvent, event, this.target, dragElement, currentElement, rect)\r\n                                ? currentElement\r\n                                : null);\r\n            }\r\n\r\n            // get the most appropriate dropzone based on DOM depth and order\r\n            var dropIndex = indexOfDeepestElement(validDrops),\r\n                dropzone  = this.activeDrops.dropzones[dropIndex] || null,\r\n                element   = this.activeDrops.elements [dropIndex] || null;\r\n\r\n            return {\r\n                dropzone: dropzone,\r\n                element: element\r\n            };\r\n        },\r\n\r\n        getDropEvents: function (pointerEvent, dragEvent) {\r\n            var dropEvents = {\r\n                enter     : null,\r\n                leave     : null,\r\n                activate  : null,\r\n                deactivate: null,\r\n                move      : null,\r\n                drop      : null\r\n            };\r\n\r\n            if (this.dropElement !== this.prevDropElement) {\r\n                // if there was a prevDropTarget, create a dragleave event\r\n                if (this.prevDropTarget) {\r\n                    dropEvents.leave = {\r\n                        target       : this.prevDropElement,\r\n                        dropzone     : this.prevDropTarget,\r\n                        relatedTarget: dragEvent.target,\r\n                        draggable    : dragEvent.interactable,\r\n                        dragEvent    : dragEvent,\r\n                        interaction  : this,\r\n                        timeStamp    : dragEvent.timeStamp,\r\n                        type         : 'dragleave'\r\n                    };\r\n\r\n                    dragEvent.dragLeave = this.prevDropElement;\r\n                    dragEvent.prevDropzone = this.prevDropTarget;\r\n                }\r\n                // if the dropTarget is not null, create a dragenter event\r\n                if (this.dropTarget) {\r\n                    dropEvents.enter = {\r\n                        target       : this.dropElement,\r\n                        dropzone     : this.dropTarget,\r\n                        relatedTarget: dragEvent.target,\r\n                        draggable    : dragEvent.interactable,\r\n                        dragEvent    : dragEvent,\r\n                        interaction  : this,\r\n                        timeStamp    : dragEvent.timeStamp,\r\n                        type         : 'dragenter'\r\n                    };\r\n\r\n                    dragEvent.dragEnter = this.dropElement;\r\n                    dragEvent.dropzone = this.dropTarget;\r\n                }\r\n            }\r\n\r\n            if (dragEvent.type === 'dragend' && this.dropTarget) {\r\n                dropEvents.drop = {\r\n                    target       : this.dropElement,\r\n                    dropzone     : this.dropTarget,\r\n                    relatedTarget: dragEvent.target,\r\n                    draggable    : dragEvent.interactable,\r\n                    dragEvent    : dragEvent,\r\n                    interaction  : this,\r\n                    timeStamp    : dragEvent.timeStamp,\r\n                    type         : 'drop'\r\n                };\r\n\r\n                dragEvent.dropzone = this.dropTarget;\r\n            }\r\n            if (dragEvent.type === 'dragstart') {\r\n                dropEvents.activate = {\r\n                    target       : null,\r\n                    dropzone     : null,\r\n                    relatedTarget: dragEvent.target,\r\n                    draggable    : dragEvent.interactable,\r\n                    dragEvent    : dragEvent,\r\n                    interaction  : this,\r\n                    timeStamp    : dragEvent.timeStamp,\r\n                    type         : 'dropactivate'\r\n                };\r\n            }\r\n            if (dragEvent.type === 'dragend') {\r\n                dropEvents.deactivate = {\r\n                    target       : null,\r\n                    dropzone     : null,\r\n                    relatedTarget: dragEvent.target,\r\n                    draggable    : dragEvent.interactable,\r\n                    dragEvent    : dragEvent,\r\n                    interaction  : this,\r\n                    timeStamp    : dragEvent.timeStamp,\r\n                    type         : 'dropdeactivate'\r\n                };\r\n            }\r\n            if (dragEvent.type === 'dragmove' && this.dropTarget) {\r\n                dropEvents.move = {\r\n                    target       : this.dropElement,\r\n                    dropzone     : this.dropTarget,\r\n                    relatedTarget: dragEvent.target,\r\n                    draggable    : dragEvent.interactable,\r\n                    dragEvent    : dragEvent,\r\n                    interaction  : this,\r\n                    dragmove     : dragEvent,\r\n                    timeStamp    : dragEvent.timeStamp,\r\n                    type         : 'dropmove'\r\n                };\r\n                dragEvent.dropzone = this.dropTarget;\r\n            }\r\n\r\n            return dropEvents;\r\n        },\r\n\r\n        currentAction: function () {\r\n            return (this.dragging && 'drag') || (this.resizing && 'resize') || (this.gesturing && 'gesture') || null;\r\n        },\r\n\r\n        interacting: function () {\r\n            return this.dragging || this.resizing || this.gesturing;\r\n        },\r\n\r\n        clearTargets: function () {\r\n            this.target = this.element = null;\r\n\r\n            this.dropTarget = this.dropElement = this.prevDropTarget = this.prevDropElement = null;\r\n        },\r\n\r\n        stop: function (event) {\r\n            if (this.interacting()) {\r\n                autoScroll.stop();\r\n                this.matches = [];\r\n                this.matchElements = [];\r\n\r\n                var target = this.target;\r\n\r\n                if (target.options.styleCursor) {\r\n                    target._doc.documentElement.style.cursor = '';\r\n                }\r\n\r\n                // prevent Default only if were previously interacting\r\n                if (event && isFunction(event.preventDefault)) {\r\n                    this.checkAndPreventDefault(event, target, this.element);\r\n                }\r\n\r\n                if (this.dragging) {\r\n                    this.activeDrops.dropzones = this.activeDrops.elements = this.activeDrops.rects = null;\r\n                }\r\n            }\r\n\r\n            this.clearTargets();\r\n\r\n            this.pointerIsDown = this.snapStatus.locked = this.dragging = this.resizing = this.gesturing = false;\r\n            this.prepared.name = this.prevEvent = null;\r\n            this.inertiaStatus.resumeDx = this.inertiaStatus.resumeDy = 0;\r\n\r\n            // remove pointers if their ID isn't in this.pointerIds\r\n            for (var i = 0; i < this.pointers.length; i++) {\r\n                if (indexOf(this.pointerIds, getPointerId(this.pointers[i])) === -1) {\r\n                    this.pointers.splice(i, 1);\r\n                }\r\n            }\r\n        },\r\n\r\n        inertiaFrame: function () {\r\n            var inertiaStatus = this.inertiaStatus,\r\n                options = this.target.options[this.prepared.name].inertia,\r\n                lambda = options.resistance,\r\n                t = new Date().getTime() / 1000 - inertiaStatus.t0;\r\n\r\n            if (t < inertiaStatus.te) {\r\n\r\n                var progress =  1 - (Math.exp(-lambda * t) - inertiaStatus.lambda_v0) / inertiaStatus.one_ve_v0;\r\n\r\n                if (inertiaStatus.modifiedXe === inertiaStatus.xe && inertiaStatus.modifiedYe === inertiaStatus.ye) {\r\n                    inertiaStatus.sx = inertiaStatus.xe * progress;\r\n                    inertiaStatus.sy = inertiaStatus.ye * progress;\r\n                }\r\n                else {\r\n                    var quadPoint = getQuadraticCurvePoint(\r\n                            0, 0,\r\n                            inertiaStatus.xe, inertiaStatus.ye,\r\n                            inertiaStatus.modifiedXe, inertiaStatus.modifiedYe,\r\n                            progress);\r\n\r\n                    inertiaStatus.sx = quadPoint.x;\r\n                    inertiaStatus.sy = quadPoint.y;\r\n                }\r\n\r\n                this.pointerMove(inertiaStatus.startEvent, inertiaStatus.startEvent);\r\n\r\n                inertiaStatus.i = reqFrame(this.boundInertiaFrame);\r\n            }\r\n            else {\r\n                inertiaStatus.ending = true;\r\n\r\n                inertiaStatus.sx = inertiaStatus.modifiedXe;\r\n                inertiaStatus.sy = inertiaStatus.modifiedYe;\r\n\r\n                this.pointerMove(inertiaStatus.startEvent, inertiaStatus.startEvent);\r\n                this.pointerEnd(inertiaStatus.startEvent, inertiaStatus.startEvent);\r\n\r\n                inertiaStatus.active = inertiaStatus.ending = false;\r\n            }\r\n        },\r\n\r\n        smoothEndFrame: function () {\r\n            var inertiaStatus = this.inertiaStatus,\r\n                t = new Date().getTime() - inertiaStatus.t0,\r\n                duration = this.target.options[this.prepared.name].inertia.smoothEndDuration;\r\n\r\n            if (t < duration) {\r\n                inertiaStatus.sx = easeOutQuad(t, 0, inertiaStatus.xe, duration);\r\n                inertiaStatus.sy = easeOutQuad(t, 0, inertiaStatus.ye, duration);\r\n\r\n                this.pointerMove(inertiaStatus.startEvent, inertiaStatus.startEvent);\r\n\r\n                inertiaStatus.i = reqFrame(this.boundSmoothEndFrame);\r\n            }\r\n            else {\r\n                inertiaStatus.ending = true;\r\n\r\n                inertiaStatus.sx = inertiaStatus.xe;\r\n                inertiaStatus.sy = inertiaStatus.ye;\r\n\r\n                this.pointerMove(inertiaStatus.startEvent, inertiaStatus.startEvent);\r\n                this.pointerEnd(inertiaStatus.startEvent, inertiaStatus.startEvent);\r\n\r\n                inertiaStatus.smoothEnd =\r\n                  inertiaStatus.active = inertiaStatus.ending = false;\r\n            }\r\n        },\r\n\r\n        addPointer: function (pointer) {\r\n            var id = getPointerId(pointer),\r\n                index = this.mouse? 0 : indexOf(this.pointerIds, id);\r\n\r\n            if (index === -1) {\r\n                index = this.pointerIds.length;\r\n            }\r\n\r\n            this.pointerIds[index] = id;\r\n            this.pointers[index] = pointer;\r\n\r\n            return index;\r\n        },\r\n\r\n        removePointer: function (pointer) {\r\n            var id = getPointerId(pointer),\r\n                index = this.mouse? 0 : indexOf(this.pointerIds, id);\r\n\r\n            if (index === -1) { return; }\r\n\r\n            this.pointers   .splice(index, 1);\r\n            this.pointerIds .splice(index, 1);\r\n            this.downTargets.splice(index, 1);\r\n            this.downTimes  .splice(index, 1);\r\n            this.holdTimers .splice(index, 1);\r\n        },\r\n\r\n        recordPointer: function (pointer) {\r\n            var index = this.mouse? 0: indexOf(this.pointerIds, getPointerId(pointer));\r\n\r\n            if (index === -1) { return; }\r\n\r\n            this.pointers[index] = pointer;\r\n        },\r\n\r\n        collectEventTargets: function (pointer, event, eventTarget, eventType) {\r\n            var pointerIndex = this.mouse? 0 : indexOf(this.pointerIds, getPointerId(pointer));\r\n\r\n            // do not fire a tap event if the pointer was moved before being lifted\r\n            if (eventType === 'tap' && (this.pointerWasMoved\r\n                // or if the pointerup target is different to the pointerdown target\r\n                || !(this.downTargets[pointerIndex] && this.downTargets[pointerIndex] === eventTarget))) {\r\n                return;\r\n            }\r\n\r\n            var targets = [],\r\n                elements = [],\r\n                element = eventTarget;\r\n\r\n            function collectSelectors (interactable, selector, context) {\r\n                var els = ie8MatchesSelector\r\n                        ? context.querySelectorAll(selector)\r\n                        : undefined;\r\n\r\n                if (interactable._iEvents[eventType]\r\n                    && isElement(element)\r\n                    && inContext(interactable, element)\r\n                    && !testIgnore(interactable, element, eventTarget)\r\n                    && testAllow(interactable, element, eventTarget)\r\n                    && matchesSelector(element, selector, els)) {\r\n\r\n                    targets.push(interactable);\r\n                    elements.push(element);\r\n                }\r\n            }\r\n\r\n            while (element) {\r\n                if (interact.isSet(element) && interact(element)._iEvents[eventType]) {\r\n                    targets.push(interact(element));\r\n                    elements.push(element);\r\n                }\r\n\r\n                interactables.forEachSelector(collectSelectors);\r\n\r\n                element = parentElement(element);\r\n            }\r\n\r\n            // create the tap event even if there are no listeners so that\r\n            // doubletap can still be created and fired\r\n            if (targets.length || eventType === 'tap') {\r\n                this.firePointers(pointer, event, eventTarget, targets, elements, eventType);\r\n            }\r\n        },\r\n\r\n        firePointers: function (pointer, event, eventTarget, targets, elements, eventType) {\r\n            var pointerIndex = this.mouse? 0 : indexOf(this.pointerIds, getPointerId(pointer)),\r\n                pointerEvent = {},\r\n                i,\r\n                // for tap events\r\n                interval, createNewDoubleTap;\r\n\r\n            // if it's a doubletap then the event properties would have been\r\n            // copied from the tap event and provided as the pointer argument\r\n            if (eventType === 'doubletap') {\r\n                pointerEvent = pointer;\r\n            }\r\n            else {\r\n                pointerExtend(pointerEvent, event);\r\n                if (event !== pointer) {\r\n                    pointerExtend(pointerEvent, pointer);\r\n                }\r\n\r\n                pointerEvent.preventDefault           = preventOriginalDefault;\r\n                pointerEvent.stopPropagation          = InteractEvent.prototype.stopPropagation;\r\n                pointerEvent.stopImmediatePropagation = InteractEvent.prototype.stopImmediatePropagation;\r\n                pointerEvent.interaction              = this;\r\n\r\n                pointerEvent.timeStamp       = new Date().getTime();\r\n                pointerEvent.originalEvent   = event;\r\n                pointerEvent.originalPointer = pointer;\r\n                pointerEvent.type            = eventType;\r\n                pointerEvent.pointerId       = getPointerId(pointer);\r\n                pointerEvent.pointerType     = this.mouse? 'mouse' : !supportsPointerEvent? 'touch'\r\n                                                    : isString(pointer.pointerType)\r\n                                                        ? pointer.pointerType\r\n                                                        : [,,'touch', 'pen', 'mouse'][pointer.pointerType];\r\n            }\r\n\r\n            if (eventType === 'tap') {\r\n                pointerEvent.dt = pointerEvent.timeStamp - this.downTimes[pointerIndex];\r\n\r\n                interval = pointerEvent.timeStamp - this.tapTime;\r\n                createNewDoubleTap = !!(this.prevTap && this.prevTap.type !== 'doubletap'\r\n                       && this.prevTap.target === pointerEvent.target\r\n                       && interval < 500);\r\n\r\n                pointerEvent.double = createNewDoubleTap;\r\n\r\n                this.tapTime = pointerEvent.timeStamp;\r\n            }\r\n\r\n            for (i = 0; i < targets.length; i++) {\r\n                pointerEvent.currentTarget = elements[i];\r\n                pointerEvent.interactable = targets[i];\r\n                targets[i].fire(pointerEvent);\r\n\r\n                if (pointerEvent.immediatePropagationStopped\r\n                    ||(pointerEvent.propagationStopped && elements[i + 1] !== pointerEvent.currentTarget)) {\r\n                    break;\r\n                }\r\n            }\r\n\r\n            if (createNewDoubleTap) {\r\n                var doubleTap = {};\r\n\r\n                extend(doubleTap, pointerEvent);\r\n\r\n                doubleTap.dt   = interval;\r\n                doubleTap.type = 'doubletap';\r\n\r\n                this.collectEventTargets(doubleTap, event, eventTarget, 'doubletap');\r\n\r\n                this.prevTap = doubleTap;\r\n            }\r\n            else if (eventType === 'tap') {\r\n                this.prevTap = pointerEvent;\r\n            }\r\n        },\r\n\r\n        validateSelector: function (pointer, event, matches, matchElements) {\r\n            for (var i = 0, len = matches.length; i < len; i++) {\r\n                var match = matches[i],\r\n                    matchElement = matchElements[i],\r\n                    action = validateAction(match.getAction(pointer, event, this, matchElement), match);\r\n\r\n                if (action && withinInteractionLimit(match, matchElement, action)) {\r\n                    this.target = match;\r\n                    this.element = matchElement;\r\n\r\n                    return action;\r\n                }\r\n            }\r\n        },\r\n\r\n        setSnapping: function (pageCoords, status) {\r\n            var snap = this.target.options[this.prepared.name].snap,\r\n                targets = [],\r\n                target,\r\n                page,\r\n                i;\r\n\r\n            status = status || this.snapStatus;\r\n\r\n            if (status.useStatusXY) {\r\n                page = { x: status.x, y: status.y };\r\n            }\r\n            else {\r\n                var origin = getOriginXY(this.target, this.element);\r\n\r\n                page = extend({}, pageCoords);\r\n\r\n                page.x -= origin.x;\r\n                page.y -= origin.y;\r\n            }\r\n\r\n            status.realX = page.x;\r\n            status.realY = page.y;\r\n\r\n            page.x = page.x - this.inertiaStatus.resumeDx;\r\n            page.y = page.y - this.inertiaStatus.resumeDy;\r\n\r\n            var len = snap.targets? snap.targets.length : 0;\r\n\r\n            for (var relIndex = 0; relIndex < this.snapOffsets.length; relIndex++) {\r\n                var relative = {\r\n                    x: page.x - this.snapOffsets[relIndex].x,\r\n                    y: page.y - this.snapOffsets[relIndex].y\r\n                };\r\n\r\n                for (i = 0; i < len; i++) {\r\n                    if (isFunction(snap.targets[i])) {\r\n                        target = snap.targets[i](relative.x, relative.y, this);\r\n                    }\r\n                    else {\r\n                        target = snap.targets[i];\r\n                    }\r\n\r\n                    if (!target) { continue; }\r\n\r\n                    targets.push({\r\n                        x: isNumber(target.x) ? (target.x + this.snapOffsets[relIndex].x) : relative.x,\r\n                        y: isNumber(target.y) ? (target.y + this.snapOffsets[relIndex].y) : relative.y,\r\n\r\n                        range: isNumber(target.range)? target.range: snap.range\r\n                    });\r\n                }\r\n            }\r\n\r\n            var closest = {\r\n                    target: null,\r\n                    inRange: false,\r\n                    distance: 0,\r\n                    range: 0,\r\n                    dx: 0,\r\n                    dy: 0\r\n                };\r\n\r\n            for (i = 0, len = targets.length; i < len; i++) {\r\n                target = targets[i];\r\n\r\n                var range = target.range,\r\n                    dx = target.x - page.x,\r\n                    dy = target.y - page.y,\r\n                    distance = hypot(dx, dy),\r\n                    inRange = distance <= range;\r\n\r\n                // Infinite targets count as being out of range\r\n                // compared to non infinite ones that are in range\r\n                if (range === Infinity && closest.inRange && closest.range !== Infinity) {\r\n                    inRange = false;\r\n                }\r\n\r\n                if (!closest.target || (inRange\r\n                    // is the closest target in range?\r\n                    ? (closest.inRange && range !== Infinity\r\n                        // the pointer is relatively deeper in this target\r\n                        ? distance / range < closest.distance / closest.range\r\n                        // this target has Infinite range and the closest doesn't\r\n                        : (range === Infinity && closest.range !== Infinity)\r\n                            // OR this target is closer that the previous closest\r\n                            || distance < closest.distance)\r\n                    // The other is not in range and the pointer is closer to this target\r\n                    : (!closest.inRange && distance < closest.distance))) {\r\n\r\n                    if (range === Infinity) {\r\n                        inRange = true;\r\n                    }\r\n\r\n                    closest.target = target;\r\n                    closest.distance = distance;\r\n                    closest.range = range;\r\n                    closest.inRange = inRange;\r\n                    closest.dx = dx;\r\n                    closest.dy = dy;\r\n\r\n                    status.range = range;\r\n                }\r\n            }\r\n\r\n            var snapChanged;\r\n\r\n            if (closest.target) {\r\n                snapChanged = (status.snappedX !== closest.target.x || status.snappedY !== closest.target.y);\r\n\r\n                status.snappedX = closest.target.x;\r\n                status.snappedY = closest.target.y;\r\n            }\r\n            else {\r\n                snapChanged = true;\r\n\r\n                status.snappedX = NaN;\r\n                status.snappedY = NaN;\r\n            }\r\n\r\n            status.dx = closest.dx;\r\n            status.dy = closest.dy;\r\n\r\n            status.changed = (snapChanged || (closest.inRange && !status.locked));\r\n            status.locked = closest.inRange;\r\n\r\n            return status;\r\n        },\r\n\r\n        setRestriction: function (pageCoords, status) {\r\n            var target = this.target,\r\n                restrict = target && target.options[this.prepared.name].restrict,\r\n                restriction = restrict && restrict.restriction,\r\n                page;\r\n\r\n            if (!restriction) {\r\n                return status;\r\n            }\r\n\r\n            status = status || this.restrictStatus;\r\n\r\n            page = status.useStatusXY\r\n                    ? page = { x: status.x, y: status.y }\r\n                    : page = extend({}, pageCoords);\r\n\r\n            if (status.snap && status.snap.locked) {\r\n                page.x += status.snap.dx || 0;\r\n                page.y += status.snap.dy || 0;\r\n            }\r\n\r\n            page.x -= this.inertiaStatus.resumeDx;\r\n            page.y -= this.inertiaStatus.resumeDy;\r\n\r\n            status.dx = 0;\r\n            status.dy = 0;\r\n            status.restricted = false;\r\n\r\n            var rect, restrictedX, restrictedY;\r\n\r\n            if (isString(restriction)) {\r\n                if (restriction === 'parent') {\r\n                    restriction = parentElement(this.element);\r\n                }\r\n                else if (restriction === 'self') {\r\n                    restriction = target.getRect(this.element);\r\n                }\r\n                else {\r\n                    restriction = closest(this.element, restriction);\r\n                }\r\n\r\n                if (!restriction) { return status; }\r\n            }\r\n\r\n            if (isFunction(restriction)) {\r\n                restriction = restriction(page.x, page.y, this.element);\r\n            }\r\n\r\n            if (isElement(restriction)) {\r\n                restriction = getElementRect(restriction);\r\n            }\r\n\r\n            rect = restriction;\r\n\r\n            if (!restriction) {\r\n                restrictedX = page.x;\r\n                restrictedY = page.y;\r\n            }\r\n            // object is assumed to have\r\n            // x, y, width, height or\r\n            // left, top, right, bottom\r\n            else if ('x' in restriction && 'y' in restriction) {\r\n                restrictedX = Math.max(Math.min(rect.x + rect.width  - this.restrictOffset.right , page.x), rect.x + this.restrictOffset.left);\r\n                restrictedY = Math.max(Math.min(rect.y + rect.height - this.restrictOffset.bottom, page.y), rect.y + this.restrictOffset.top );\r\n            }\r\n            else {\r\n                restrictedX = Math.max(Math.min(rect.right  - this.restrictOffset.right , page.x), rect.left + this.restrictOffset.left);\r\n                restrictedY = Math.max(Math.min(rect.bottom - this.restrictOffset.bottom, page.y), rect.top  + this.restrictOffset.top );\r\n            }\r\n\r\n            status.dx = restrictedX - page.x;\r\n            status.dy = restrictedY - page.y;\r\n\r\n            status.changed = status.restrictedX !== restrictedX || status.restrictedY !== restrictedY;\r\n            status.restricted = !!(status.dx || status.dy);\r\n\r\n            status.restrictedX = restrictedX;\r\n            status.restrictedY = restrictedY;\r\n\r\n            return status;\r\n        },\r\n\r\n        checkAndPreventDefault: function (event, interactable, element) {\r\n            if (!(interactable = interactable || this.target)) { return; }\r\n\r\n            var options = interactable.options,\r\n                prevent = options.preventDefault;\r\n\r\n            if (prevent === 'auto' && element && !/^(input|select|textarea)$/i.test(event.target.nodeName)) {\r\n                // do not preventDefault on pointerdown if the prepared action is a drag\r\n                // and dragging can only start from a certain direction - this allows\r\n                // a touch to pan the viewport if a drag isn't in the right direction\r\n                if (/down|start/i.test(event.type)\r\n                    && this.prepared.name === 'drag' && options.drag.axis !== 'xy') {\r\n\r\n                    return;\r\n                }\r\n\r\n                // with manualStart, only preventDefault while interacting\r\n                if (options[this.prepared.name] && options[this.prepared.name].manualStart\r\n                    && !this.interacting()) {\r\n                    return;\r\n                }\r\n\r\n                event.preventDefault();\r\n                return;\r\n            }\r\n\r\n            if (prevent === 'always') {\r\n                event.preventDefault();\r\n                return;\r\n            }\r\n        },\r\n\r\n        calcInertia: function (status) {\r\n            var inertiaOptions = this.target.options[this.prepared.name].inertia,\r\n                lambda = inertiaOptions.resistance,\r\n                inertiaDur = -Math.log(inertiaOptions.endSpeed / status.v0) / lambda;\r\n\r\n            status.x0 = this.prevEvent.pageX;\r\n            status.y0 = this.prevEvent.pageY;\r\n            status.t0 = status.startEvent.timeStamp / 1000;\r\n            status.sx = status.sy = 0;\r\n\r\n            status.modifiedXe = status.xe = (status.vx0 - inertiaDur) / lambda;\r\n            status.modifiedYe = status.ye = (status.vy0 - inertiaDur) / lambda;\r\n            status.te = inertiaDur;\r\n\r\n            status.lambda_v0 = lambda / status.v0;\r\n            status.one_ve_v0 = 1 - inertiaOptions.endSpeed / status.v0;\r\n        },\r\n\r\n        autoScrollMove: function (pointer) {\r\n            if (!(this.interacting()\r\n                && checkAutoScroll(this.target, this.prepared.name))) {\r\n                return;\r\n            }\r\n\r\n            if (this.inertiaStatus.active) {\r\n                autoScroll.x = autoScroll.y = 0;\r\n                return;\r\n            }\r\n\r\n            var top,\r\n                right,\r\n                bottom,\r\n                left,\r\n                options = this.target.options[this.prepared.name].autoScroll,\r\n                container = options.container || getWindow(this.element);\r\n\r\n            if (isWindow(container)) {\r\n                left   = pointer.clientX < autoScroll.margin;\r\n                top    = pointer.clientY < autoScroll.margin;\r\n                right  = pointer.clientX > container.innerWidth  - autoScroll.margin;\r\n                bottom = pointer.clientY > container.innerHeight - autoScroll.margin;\r\n            }\r\n            else {\r\n                var rect = getElementClientRect(container);\r\n\r\n                left   = pointer.clientX < rect.left   + autoScroll.margin;\r\n                top    = pointer.clientY < rect.top    + autoScroll.margin;\r\n                right  = pointer.clientX > rect.right  - autoScroll.margin;\r\n                bottom = pointer.clientY > rect.bottom - autoScroll.margin;\r\n            }\r\n\r\n            autoScroll.x = (right ? 1: left? -1: 0);\r\n            autoScroll.y = (bottom? 1:  top? -1: 0);\r\n\r\n            if (!autoScroll.isScrolling) {\r\n                // set the autoScroll properties to those of the target\r\n                autoScroll.margin = options.margin;\r\n                autoScroll.speed  = options.speed;\r\n\r\n                autoScroll.start(this);\r\n            }\r\n        },\r\n\r\n        _updateEventTargets: function (target, currentTarget) {\r\n            this._eventTarget    = target;\r\n            this._curEventTarget = currentTarget;\r\n        }\r\n\r\n    };\r\n\r\n    function getInteractionFromPointer (pointer, eventType, eventTarget) {\r\n        var i = 0, len = interactions.length,\r\n            mouseEvent = (/mouse/i.test(pointer.pointerType || eventType)\r\n                          // MSPointerEvent.MSPOINTER_TYPE_MOUSE\r\n                          || pointer.pointerType === 4),\r\n            interaction;\r\n\r\n        var id = getPointerId(pointer);\r\n\r\n        // try to resume inertia with a new pointer\r\n        if (/down|start/i.test(eventType)) {\r\n            for (i = 0; i < len; i++) {\r\n                interaction = interactions[i];\r\n\r\n                var element = eventTarget;\r\n\r\n                if (interaction.inertiaStatus.active && interaction.target.options[interaction.prepared.name].inertia.allowResume\r\n                    && (interaction.mouse === mouseEvent)) {\r\n                    while (element) {\r\n                        // if the element is the interaction element\r\n                        if (element === interaction.element) {\r\n                            return interaction;\r\n                        }\r\n                        element = parentElement(element);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        // if it's a mouse interaction\r\n        if (mouseEvent || !(supportsTouch || supportsPointerEvent)) {\r\n\r\n            // find a mouse interaction that's not in inertia phase\r\n            for (i = 0; i < len; i++) {\r\n                if (interactions[i].mouse && !interactions[i].inertiaStatus.active) {\r\n                    return interactions[i];\r\n                }\r\n            }\r\n\r\n            // find any interaction specifically for mouse.\r\n            // if the eventType is a mousedown, and inertia is active\r\n            // ignore the interaction\r\n            for (i = 0; i < len; i++) {\r\n                if (interactions[i].mouse && !(/down/.test(eventType) && interactions[i].inertiaStatus.active)) {\r\n                    return interaction;\r\n                }\r\n            }\r\n\r\n            // create a new interaction for mouse\r\n            interaction = new Interaction();\r\n            interaction.mouse = true;\r\n\r\n            return interaction;\r\n        }\r\n\r\n        // get interaction that has this pointer\r\n        for (i = 0; i < len; i++) {\r\n            if (contains(interactions[i].pointerIds, id)) {\r\n                return interactions[i];\r\n            }\r\n        }\r\n\r\n        // at this stage, a pointerUp should not return an interaction\r\n        if (/up|end|out/i.test(eventType)) {\r\n            return null;\r\n        }\r\n\r\n        // get first idle interaction\r\n        for (i = 0; i < len; i++) {\r\n            interaction = interactions[i];\r\n\r\n            if ((!interaction.prepared.name || (interaction.target.options.gesture.enabled))\r\n                && !interaction.interacting()\r\n                && !(!mouseEvent && interaction.mouse)) {\r\n\r\n                return interaction;\r\n            }\r\n        }\r\n\r\n        return new Interaction();\r\n    }\r\n\r\n    function doOnInteractions (method) {\r\n        return (function (event) {\r\n            var interaction,\r\n                eventTarget = getActualElement(event.path\r\n                                               ? event.path[0]\r\n                                               : event.target),\r\n                curEventTarget = getActualElement(event.currentTarget),\r\n                i;\r\n\r\n            if (supportsTouch && /touch/.test(event.type)) {\r\n                prevTouchTime = new Date().getTime();\r\n\r\n                for (i = 0; i < event.changedTouches.length; i++) {\r\n                    var pointer = event.changedTouches[i];\r\n\r\n                    interaction = getInteractionFromPointer(pointer, event.type, eventTarget);\r\n\r\n                    if (!interaction) { continue; }\r\n\r\n                    interaction._updateEventTargets(eventTarget, curEventTarget);\r\n\r\n                    interaction[method](pointer, event, eventTarget, curEventTarget);\r\n                }\r\n            }\r\n            else {\r\n                if (!supportsPointerEvent && /mouse/.test(event.type)) {\r\n                    // ignore mouse events while touch interactions are active\r\n                    for (i = 0; i < interactions.length; i++) {\r\n                        if (!interactions[i].mouse && interactions[i].pointerIsDown) {\r\n                            return;\r\n                        }\r\n                    }\r\n\r\n                    // try to ignore mouse events that are simulated by the browser\r\n                    // after a touch event\r\n                    if (new Date().getTime() - prevTouchTime < 500) {\r\n                        return;\r\n                    }\r\n                }\r\n\r\n                interaction = getInteractionFromPointer(event, event.type, eventTarget);\r\n\r\n                if (!interaction) { return; }\r\n\r\n                interaction._updateEventTargets(eventTarget, curEventTarget);\r\n\r\n                interaction[method](event, event, eventTarget, curEventTarget);\r\n            }\r\n        });\r\n    }\r\n\r\n    function InteractEvent (interaction, event, action, phase, element, related) {\r\n        var client,\r\n            page,\r\n            target      = interaction.target,\r\n            snapStatus  = interaction.snapStatus,\r\n            restrictStatus  = interaction.restrictStatus,\r\n            pointers    = interaction.pointers,\r\n            deltaSource = (target && target.options || defaultOptions).deltaSource,\r\n            sourceX     = deltaSource + 'X',\r\n            sourceY     = deltaSource + 'Y',\r\n            options     = target? target.options: defaultOptions,\r\n            origin      = getOriginXY(target, element),\r\n            starting    = phase === 'start',\r\n            ending      = phase === 'end',\r\n            coords      = starting? interaction.startCoords : interaction.curCoords;\r\n\r\n        element = element || interaction.element;\r\n\r\n        page   = extend({}, coords.page);\r\n        client = extend({}, coords.client);\r\n\r\n        page.x -= origin.x;\r\n        page.y -= origin.y;\r\n\r\n        client.x -= origin.x;\r\n        client.y -= origin.y;\r\n\r\n        var relativePoints = options[action].snap && options[action].snap.relativePoints ;\r\n\r\n        if (checkSnap(target, action) && !(starting && relativePoints && relativePoints.length)) {\r\n            this.snap = {\r\n                range  : snapStatus.range,\r\n                locked : snapStatus.locked,\r\n                x      : snapStatus.snappedX,\r\n                y      : snapStatus.snappedY,\r\n                realX  : snapStatus.realX,\r\n                realY  : snapStatus.realY,\r\n                dx     : snapStatus.dx,\r\n                dy     : snapStatus.dy\r\n            };\r\n\r\n            if (snapStatus.locked) {\r\n                page.x += snapStatus.dx;\r\n                page.y += snapStatus.dy;\r\n                client.x += snapStatus.dx;\r\n                client.y += snapStatus.dy;\r\n            }\r\n        }\r\n\r\n        if (checkRestrict(target, action) && !(starting && options[action].restrict.elementRect) && restrictStatus.restricted) {\r\n            page.x += restrictStatus.dx;\r\n            page.y += restrictStatus.dy;\r\n            client.x += restrictStatus.dx;\r\n            client.y += restrictStatus.dy;\r\n\r\n            this.restrict = {\r\n                dx: restrictStatus.dx,\r\n                dy: restrictStatus.dy\r\n            };\r\n        }\r\n\r\n        this.pageX     = page.x;\r\n        this.pageY     = page.y;\r\n        this.clientX   = client.x;\r\n        this.clientY   = client.y;\r\n\r\n        this.x0        = interaction.startCoords.page.x - origin.x;\r\n        this.y0        = interaction.startCoords.page.y - origin.y;\r\n        this.clientX0  = interaction.startCoords.client.x - origin.x;\r\n        this.clientY0  = interaction.startCoords.client.y - origin.y;\r\n        this.ctrlKey   = event.ctrlKey;\r\n        this.altKey    = event.altKey;\r\n        this.shiftKey  = event.shiftKey;\r\n        this.metaKey   = event.metaKey;\r\n        this.button    = event.button;\r\n        this.buttons   = event.buttons;\r\n        this.target    = element;\r\n        this.t0        = interaction.downTimes[0];\r\n        this.type      = action + (phase || '');\r\n\r\n        this.interaction = interaction;\r\n        this.interactable = target;\r\n\r\n        var inertiaStatus = interaction.inertiaStatus;\r\n\r\n        if (inertiaStatus.active) {\r\n            this.detail = 'inertia';\r\n        }\r\n\r\n        if (related) {\r\n            this.relatedTarget = related;\r\n        }\r\n\r\n        // end event dx, dy is difference between start and end points\r\n        if (ending) {\r\n            if (deltaSource === 'client') {\r\n                this.dx = client.x - interaction.startCoords.client.x;\r\n                this.dy = client.y - interaction.startCoords.client.y;\r\n            }\r\n            else {\r\n                this.dx = page.x - interaction.startCoords.page.x;\r\n                this.dy = page.y - interaction.startCoords.page.y;\r\n            }\r\n        }\r\n        else if (starting) {\r\n            this.dx = 0;\r\n            this.dy = 0;\r\n        }\r\n        // copy properties from previousmove if starting inertia\r\n        else if (phase === 'inertiastart') {\r\n            this.dx = interaction.prevEvent.dx;\r\n            this.dy = interaction.prevEvent.dy;\r\n        }\r\n        else {\r\n            if (deltaSource === 'client') {\r\n                this.dx = client.x - interaction.prevEvent.clientX;\r\n                this.dy = client.y - interaction.prevEvent.clientY;\r\n            }\r\n            else {\r\n                this.dx = page.x - interaction.prevEvent.pageX;\r\n                this.dy = page.y - interaction.prevEvent.pageY;\r\n            }\r\n        }\r\n        if (interaction.prevEvent && interaction.prevEvent.detail === 'inertia'\r\n            && !inertiaStatus.active\r\n            && options[action].inertia && options[action].inertia.zeroResumeDelta) {\r\n\r\n            inertiaStatus.resumeDx += this.dx;\r\n            inertiaStatus.resumeDy += this.dy;\r\n\r\n            this.dx = this.dy = 0;\r\n        }\r\n\r\n        if (action === 'resize' && interaction.resizeAxes) {\r\n            if (options.resize.square) {\r\n                if (interaction.resizeAxes === 'y') {\r\n                    this.dx = this.dy;\r\n                }\r\n                else {\r\n                    this.dy = this.dx;\r\n                }\r\n                this.axes = 'xy';\r\n            }\r\n            else {\r\n                this.axes = interaction.resizeAxes;\r\n\r\n                if (interaction.resizeAxes === 'x') {\r\n                    this.dy = 0;\r\n                }\r\n                else if (interaction.resizeAxes === 'y') {\r\n                    this.dx = 0;\r\n                }\r\n            }\r\n        }\r\n        else if (action === 'gesture') {\r\n            this.touches = [pointers[0], pointers[1]];\r\n\r\n            if (starting) {\r\n                this.distance = touchDistance(pointers, deltaSource);\r\n                this.box      = touchBBox(pointers);\r\n                this.scale    = 1;\r\n                this.ds       = 0;\r\n                this.angle    = touchAngle(pointers, undefined, deltaSource);\r\n                this.da       = 0;\r\n            }\r\n            else if (ending || event instanceof InteractEvent) {\r\n                this.distance = interaction.prevEvent.distance;\r\n                this.box      = interaction.prevEvent.box;\r\n                this.scale    = interaction.prevEvent.scale;\r\n                this.ds       = this.scale - 1;\r\n                this.angle    = interaction.prevEvent.angle;\r\n                this.da       = this.angle - interaction.gesture.startAngle;\r\n            }\r\n            else {\r\n                this.distance = touchDistance(pointers, deltaSource);\r\n                this.box      = touchBBox(pointers);\r\n                this.scale    = this.distance / interaction.gesture.startDistance;\r\n                this.angle    = touchAngle(pointers, interaction.gesture.prevAngle, deltaSource);\r\n\r\n                this.ds = this.scale - interaction.gesture.prevScale;\r\n                this.da = this.angle - interaction.gesture.prevAngle;\r\n            }\r\n        }\r\n\r\n        if (starting) {\r\n            this.timeStamp = interaction.downTimes[0];\r\n            this.dt        = 0;\r\n            this.duration  = 0;\r\n            this.speed     = 0;\r\n            this.velocityX = 0;\r\n            this.velocityY = 0;\r\n        }\r\n        else if (phase === 'inertiastart') {\r\n            this.timeStamp = interaction.prevEvent.timeStamp;\r\n            this.dt        = interaction.prevEvent.dt;\r\n            this.duration  = interaction.prevEvent.duration;\r\n            this.speed     = interaction.prevEvent.speed;\r\n            this.velocityX = interaction.prevEvent.velocityX;\r\n            this.velocityY = interaction.prevEvent.velocityY;\r\n        }\r\n        else {\r\n            this.timeStamp = new Date().getTime();\r\n            this.dt        = this.timeStamp - interaction.prevEvent.timeStamp;\r\n            this.duration  = this.timeStamp - interaction.downTimes[0];\r\n\r\n            if (event instanceof InteractEvent) {\r\n                var dx = this[sourceX] - interaction.prevEvent[sourceX],\r\n                    dy = this[sourceY] - interaction.prevEvent[sourceY],\r\n                    dt = this.dt / 1000;\r\n\r\n                this.speed = hypot(dx, dy) / dt;\r\n                this.velocityX = dx / dt;\r\n                this.velocityY = dy / dt;\r\n            }\r\n            // if normal move or end event, use previous user event coords\r\n            else {\r\n                // speed and velocity in pixels per second\r\n                this.speed = interaction.pointerDelta[deltaSource].speed;\r\n                this.velocityX = interaction.pointerDelta[deltaSource].vx;\r\n                this.velocityY = interaction.pointerDelta[deltaSource].vy;\r\n            }\r\n        }\r\n\r\n        if ((ending || phase === 'inertiastart')\r\n            && interaction.prevEvent.speed > 600 && this.timeStamp - interaction.prevEvent.timeStamp < 150) {\r\n\r\n            var angle = 180 * Math.atan2(interaction.prevEvent.velocityY, interaction.prevEvent.velocityX) / Math.PI,\r\n                overlap = 22.5;\r\n\r\n            if (angle < 0) {\r\n                angle += 360;\r\n            }\r\n\r\n            var left = 135 - overlap <= angle && angle < 225 + overlap,\r\n                up   = 225 - overlap <= angle && angle < 315 + overlap,\r\n\r\n                right = !left && (315 - overlap <= angle || angle <  45 + overlap),\r\n                down  = !up   &&   45 - overlap <= angle && angle < 135 + overlap;\r\n\r\n            this.swipe = {\r\n                up   : up,\r\n                down : down,\r\n                left : left,\r\n                right: right,\r\n                angle: angle,\r\n                speed: interaction.prevEvent.speed,\r\n                velocity: {\r\n                    x: interaction.prevEvent.velocityX,\r\n                    y: interaction.prevEvent.velocityY\r\n                }\r\n            };\r\n        }\r\n    }\r\n\r\n    InteractEvent.prototype = {\r\n        preventDefault: blank,\r\n        stopImmediatePropagation: function () {\r\n            this.immediatePropagationStopped = this.propagationStopped = true;\r\n        },\r\n        stopPropagation: function () {\r\n            this.propagationStopped = true;\r\n        }\r\n    };\r\n\r\n    function preventOriginalDefault () {\r\n        this.originalEvent.preventDefault();\r\n    }\r\n\r\n    function getActionCursor (action) {\r\n        var cursor = '';\r\n\r\n        if (action.name === 'drag') {\r\n            cursor =  actionCursors.drag;\r\n        }\r\n        if (action.name === 'resize') {\r\n            if (action.axis) {\r\n                cursor =  actionCursors[action.name + action.axis];\r\n            }\r\n            else if (action.edges) {\r\n                var cursorKey = 'resize',\r\n                    edgeNames = ['top', 'bottom', 'left', 'right'];\r\n\r\n                for (var i = 0; i < 4; i++) {\r\n                    if (action.edges[edgeNames[i]]) {\r\n                        cursorKey += edgeNames[i];\r\n                    }\r\n                }\r\n\r\n                cursor = actionCursors[cursorKey];\r\n            }\r\n        }\r\n\r\n        return cursor;\r\n    }\r\n\r\n    function checkResizeEdge (name, value, page, element, interactableElement, rect, margin) {\r\n        // false, '', undefined, null\r\n        if (!value) { return false; }\r\n\r\n        // true value, use pointer coords and element rect\r\n        if (value === true) {\r\n            // if dimensions are negative, \"switch\" edges\r\n            var width = isNumber(rect.width)? rect.width : rect.right - rect.left,\r\n                height = isNumber(rect.height)? rect.height : rect.bottom - rect.top;\r\n\r\n            if (width < 0) {\r\n                if      (name === 'left' ) { name = 'right'; }\r\n                else if (name === 'right') { name = 'left' ; }\r\n            }\r\n            if (height < 0) {\r\n                if      (name === 'top'   ) { name = 'bottom'; }\r\n                else if (name === 'bottom') { name = 'top'   ; }\r\n            }\r\n\r\n            if (name === 'left'  ) { return page.x < ((width  >= 0? rect.left: rect.right ) + margin); }\r\n            if (name === 'top'   ) { return page.y < ((height >= 0? rect.top : rect.bottom) + margin); }\r\n\r\n            if (name === 'right' ) { return page.x > ((width  >= 0? rect.right : rect.left) - margin); }\r\n            if (name === 'bottom') { return page.y > ((height >= 0? rect.bottom: rect.top ) - margin); }\r\n        }\r\n\r\n        // the remaining checks require an element\r\n        if (!isElement(element)) { return false; }\r\n\r\n        return isElement(value)\r\n                    // the value is an element to use as a resize handle\r\n                    ? value === element\r\n                    // otherwise check if element matches value as selector\r\n                    : matchesUpTo(element, value, interactableElement);\r\n    }\r\n\r\n    function defaultActionChecker (pointer, interaction, element) {\r\n        var rect = this.getRect(element),\r\n            shouldResize = false,\r\n            action = null,\r\n            resizeAxes = null,\r\n            resizeEdges,\r\n            page = extend({}, interaction.curCoords.page),\r\n            options = this.options;\r\n\r\n        if (!rect) { return null; }\r\n\r\n        if (actionIsEnabled.resize && options.resize.enabled) {\r\n            var resizeOptions = options.resize;\r\n\r\n            resizeEdges = {\r\n                left: false, right: false, top: false, bottom: false\r\n            };\r\n\r\n            // if using resize.edges\r\n            if (isObject(resizeOptions.edges)) {\r\n                for (var edge in resizeEdges) {\r\n                    resizeEdges[edge] = checkResizeEdge(edge,\r\n                                                        resizeOptions.edges[edge],\r\n                                                        page,\r\n                                                        interaction._eventTarget,\r\n                                                        element,\r\n                                                        rect,\r\n                                                        resizeOptions.margin || margin);\r\n                }\r\n\r\n                resizeEdges.left = resizeEdges.left && !resizeEdges.right;\r\n                resizeEdges.top  = resizeEdges.top  && !resizeEdges.bottom;\r\n\r\n                shouldResize = resizeEdges.left || resizeEdges.right || resizeEdges.top || resizeEdges.bottom;\r\n            }\r\n            else {\r\n                var right  = options.resize.axis !== 'y' && page.x > (rect.right  - margin),\r\n                    bottom = options.resize.axis !== 'x' && page.y > (rect.bottom - margin);\r\n\r\n                shouldResize = right || bottom;\r\n                resizeAxes = (right? 'x' : '') + (bottom? 'y' : '');\r\n            }\r\n        }\r\n\r\n        action = shouldResize\r\n            ? 'resize'\r\n            : actionIsEnabled.drag && options.drag.enabled\r\n                ? 'drag'\r\n                : null;\r\n\r\n        if (actionIsEnabled.gesture\r\n            && interaction.pointerIds.length >=2\r\n            && !(interaction.dragging || interaction.resizing)) {\r\n            action = 'gesture';\r\n        }\r\n\r\n        if (action) {\r\n            return {\r\n                name: action,\r\n                axis: resizeAxes,\r\n                edges: resizeEdges\r\n            };\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    // Check if action is enabled globally and the current target supports it\r\n    // If so, return the validated action. Otherwise, return null\r\n    function validateAction (action, interactable) {\r\n        if (!isObject(action)) { return null; }\r\n\r\n        var actionName = action.name,\r\n            options = interactable.options;\r\n\r\n        if ((  (actionName  === 'resize'   && options.resize.enabled )\r\n            || (actionName      === 'drag'     && options.drag.enabled  )\r\n            || (actionName      === 'gesture'  && options.gesture.enabled))\r\n            && actionIsEnabled[actionName]) {\r\n\r\n            if (actionName === 'resize' || actionName === 'resizeyx') {\r\n                actionName = 'resizexy';\r\n            }\r\n\r\n            return action;\r\n        }\r\n        return null;\r\n    }\r\n\r\n    var listeners = {},\r\n        interactionListeners = [\r\n            'dragStart', 'dragMove', 'resizeStart', 'resizeMove', 'gestureStart', 'gestureMove',\r\n            'pointerOver', 'pointerOut', 'pointerHover', 'selectorDown',\r\n            'pointerDown', 'pointerMove', 'pointerUp', 'pointerCancel', 'pointerEnd',\r\n            'addPointer', 'removePointer', 'recordPointer', 'autoScrollMove'\r\n        ];\r\n\r\n    for (var i = 0, len = interactionListeners.length; i < len; i++) {\r\n        var name = interactionListeners[i];\r\n\r\n        listeners[name] = doOnInteractions(name);\r\n    }\r\n\r\n    // bound to the interactable context when a DOM event\r\n    // listener is added to a selector interactable\r\n    function delegateListener (event, useCapture) {\r\n        var fakeEvent = {},\r\n            delegated = delegatedEvents[event.type],\r\n            eventTarget = getActualElement(event.path\r\n                                           ? event.path[0]\r\n                                           : event.target),\r\n            element = eventTarget;\r\n\r\n        useCapture = useCapture? true: false;\r\n\r\n        // duplicate the event so that currentTarget can be changed\r\n        for (var prop in event) {\r\n            fakeEvent[prop] = event[prop];\r\n        }\r\n\r\n        fakeEvent.originalEvent = event;\r\n        fakeEvent.preventDefault = preventOriginalDefault;\r\n\r\n        // climb up document tree looking for selector matches\r\n        while (isElement(element)) {\r\n            for (var i = 0; i < delegated.selectors.length; i++) {\r\n                var selector = delegated.selectors[i],\r\n                    context = delegated.contexts[i];\r\n\r\n                if (matchesSelector(element, selector)\r\n                    && nodeContains(context, eventTarget)\r\n                    && nodeContains(context, element)) {\r\n\r\n                    var listeners = delegated.listeners[i];\r\n\r\n                    fakeEvent.currentTarget = element;\r\n\r\n                    for (var j = 0; j < listeners.length; j++) {\r\n                        if (listeners[j][1] === useCapture) {\r\n                            listeners[j][0](fakeEvent);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n            element = parentElement(element);\r\n        }\r\n    }\r\n\r\n    function delegateUseCapture (event) {\r\n        return delegateListener.call(this, event, true);\r\n    }\r\n\r\n    interactables.indexOfElement = function indexOfElement (element, context) {\r\n        context = context || document;\r\n\r\n        for (var i = 0; i < this.length; i++) {\r\n            var interactable = this[i];\r\n\r\n            if ((interactable.selector === element\r\n                && (interactable._context === context))\r\n                || (!interactable.selector && interactable._element === element)) {\r\n\r\n                return i;\r\n            }\r\n        }\r\n        return -1;\r\n    };\r\n\r\n    interactables.get = function interactableGet (element, options) {\r\n        return this[this.indexOfElement(element, options && options.context)];\r\n    };\r\n\r\n    interactables.forEachSelector = function (callback) {\r\n        for (var i = 0; i < this.length; i++) {\r\n            var interactable = this[i];\r\n\r\n            if (!interactable.selector) {\r\n                continue;\r\n            }\r\n\r\n            var ret = callback(interactable, interactable.selector, interactable._context, i, this);\r\n\r\n            if (ret !== undefined) {\r\n                return ret;\r\n            }\r\n        }\r\n    };\r\n\r\n    /*\\\r\n     * interact\r\n     [ method ]\r\n     *\r\n     * The methods of this variable can be used to set elements as\r\n     * interactables and also to change various default settings.\r\n     *\r\n     * Calling it as a function and passing an element or a valid CSS selector\r\n     * string returns an Interactable object which has various methods to\r\n     * configure it.\r\n     *\r\n     - element (Element | string) The HTML or SVG Element to interact with or CSS selector\r\n     = (object) An @Interactable\r\n     *\r\n     > Usage\r\n     | interact(document.getElementById('draggable')).draggable(true);\r\n     |\r\n     | var rectables = interact('rect');\r\n     | rectables\r\n     |     .gesturable(true)\r\n     |     .on('gesturemove', function (event) {\r\n     |         // something cool...\r\n     |     })\r\n     |     .autoScroll(true);\r\n    \\*/\r\n    function interact (element, options) {\r\n        return interactables.get(element, options) || new Interactable(element, options);\r\n    }\r\n\r\n    /*\\\r\n     * Interactable\r\n     [ property ]\r\n     **\r\n     * Object type returned by @interact\r\n    \\*/\r\n    function Interactable (element, options) {\r\n        this._element = element;\r\n        this._iEvents = this._iEvents || {};\r\n\r\n        var _window;\r\n\r\n        if (trySelector(element)) {\r\n            this.selector = element;\r\n\r\n            var context = options && options.context;\r\n\r\n            _window = context? getWindow(context) : window;\r\n\r\n            if (context && (_window.Node\r\n                    ? context instanceof _window.Node\r\n                    : (isElement(context) || context === _window.document))) {\r\n\r\n                this._context = context;\r\n            }\r\n        }\r\n        else {\r\n            _window = getWindow(element);\r\n\r\n            if (isElement(element, _window)) {\r\n\r\n                if (PointerEvent) {\r\n                    events.add(this._element, pEventTypes.down, listeners.pointerDown );\r\n                    events.add(this._element, pEventTypes.move, listeners.pointerHover);\r\n                }\r\n                else {\r\n                    events.add(this._element, 'mousedown' , listeners.pointerDown );\r\n                    events.add(this._element, 'mousemove' , listeners.pointerHover);\r\n                    events.add(this._element, 'touchstart', listeners.pointerDown );\r\n                    events.add(this._element, 'touchmove' , listeners.pointerHover);\r\n                }\r\n            }\r\n        }\r\n\r\n        this._doc = _window.document;\r\n\r\n        if (!contains(documents, this._doc)) {\r\n            listenToDocument(this._doc);\r\n        }\r\n\r\n        interactables.push(this);\r\n\r\n        this.set(options);\r\n    }\r\n\r\n    Interactable.prototype = {\r\n        setOnEvents: function (action, phases) {\r\n            if (action === 'drop') {\r\n                if (isFunction(phases.ondrop)          ) { this.ondrop           = phases.ondrop          ; }\r\n                if (isFunction(phases.ondropactivate)  ) { this.ondropactivate   = phases.ondropactivate  ; }\r\n                if (isFunction(phases.ondropdeactivate)) { this.ondropdeactivate = phases.ondropdeactivate; }\r\n                if (isFunction(phases.ondragenter)     ) { this.ondragenter      = phases.ondragenter     ; }\r\n                if (isFunction(phases.ondragleave)     ) { this.ondragleave      = phases.ondragleave     ; }\r\n                if (isFunction(phases.ondropmove)      ) { this.ondropmove       = phases.ondropmove      ; }\r\n            }\r\n            else {\r\n                action = 'on' + action;\r\n\r\n                if (isFunction(phases.onstart)       ) { this[action + 'start'         ] = phases.onstart         ; }\r\n                if (isFunction(phases.onmove)        ) { this[action + 'move'          ] = phases.onmove          ; }\r\n                if (isFunction(phases.onend)         ) { this[action + 'end'           ] = phases.onend           ; }\r\n                if (isFunction(phases.oninertiastart)) { this[action + 'inertiastart'  ] = phases.oninertiastart  ; }\r\n            }\r\n\r\n            return this;\r\n        },\r\n\r\n        /*\\\r\n         * Interactable.draggable\r\n         [ method ]\r\n         *\r\n         * Gets or sets whether drag actions can be performed on the\r\n         * Interactable\r\n         *\r\n         = (boolean) Indicates if this can be the target of drag events\r\n         | var isDraggable = interact('ul li').draggable();\r\n         * or\r\n         - options (boolean | object) #optional true/false or An object with event listeners to be fired on drag events (object makes the Interactable draggable)\r\n         = (object) This Interactable\r\n         | interact(element).draggable({\r\n         |     onstart: function (event) {},\r\n         |     onmove : function (event) {},\r\n         |     onend  : function (event) {},\r\n         |\r\n         |     // the axis in which the first movement must be\r\n         |     // for the drag sequence to start\r\n         |     // 'xy' by default - any direction\r\n         |     axis: 'x' || 'y' || 'xy',\r\n         |\r\n         |     // max number of drags that can happen concurrently\r\n         |     // with elements of this Interactable. Infinity by default\r\n         |     max: Infinity,\r\n         |\r\n         |     // max number of drags that can target the same element+Interactable\r\n         |     // 1 by default\r\n         |     maxPerElement: 2\r\n         | });\r\n        \\*/\r\n        draggable: function (options) {\r\n            if (isObject(options)) {\r\n                this.options.drag.enabled = options.enabled === false? false: true;\r\n                this.setPerAction('drag', options);\r\n                this.setOnEvents('drag', options);\r\n\r\n                if (/^x$|^y$|^xy$/.test(options.axis)) {\r\n                    this.options.drag.axis = options.axis;\r\n                }\r\n                else if (options.axis === null) {\r\n                    delete this.options.drag.axis;\r\n                }\r\n\r\n                return this;\r\n            }\r\n\r\n            if (isBool(options)) {\r\n                this.options.drag.enabled = options;\r\n\r\n                return this;\r\n            }\r\n\r\n            return this.options.drag;\r\n        },\r\n\r\n        setPerAction: function (action, options) {\r\n            // for all the default per-action options\r\n            for (var option in options) {\r\n                // if this option exists for this action\r\n                if (option in defaultOptions[action]) {\r\n                    // if the option in the options arg is an object value\r\n                    if (isObject(options[option])) {\r\n                        // duplicate the object\r\n                        this.options[action][option] = extend(this.options[action][option] || {}, options[option]);\r\n\r\n                        if (isObject(defaultOptions.perAction[option]) && 'enabled' in defaultOptions.perAction[option]) {\r\n                            this.options[action][option].enabled = options[option].enabled === false? false : true;\r\n                        }\r\n                    }\r\n                    else if (isBool(options[option]) && isObject(defaultOptions.perAction[option])) {\r\n                        this.options[action][option].enabled = options[option];\r\n                    }\r\n                    else if (options[option] !== undefined) {\r\n                        // or if it's not undefined, do a plain assignment\r\n                        this.options[action][option] = options[option];\r\n                    }\r\n                }\r\n            }\r\n        },\r\n\r\n        /*\\\r\n         * Interactable.dropzone\r\n         [ method ]\r\n         *\r\n         * Returns or sets whether elements can be dropped onto this\r\n         * Interactable to trigger drop events\r\n         *\r\n         * Dropzones can receive the following events:\r\n         *  - `dropactivate` and `dropdeactivate` when an acceptable drag starts and ends\r\n         *  - `dragenter` and `dragleave` when a draggable enters and leaves the dropzone\r\n         *  - `dragmove` when a draggable that has entered the dropzone is moved\r\n         *  - `drop` when a draggable is dropped into this dropzone\r\n         *\r\n         *  Use the `accept` option to allow only elements that match the given CSS selector or element.\r\n         *\r\n         *  Use the `overlap` option to set how drops are checked for. The allowed values are:\r\n         *   - `'pointer'`, the pointer must be over the dropzone (default)\r\n         *   - `'center'`, the draggable element's center must be over the dropzone\r\n         *   - a number from 0-1 which is the `(intersection area) / (draggable area)`.\r\n         *       e.g. `0.5` for drop to happen when half of the area of the\r\n         *       draggable is over the dropzone\r\n         *\r\n         - options (boolean | object | null) #optional The new value to be set.\r\n         | interact('.drop').dropzone({\r\n         |   accept: '.can-drop' || document.getElementById('single-drop'),\r\n         |   overlap: 'pointer' || 'center' || zeroToOne\r\n         | }\r\n         = (boolean | object) The current setting or this Interactable\r\n        \\*/\r\n        dropzone: function (options) {\r\n            if (isObject(options)) {\r\n                this.options.drop.enabled = options.enabled === false? false: true;\r\n                this.setOnEvents('drop', options);\r\n\r\n                if (/^(pointer|center)$/.test(options.overlap)) {\r\n                    this.options.drop.overlap = options.overlap;\r\n                }\r\n                else if (isNumber(options.overlap)) {\r\n                    this.options.drop.overlap = Math.max(Math.min(1, options.overlap), 0);\r\n                }\r\n                if ('accept' in options) {\r\n                  this.options.drop.accept = options.accept;\r\n                }\r\n                if ('checker' in options) {\r\n                  this.options.drop.checker = options.checker;\r\n                }\r\n\r\n                return this;\r\n            }\r\n\r\n            if (isBool(options)) {\r\n                this.options.drop.enabled = options;\r\n\r\n                return this;\r\n            }\r\n\r\n            return this.options.drop;\r\n        },\r\n\r\n        dropCheck: function (dragEvent, event, draggable, draggableElement, dropElement, rect) {\r\n            var dropped = false;\r\n\r\n            // if the dropzone has no rect (eg. display: none)\r\n            // call the custom dropChecker or just return false\r\n            if (!(rect = rect || this.getRect(dropElement))) {\r\n                return (this.options.drop.checker\r\n                    ? this.options.drop.checker(dragEvent, event, dropped, this, dropElement, draggable, draggableElement)\r\n                    : false);\r\n            }\r\n\r\n            var dropOverlap = this.options.drop.overlap;\r\n\r\n            if (dropOverlap === 'pointer') {\r\n                var page = getPageXY(dragEvent),\r\n                    origin = getOriginXY(draggable, draggableElement),\r\n                    horizontal,\r\n                    vertical;\r\n\r\n                page.x += origin.x;\r\n                page.y += origin.y;\r\n\r\n                horizontal = (page.x > rect.left) && (page.x < rect.right);\r\n                vertical   = (page.y > rect.top ) && (page.y < rect.bottom);\r\n\r\n                dropped = horizontal && vertical;\r\n            }\r\n\r\n            var dragRect = draggable.getRect(draggableElement);\r\n\r\n            if (dropOverlap === 'center') {\r\n                var cx = dragRect.left + dragRect.width  / 2,\r\n                    cy = dragRect.top  + dragRect.height / 2;\r\n\r\n                dropped = cx >= rect.left && cx <= rect.right && cy >= rect.top && cy <= rect.bottom;\r\n            }\r\n\r\n            if (isNumber(dropOverlap)) {\r\n                var overlapArea  = (Math.max(0, Math.min(rect.right , dragRect.right ) - Math.max(rect.left, dragRect.left))\r\n                                  * Math.max(0, Math.min(rect.bottom, dragRect.bottom) - Math.max(rect.top , dragRect.top ))),\r\n                    overlapRatio = overlapArea / (dragRect.width * dragRect.height);\r\n\r\n                dropped = overlapRatio >= dropOverlap;\r\n            }\r\n\r\n            if (this.options.drop.checker) {\r\n                dropped = this.options.drop.checker(dragEvent, event, dropped, this, dropElement, draggable, draggableElement);\r\n            }\r\n\r\n            return dropped;\r\n        },\r\n\r\n        /*\\\r\n         * Interactable.dropChecker\r\n         [ method ]\r\n         *\r\n         * DEPRECATED. Use interactable.dropzone({ checker: function... }) instead.\r\n         *\r\n         * Gets or sets the function used to check if a dragged element is\r\n         * over this Interactable.\r\n         *\r\n         - checker (function) #optional The function that will be called when checking for a drop\r\n         = (Function | Interactable) The checker function or this Interactable\r\n         *\r\n         * The checker function takes the following arguments:\r\n         *\r\n         - dragEvent (InteractEvent) The related dragmove or dragend event\r\n         - event (TouchEvent | PointerEvent | MouseEvent) The user move/up/end Event related to the dragEvent\r\n         - dropped (boolean) The value from the default drop checker\r\n         - dropzone (Interactable) The dropzone interactable\r\n         - dropElement (Element) The dropzone element\r\n         - draggable (Interactable) The Interactable being dragged\r\n         - draggableElement (Element) The actual element that's being dragged\r\n         *\r\n         > Usage:\r\n         | interact(target)\r\n         | .dropChecker(function(dragEvent,         // related dragmove or dragend event\r\n         |                       event,             // TouchEvent/PointerEvent/MouseEvent\r\n         |                       dropped,           // bool result of the default checker\r\n         |                       dropzone,          // dropzone Interactable\r\n         |                       dropElement,       // dropzone elemnt\r\n         |                       draggable,         // draggable Interactable\r\n         |                       draggableElement) {// draggable element\r\n         |\r\n         |   return dropped && event.target.hasAttribute('allow-drop');\r\n         | }\r\n        \\*/\r\n        dropChecker: function (checker) {\r\n            if (isFunction(checker)) {\r\n                this.options.drop.checker = checker;\r\n\r\n                return this;\r\n            }\r\n            if (checker === null) {\r\n                delete this.options.getRect;\r\n\r\n                return this;\r\n            }\r\n\r\n            return this.options.drop.checker;\r\n        },\r\n\r\n        /*\\\r\n         * Interactable.accept\r\n         [ method ]\r\n         *\r\n         * Deprecated. add an `accept` property to the options object passed to\r\n         * @Interactable.dropzone instead.\r\n         *\r\n         * Gets or sets the Element or CSS selector match that this\r\n         * Interactable accepts if it is a dropzone.\r\n         *\r\n         - newValue (Element | string | null) #optional\r\n         * If it is an Element, then only that element can be dropped into this dropzone.\r\n         * If it is a string, the element being dragged must match it as a selector.\r\n         * If it is null, the accept options is cleared - it accepts any element.\r\n         *\r\n         = (string | Element | null | Interactable) The current accept option if given `undefined` or this Interactable\r\n        \\*/\r\n        accept: function (newValue) {\r\n            if (isElement(newValue)) {\r\n                this.options.drop.accept = newValue;\r\n\r\n                return this;\r\n            }\r\n\r\n            // test if it is a valid CSS selector\r\n            if (trySelector(newValue)) {\r\n                this.options.drop.accept = newValue;\r\n\r\n                return this;\r\n            }\r\n\r\n            if (newValue === null) {\r\n                delete this.options.drop.accept;\r\n\r\n                return this;\r\n            }\r\n\r\n            return this.options.drop.accept;\r\n        },\r\n\r\n        /*\\\r\n         * Interactable.resizable\r\n         [ method ]\r\n         *\r\n         * Gets or sets whether resize actions can be performed on the\r\n         * Interactable\r\n         *\r\n         = (boolean) Indicates if this can be the target of resize elements\r\n         | var isResizeable = interact('input[type=text]').resizable();\r\n         * or\r\n         - options (boolean | object) #optional true/false or An object with event listeners to be fired on resize events (object makes the Interactable resizable)\r\n         = (object) This Interactable\r\n         | interact(element).resizable({\r\n         |     onstart: function (event) {},\r\n         |     onmove : function (event) {},\r\n         |     onend  : function (event) {},\r\n         |\r\n         |     edges: {\r\n         |       top   : true,       // Use pointer coords to check for resize.\r\n         |       left  : false,      // Disable resizing from left edge.\r\n         |       bottom: '.resize-s',// Resize if pointer target matches selector\r\n         |       right : handleEl    // Resize if pointer target is the given Element\r\n         |     },\r\n         |\r\n         |     // Width and height can be adjusted independently. When `true`, width and\r\n         |     // height are adjusted at a 1:1 ratio.\r\n         |     square: false,\r\n         |\r\n         |     // Width and height can be adjusted independently. When `true`, width and\r\n         |     // height maintain the aspect ratio they had when resizing started.\r\n         |     preserveAspectRatio: false,\r\n         |\r\n         |     // a value of 'none' will limit the resize rect to a minimum of 0x0\r\n         |     // 'negate' will allow the rect to have negative width/height\r\n         |     // 'reposition' will keep the width/height positive by swapping\r\n         |     // the top and bottom edges and/or swapping the left and right edges\r\n         |     invert: 'none' || 'negate' || 'reposition'\r\n         |\r\n         |     // limit multiple resizes.\r\n         |     // See the explanation in the @Interactable.draggable example\r\n         |     max: Infinity,\r\n         |     maxPerElement: 1,\r\n         | });\r\n        \\*/\r\n        resizable: function (options) {\r\n            if (isObject(options)) {\r\n                this.options.resize.enabled = options.enabled === false? false: true;\r\n                this.setPerAction('resize', options);\r\n                this.setOnEvents('resize', options);\r\n\r\n                if (/^x$|^y$|^xy$/.test(options.axis)) {\r\n                    this.options.resize.axis = options.axis;\r\n                }\r\n                else if (options.axis === null) {\r\n                    this.options.resize.axis = defaultOptions.resize.axis;\r\n                }\r\n\r\n                if (isBool(options.preserveAspectRatio)) {\r\n                    this.options.resize.preserveAspectRatio = options.preserveAspectRatio;\r\n                }\r\n                else if (isBool(options.square)) {\r\n                    this.options.resize.square = options.square;\r\n                }\r\n\r\n                return this;\r\n            }\r\n            if (isBool(options)) {\r\n                this.options.resize.enabled = options;\r\n\r\n                return this;\r\n            }\r\n            return this.options.resize;\r\n        },\r\n\r\n        /*\\\r\n         * Interactable.squareResize\r\n         [ method ]\r\n         *\r\n         * Deprecated. Add a `square: true || false` property to @Interactable.resizable instead\r\n         *\r\n         * Gets or sets whether resizing is forced 1:1 aspect\r\n         *\r\n         = (boolean) Current setting\r\n         *\r\n         * or\r\n         *\r\n         - newValue (boolean) #optional\r\n         = (object) this Interactable\r\n        \\*/\r\n        squareResize: function (newValue) {\r\n            if (isBool(newValue)) {\r\n                this.options.resize.square = newValue;\r\n\r\n                return this;\r\n            }\r\n\r\n            if (newValue === null) {\r\n                delete this.options.resize.square;\r\n\r\n                return this;\r\n            }\r\n\r\n            return this.options.resize.square;\r\n        },\r\n\r\n        /*\\\r\n         * Interactable.gesturable\r\n         [ method ]\r\n         *\r\n         * Gets or sets whether multitouch gestures can be performed on the\r\n         * Interactable's element\r\n         *\r\n         = (boolean) Indicates if this can be the target of gesture events\r\n         | var isGestureable = interact(element).gesturable();\r\n         * or\r\n         - options (boolean | object) #optional true/false or An object with event listeners to be fired on gesture events (makes the Interactable gesturable)\r\n         = (object) this Interactable\r\n         | interact(element).gesturable({\r\n         |     onstart: function (event) {},\r\n         |     onmove : function (event) {},\r\n         |     onend  : function (event) {},\r\n         |\r\n         |     // limit multiple gestures.\r\n         |     // See the explanation in @Interactable.draggable example\r\n         |     max: Infinity,\r\n         |     maxPerElement: 1,\r\n         | });\r\n        \\*/\r\n        gesturable: function (options) {\r\n            if (isObject(options)) {\r\n                this.options.gesture.enabled = options.enabled === false? false: true;\r\n                this.setPerAction('gesture', options);\r\n                this.setOnEvents('gesture', options);\r\n\r\n                return this;\r\n            }\r\n\r\n            if (isBool(options)) {\r\n                this.options.gesture.enabled = options;\r\n\r\n                return this;\r\n            }\r\n\r\n            return this.options.gesture;\r\n        },\r\n\r\n        /*\\\r\n         * Interactable.autoScroll\r\n         [ method ]\r\n         **\r\n         * Deprecated. Add an `autoscroll` property to the options object\r\n         * passed to @Interactable.draggable or @Interactable.resizable instead.\r\n         *\r\n         * Returns or sets whether dragging and resizing near the edges of the\r\n         * window/container trigger autoScroll for this Interactable\r\n         *\r\n         = (object) Object with autoScroll properties\r\n         *\r\n         * or\r\n         *\r\n         - options (object | boolean) #optional\r\n         * options can be:\r\n         * - an object with margin, distance and interval properties,\r\n         * - true or false to enable or disable autoScroll or\r\n         = (Interactable) this Interactable\r\n        \\*/\r\n        autoScroll: function (options) {\r\n            if (isObject(options)) {\r\n                options = extend({ actions: ['drag', 'resize']}, options);\r\n            }\r\n            else if (isBool(options)) {\r\n                options = { actions: ['drag', 'resize'], enabled: options };\r\n            }\r\n\r\n            return this.setOptions('autoScroll', options);\r\n        },\r\n\r\n        /*\\\r\n         * Interactable.snap\r\n         [ method ]\r\n         **\r\n         * Deprecated. Add a `snap` property to the options object passed\r\n         * to @Interactable.draggable or @Interactable.resizable instead.\r\n         *\r\n         * Returns or sets if and how action coordinates are snapped. By\r\n         * default, snapping is relative to the pointer coordinates. You can\r\n         * change this by setting the\r\n         * [`elementOrigin`](https://github.com/taye/interact.js/pull/72).\r\n         **\r\n         = (boolean | object) `false` if snap is disabled; object with snap properties if snap is enabled\r\n         **\r\n         * or\r\n         **\r\n         - options (object | boolean | null) #optional\r\n         = (Interactable) this Interactable\r\n         > Usage\r\n         | interact(document.querySelector('#thing')).snap({\r\n         |     targets: [\r\n         |         // snap to this specific point\r\n         |         {\r\n         |             x: 100,\r\n         |             y: 100,\r\n         |             range: 25\r\n         |         },\r\n         |         // give this function the x and y page coords and snap to the object returned\r\n         |         function (x, y) {\r\n         |             return {\r\n         |                 x: x,\r\n         |                 y: (75 + 50 * Math.sin(x * 0.04)),\r\n         |                 range: 40\r\n         |             };\r\n         |         },\r\n         |         // create a function that snaps to a grid\r\n         |         interact.createSnapGrid({\r\n         |             x: 50,\r\n         |             y: 50,\r\n         |             range: 10,              // optional\r\n         |             offset: { x: 5, y: 10 } // optional\r\n         |         })\r\n         |     ],\r\n         |     // do not snap during normal movement.\r\n         |     // Instead, trigger only one snapped move event\r\n         |     // immediately before the end event.\r\n         |     endOnly: true,\r\n         |\r\n         |     relativePoints: [\r\n         |         { x: 0, y: 0 },  // snap relative to the top left of the element\r\n         |         { x: 1, y: 1 },  // and also to the bottom right\r\n         |     ],  \r\n         |\r\n         |     // offset the snap target coordinates\r\n         |     // can be an object with x/y or 'startCoords'\r\n         |     offset: { x: 50, y: 50 }\r\n         |   }\r\n         | });\r\n        \\*/\r\n        snap: function (options) {\r\n            var ret = this.setOptions('snap', options);\r\n\r\n            if (ret === this) { return this; }\r\n\r\n            return ret.drag;\r\n        },\r\n\r\n        setOptions: function (option, options) {\r\n            var actions = options && isArray(options.actions)\r\n                    ? options.actions\r\n                    : ['drag'];\r\n\r\n            var i;\r\n\r\n            if (isObject(options) || isBool(options)) {\r\n                for (i = 0; i < actions.length; i++) {\r\n                    var action = /resize/.test(actions[i])? 'resize' : actions[i];\r\n\r\n                    if (!isObject(this.options[action])) { continue; }\r\n\r\n                    var thisOption = this.options[action][option];\r\n\r\n                    if (isObject(options)) {\r\n                        extend(thisOption, options);\r\n                        thisOption.enabled = options.enabled === false? false: true;\r\n\r\n                        if (option === 'snap') {\r\n                            if (thisOption.mode === 'grid') {\r\n                                thisOption.targets = [\r\n                                    interact.createSnapGrid(extend({\r\n                                        offset: thisOption.gridOffset || { x: 0, y: 0 }\r\n                                    }, thisOption.grid || {}))\r\n                                ];\r\n                            }\r\n                            else if (thisOption.mode === 'anchor') {\r\n                                thisOption.targets = thisOption.anchors;\r\n                            }\r\n                            else if (thisOption.mode === 'path') {\r\n                                thisOption.targets = thisOption.paths;\r\n                            }\r\n\r\n                            if ('elementOrigin' in options) {\r\n                                thisOption.relativePoints = [options.elementOrigin];\r\n                            }\r\n                        }\r\n                    }\r\n                    else if (isBool(options)) {\r\n                        thisOption.enabled = options;\r\n                    }\r\n                }\r\n\r\n                return this;\r\n            }\r\n\r\n            var ret = {},\r\n                allActions = ['drag', 'resize', 'gesture'];\r\n\r\n            for (i = 0; i < allActions.length; i++) {\r\n                if (option in defaultOptions[allActions[i]]) {\r\n                    ret[allActions[i]] = this.options[allActions[i]][option];\r\n                }\r\n            }\r\n\r\n            return ret;\r\n        },\r\n\r\n\r\n        /*\\\r\n         * Interactable.inertia\r\n         [ method ]\r\n         **\r\n         * Deprecated. Add an `inertia` property to the options object passed\r\n         * to @Interactable.draggable or @Interactable.resizable instead.\r\n         *\r\n         * Returns or sets if and how events continue to run after the pointer is released\r\n         **\r\n         = (boolean | object) `false` if inertia is disabled; `object` with inertia properties if inertia is enabled\r\n         **\r\n         * or\r\n         **\r\n         - options (object | boolean | null) #optional\r\n         = (Interactable) this Interactable\r\n         > Usage\r\n         | // enable and use default settings\r\n         | interact(element).inertia(true);\r\n         |\r\n         | // enable and use custom settings\r\n         | interact(element).inertia({\r\n         |     // value greater than 0\r\n         |     // high values slow the object down more quickly\r\n         |     resistance     : 16,\r\n         |\r\n         |     // the minimum launch speed (pixels per second) that results in inertia start\r\n         |     minSpeed       : 200,\r\n         |\r\n         |     // inertia will stop when the object slows down to this speed\r\n         |     endSpeed       : 20,\r\n         |\r\n         |     // boolean; should actions be resumed when the pointer goes down during inertia\r\n         |     allowResume    : true,\r\n         |\r\n         |     // boolean; should the jump when resuming from inertia be ignored in event.dx/dy\r\n         |     zeroResumeDelta: false,\r\n         |\r\n         |     // if snap/restrict are set to be endOnly and inertia is enabled, releasing\r\n         |     // the pointer without triggering inertia will animate from the release\r\n         |     // point to the snaped/restricted point in the given amount of time (ms)\r\n         |     smoothEndDuration: 300,\r\n         |\r\n         |     // an array of action types that can have inertia (no gesture)\r\n         |     actions        : ['drag', 'resize']\r\n         | });\r\n         |\r\n         | // reset custom settings and use all defaults\r\n         | interact(element).inertia(null);\r\n        \\*/\r\n        inertia: function (options) {\r\n            var ret = this.setOptions('inertia', options);\r\n\r\n            if (ret === this) { return this; }\r\n\r\n            return ret.drag;\r\n        },\r\n\r\n        getAction: function (pointer, event, interaction, element) {\r\n            var action = this.defaultActionChecker(pointer, interaction, element);\r\n\r\n            if (this.options.actionChecker) {\r\n                return this.options.actionChecker(pointer, event, action, this, element, interaction);\r\n            }\r\n\r\n            return action;\r\n        },\r\n\r\n        defaultActionChecker: defaultActionChecker,\r\n\r\n        /*\\\r\n         * Interactable.actionChecker\r\n         [ method ]\r\n         *\r\n         * Gets or sets the function used to check action to be performed on\r\n         * pointerDown\r\n         *\r\n         - checker (function | null) #optional A function which takes a pointer event, defaultAction string, interactable, element and interaction as parameters and returns an object with name property 'drag' 'resize' or 'gesture' and optionally an `edges` object with boolean 'top', 'left', 'bottom' and right props.\r\n         = (Function | Interactable) The checker function or this Interactable\r\n         *\r\n         | interact('.resize-drag')\r\n         |   .resizable(true)\r\n         |   .draggable(true)\r\n         |   .actionChecker(function (pointer, event, action, interactable, element, interaction) {\r\n         |\r\n         |   if (interact.matchesSelector(event.target, '.drag-handle') {\r\n         |     // force drag with handle target\r\n         |     action.name = drag;\r\n         |   }\r\n         |   else {\r\n         |     // resize from the top and right edges\r\n         |     action.name  = 'resize';\r\n         |     action.edges = { top: true, right: true };\r\n         |   }\r\n         |\r\n         |   return action;\r\n         | });\r\n        \\*/\r\n        actionChecker: function (checker) {\r\n            if (isFunction(checker)) {\r\n                this.options.actionChecker = checker;\r\n\r\n                return this;\r\n            }\r\n\r\n            if (checker === null) {\r\n                delete this.options.actionChecker;\r\n\r\n                return this;\r\n            }\r\n\r\n            return this.options.actionChecker;\r\n        },\r\n\r\n        /*\\\r\n         * Interactable.getRect\r\n         [ method ]\r\n         *\r\n         * The default function to get an Interactables bounding rect. Can be\r\n         * overridden using @Interactable.rectChecker.\r\n         *\r\n         - element (Element) #optional The element to measure.\r\n         = (object) The object's bounding rectangle.\r\n         o {\r\n         o     top   : 0,\r\n         o     left  : 0,\r\n         o     bottom: 0,\r\n         o     right : 0,\r\n         o     width : 0,\r\n         o     height: 0\r\n         o }\r\n        \\*/\r\n        getRect: function rectCheck (element) {\r\n            element = element || this._element;\r\n\r\n            if (this.selector && !(isElement(element))) {\r\n                element = this._context.querySelector(this.selector);\r\n            }\r\n\r\n            return getElementRect(element);\r\n        },\r\n\r\n        /*\\\r\n         * Interactable.rectChecker\r\n         [ method ]\r\n         *\r\n         * Returns or sets the function used to calculate the interactable's\r\n         * element's rectangle\r\n         *\r\n         - checker (function) #optional A function which returns this Interactable's bounding rectangle. See @Interactable.getRect\r\n         = (function | object) The checker function or this Interactable\r\n        \\*/\r\n        rectChecker: function (checker) {\r\n            if (isFunction(checker)) {\r\n                this.getRect = checker;\r\n\r\n                return this;\r\n            }\r\n\r\n            if (checker === null) {\r\n                delete this.options.getRect;\r\n\r\n                return this;\r\n            }\r\n\r\n            return this.getRect;\r\n        },\r\n\r\n        /*\\\r\n         * Interactable.styleCursor\r\n         [ method ]\r\n         *\r\n         * Returns or sets whether the action that would be performed when the\r\n         * mouse on the element are checked on `mousemove` so that the cursor\r\n         * may be styled appropriately\r\n         *\r\n         - newValue (boolean) #optional\r\n         = (boolean | Interactable) The current setting or this Interactable\r\n        \\*/\r\n        styleCursor: function (newValue) {\r\n            if (isBool(newValue)) {\r\n                this.options.styleCursor = newValue;\r\n\r\n                return this;\r\n            }\r\n\r\n            if (newValue === null) {\r\n                delete this.options.styleCursor;\r\n\r\n                return this;\r\n            }\r\n\r\n            return this.options.styleCursor;\r\n        },\r\n\r\n        /*\\\r\n         * Interactable.preventDefault\r\n         [ method ]\r\n         *\r\n         * Returns or sets whether to prevent the browser's default behaviour\r\n         * in response to pointer events. Can be set to:\r\n         *  - `'always'` to always prevent\r\n         *  - `'never'` to never prevent\r\n         *  - `'auto'` to let interact.js try to determine what would be best\r\n         *\r\n         - newValue (string) #optional `true`, `false` or `'auto'`\r\n         = (string | Interactable) The current setting or this Interactable\r\n        \\*/\r\n        preventDefault: function (newValue) {\r\n            if (/^(always|never|auto)$/.test(newValue)) {\r\n                this.options.preventDefault = newValue;\r\n                return this;\r\n            }\r\n\r\n            if (isBool(newValue)) {\r\n                this.options.preventDefault = newValue? 'always' : 'never';\r\n                return this;\r\n            }\r\n\r\n            return this.options.preventDefault;\r\n        },\r\n\r\n        /*\\\r\n         * Interactable.origin\r\n         [ method ]\r\n         *\r\n         * Gets or sets the origin of the Interactable's element.  The x and y\r\n         * of the origin will be subtracted from action event coordinates.\r\n         *\r\n         - origin (object | string) #optional An object eg. { x: 0, y: 0 } or string 'parent', 'self' or any CSS selector\r\n         * OR\r\n         - origin (Element) #optional An HTML or SVG Element whose rect will be used\r\n         **\r\n         = (object) The current origin or this Interactable\r\n        \\*/\r\n        origin: function (newValue) {\r\n            if (trySelector(newValue)) {\r\n                this.options.origin = newValue;\r\n                return this;\r\n            }\r\n            else if (isObject(newValue)) {\r\n                this.options.origin = newValue;\r\n                return this;\r\n            }\r\n\r\n            return this.options.origin;\r\n        },\r\n\r\n        /*\\\r\n         * Interactable.deltaSource\r\n         [ method ]\r\n         *\r\n         * Returns or sets the mouse coordinate types used to calculate the\r\n         * movement of the pointer.\r\n         *\r\n         - newValue (string) #optional Use 'client' if you will be scrolling while interacting; Use 'page' if you want autoScroll to work\r\n         = (string | object) The current deltaSource or this Interactable\r\n        \\*/\r\n        deltaSource: function (newValue) {\r\n            if (newValue === 'page' || newValue === 'client') {\r\n                this.options.deltaSource = newValue;\r\n\r\n                return this;\r\n            }\r\n\r\n            return this.options.deltaSource;\r\n        },\r\n\r\n        /*\\\r\n         * Interactable.restrict\r\n         [ method ]\r\n         **\r\n         * Deprecated. Add a `restrict` property to the options object passed to\r\n         * @Interactable.draggable, @Interactable.resizable or @Interactable.gesturable instead.\r\n         *\r\n         * Returns or sets the rectangles within which actions on this\r\n         * interactable (after snap calculations) are restricted. By default,\r\n         * restricting is relative to the pointer coordinates. You can change\r\n         * this by setting the\r\n         * [`elementRect`](https://github.com/taye/interact.js/pull/72).\r\n         **\r\n         - options (object) #optional an object with keys drag, resize, and/or gesture whose values are rects, Elements, CSS selectors, or 'parent' or 'self'\r\n         = (object) The current restrictions object or this Interactable\r\n         **\r\n         | interact(element).restrict({\r\n         |     // the rect will be `interact.getElementRect(element.parentNode)`\r\n         |     drag: element.parentNode,\r\n         |\r\n         |     // x and y are relative to the the interactable's origin\r\n         |     resize: { x: 100, y: 100, width: 200, height: 200 }\r\n         | })\r\n         |\r\n         | interact('.draggable').restrict({\r\n         |     // the rect will be the selected element's parent\r\n         |     drag: 'parent',\r\n         |\r\n         |     // do not restrict during normal movement.\r\n         |     // Instead, trigger only one restricted move event\r\n         |     // immediately before the end event.\r\n         |     endOnly: true,\r\n         |\r\n         |     // https://github.com/taye/interact.js/pull/72#issue-41813493\r\n         |     elementRect: { top: 0, left: 0, bottom: 1, right: 1 }\r\n         | });\r\n        \\*/\r\n        restrict: function (options) {\r\n            if (!isObject(options)) {\r\n                return this.setOptions('restrict', options);\r\n            }\r\n\r\n            var actions = ['drag', 'resize', 'gesture'],\r\n                ret;\r\n\r\n            for (var i = 0; i < actions.length; i++) {\r\n                var action = actions[i];\r\n\r\n                if (action in options) {\r\n                    var perAction = extend({\r\n                            actions: [action],\r\n                            restriction: options[action]\r\n                        }, options);\r\n\r\n                    ret = this.setOptions('restrict', perAction);\r\n                }\r\n            }\r\n\r\n            return ret;\r\n        },\r\n\r\n        /*\\\r\n         * Interactable.context\r\n         [ method ]\r\n         *\r\n         * Gets the selector context Node of the Interactable. The default is `window.document`.\r\n         *\r\n         = (Node) The context Node of this Interactable\r\n         **\r\n        \\*/\r\n        context: function () {\r\n            return this._context;\r\n        },\r\n\r\n        _context: document,\r\n\r\n        /*\\\r\n         * Interactable.ignoreFrom\r\n         [ method ]\r\n         *\r\n         * If the target of the `mousedown`, `pointerdown` or `touchstart`\r\n         * event or any of it's parents match the given CSS selector or\r\n         * Element, no drag/resize/gesture is started.\r\n         *\r\n         - newValue (string | Element | null) #optional a CSS selector string, an Element or `null` to not ignore any elements\r\n         = (string | Element | object) The current ignoreFrom value or this Interactable\r\n         **\r\n         | interact(element, { ignoreFrom: document.getElementById('no-action') });\r\n         | // or\r\n         | interact(element).ignoreFrom('input, textarea, a');\r\n        \\*/\r\n        ignoreFrom: function (newValue) {\r\n            if (trySelector(newValue)) {            // CSS selector to match event.target\r\n                this.options.ignoreFrom = newValue;\r\n                return this;\r\n            }\r\n\r\n            if (isElement(newValue)) {              // specific element\r\n                this.options.ignoreFrom = newValue;\r\n                return this;\r\n            }\r\n\r\n            return this.options.ignoreFrom;\r\n        },\r\n\r\n        /*\\\r\n         * Interactable.allowFrom\r\n         [ method ]\r\n         *\r\n         * A drag/resize/gesture is started only If the target of the\r\n         * `mousedown`, `pointerdown` or `touchstart` event or any of it's\r\n         * parents match the given CSS selector or Element.\r\n         *\r\n         - newValue (string | Element | null) #optional a CSS selector string, an Element or `null` to allow from any element\r\n         = (string | Element | object) The current allowFrom value or this Interactable\r\n         **\r\n         | interact(element, { allowFrom: document.getElementById('drag-handle') });\r\n         | // or\r\n         | interact(element).allowFrom('.handle');\r\n        \\*/\r\n        allowFrom: function (newValue) {\r\n            if (trySelector(newValue)) {            // CSS selector to match event.target\r\n                this.options.allowFrom = newValue;\r\n                return this;\r\n            }\r\n\r\n            if (isElement(newValue)) {              // specific element\r\n                this.options.allowFrom = newValue;\r\n                return this;\r\n            }\r\n\r\n            return this.options.allowFrom;\r\n        },\r\n\r\n        /*\\\r\n         * Interactable.element\r\n         [ method ]\r\n         *\r\n         * If this is not a selector Interactable, it returns the element this\r\n         * interactable represents\r\n         *\r\n         = (Element) HTML / SVG Element\r\n        \\*/\r\n        element: function () {\r\n            return this._element;\r\n        },\r\n\r\n        /*\\\r\n         * Interactable.fire\r\n         [ method ]\r\n         *\r\n         * Calls listeners for the given InteractEvent type bound globally\r\n         * and directly to this Interactable\r\n         *\r\n         - iEvent (InteractEvent) The InteractEvent object to be fired on this Interactable\r\n         = (Interactable) this Interactable\r\n        \\*/\r\n        fire: function (iEvent) {\r\n            if (!(iEvent && iEvent.type) || !contains(eventTypes, iEvent.type)) {\r\n                return this;\r\n            }\r\n\r\n            var listeners,\r\n                i,\r\n                len,\r\n                onEvent = 'on' + iEvent.type,\r\n                funcName = '';\r\n\r\n            // Interactable#on() listeners\r\n            if (iEvent.type in this._iEvents) {\r\n                listeners = this._iEvents[iEvent.type];\r\n\r\n                for (i = 0, len = listeners.length; i < len && !iEvent.immediatePropagationStopped; i++) {\r\n                    funcName = listeners[i].name;\r\n                    listeners[i](iEvent);\r\n                }\r\n            }\r\n\r\n            // interactable.onevent listener\r\n            if (isFunction(this[onEvent])) {\r\n                funcName = this[onEvent].name;\r\n                this[onEvent](iEvent);\r\n            }\r\n\r\n            // interact.on() listeners\r\n            if (iEvent.type in globalEvents && (listeners = globalEvents[iEvent.type]))  {\r\n\r\n                for (i = 0, len = listeners.length; i < len && !iEvent.immediatePropagationStopped; i++) {\r\n                    funcName = listeners[i].name;\r\n                    listeners[i](iEvent);\r\n                }\r\n            }\r\n\r\n            return this;\r\n        },\r\n\r\n        /*\\\r\n         * Interactable.on\r\n         [ method ]\r\n         *\r\n         * Binds a listener for an InteractEvent or DOM event.\r\n         *\r\n         - eventType  (string | array | object) The types of events to listen for\r\n         - listener   (function) The function to be called on the given event(s)\r\n         - useCapture (boolean) #optional useCapture flag for addEventListener\r\n         = (object) This Interactable\r\n        \\*/\r\n        on: function (eventType, listener, useCapture) {\r\n            var i;\r\n\r\n            if (isString(eventType) && eventType.search(' ') !== -1) {\r\n                eventType = eventType.trim().split(/ +/);\r\n            }\r\n\r\n            if (isArray(eventType)) {\r\n                for (i = 0; i < eventType.length; i++) {\r\n                    this.on(eventType[i], listener, useCapture);\r\n                }\r\n\r\n                return this;\r\n            }\r\n\r\n            if (isObject(eventType)) {\r\n                for (var prop in eventType) {\r\n                    this.on(prop, eventType[prop], listener);\r\n                }\r\n\r\n                return this;\r\n            }\r\n\r\n            if (eventType === 'wheel') {\r\n                eventType = wheelEvent;\r\n            }\r\n\r\n            // convert to boolean\r\n            useCapture = useCapture? true: false;\r\n\r\n            if (contains(eventTypes, eventType)) {\r\n                // if this type of event was never bound to this Interactable\r\n                if (!(eventType in this._iEvents)) {\r\n                    this._iEvents[eventType] = [listener];\r\n                }\r\n                else {\r\n                    this._iEvents[eventType].push(listener);\r\n                }\r\n            }\r\n            // delegated event for selector\r\n            else if (this.selector) {\r\n                if (!delegatedEvents[eventType]) {\r\n                    delegatedEvents[eventType] = {\r\n                        selectors: [],\r\n                        contexts : [],\r\n                        listeners: []\r\n                    };\r\n\r\n                    // add delegate listener functions\r\n                    for (i = 0; i < documents.length; i++) {\r\n                        events.add(documents[i], eventType, delegateListener);\r\n                        events.add(documents[i], eventType, delegateUseCapture, true);\r\n                    }\r\n                }\r\n\r\n                var delegated = delegatedEvents[eventType],\r\n                    index;\r\n\r\n                for (index = delegated.selectors.length - 1; index >= 0; index--) {\r\n                    if (delegated.selectors[index] === this.selector\r\n                        && delegated.contexts[index] === this._context) {\r\n                        break;\r\n                    }\r\n                }\r\n\r\n                if (index === -1) {\r\n                    index = delegated.selectors.length;\r\n\r\n                    delegated.selectors.push(this.selector);\r\n                    delegated.contexts .push(this._context);\r\n                    delegated.listeners.push([]);\r\n                }\r\n\r\n                // keep listener and useCapture flag\r\n                delegated.listeners[index].push([listener, useCapture]);\r\n            }\r\n            else {\r\n                events.add(this._element, eventType, listener, useCapture);\r\n            }\r\n\r\n            return this;\r\n        },\r\n\r\n        /*\\\r\n         * Interactable.off\r\n         [ method ]\r\n         *\r\n         * Removes an InteractEvent or DOM event listener\r\n         *\r\n         - eventType  (string | array | object) The types of events that were listened for\r\n         - listener   (function) The listener function to be removed\r\n         - useCapture (boolean) #optional useCapture flag for removeEventListener\r\n         = (object) This Interactable\r\n        \\*/\r\n        off: function (eventType, listener, useCapture) {\r\n            var i;\r\n\r\n            if (isString(eventType) && eventType.search(' ') !== -1) {\r\n                eventType = eventType.trim().split(/ +/);\r\n            }\r\n\r\n            if (isArray(eventType)) {\r\n                for (i = 0; i < eventType.length; i++) {\r\n                    this.off(eventType[i], listener, useCapture);\r\n                }\r\n\r\n                return this;\r\n            }\r\n\r\n            if (isObject(eventType)) {\r\n                for (var prop in eventType) {\r\n                    this.off(prop, eventType[prop], listener);\r\n                }\r\n\r\n                return this;\r\n            }\r\n\r\n            var eventList,\r\n                index = -1;\r\n\r\n            // convert to boolean\r\n            useCapture = useCapture? true: false;\r\n\r\n            if (eventType === 'wheel') {\r\n                eventType = wheelEvent;\r\n            }\r\n\r\n            // if it is an action event type\r\n            if (contains(eventTypes, eventType)) {\r\n                eventList = this._iEvents[eventType];\r\n\r\n                if (eventList && (index = indexOf(eventList, listener)) !== -1) {\r\n                    this._iEvents[eventType].splice(index, 1);\r\n                }\r\n            }\r\n            // delegated event\r\n            else if (this.selector) {\r\n                var delegated = delegatedEvents[eventType],\r\n                    matchFound = false;\r\n\r\n                if (!delegated) { return this; }\r\n\r\n                // count from last index of delegated to 0\r\n                for (index = delegated.selectors.length - 1; index >= 0; index--) {\r\n                    // look for matching selector and context Node\r\n                    if (delegated.selectors[index] === this.selector\r\n                        && delegated.contexts[index] === this._context) {\r\n\r\n                        var listeners = delegated.listeners[index];\r\n\r\n                        // each item of the listeners array is an array: [function, useCaptureFlag]\r\n                        for (i = listeners.length - 1; i >= 0; i--) {\r\n                            var fn = listeners[i][0],\r\n                                useCap = listeners[i][1];\r\n\r\n                            // check if the listener functions and useCapture flags match\r\n                            if (fn === listener && useCap === useCapture) {\r\n                                // remove the listener from the array of listeners\r\n                                listeners.splice(i, 1);\r\n\r\n                                // if all listeners for this interactable have been removed\r\n                                // remove the interactable from the delegated arrays\r\n                                if (!listeners.length) {\r\n                                    delegated.selectors.splice(index, 1);\r\n                                    delegated.contexts .splice(index, 1);\r\n                                    delegated.listeners.splice(index, 1);\r\n\r\n                                    // remove delegate function from context\r\n                                    events.remove(this._context, eventType, delegateListener);\r\n                                    events.remove(this._context, eventType, delegateUseCapture, true);\r\n\r\n                                    // remove the arrays if they are empty\r\n                                    if (!delegated.selectors.length) {\r\n                                        delegatedEvents[eventType] = null;\r\n                                    }\r\n                                }\r\n\r\n                                // only remove one listener\r\n                                matchFound = true;\r\n                                break;\r\n                            }\r\n                        }\r\n\r\n                        if (matchFound) { break; }\r\n                    }\r\n                }\r\n            }\r\n            // remove listener from this Interatable's element\r\n            else {\r\n                events.remove(this._element, eventType, listener, useCapture);\r\n            }\r\n\r\n            return this;\r\n        },\r\n\r\n        /*\\\r\n         * Interactable.set\r\n         [ method ]\r\n         *\r\n         * Reset the options of this Interactable\r\n         - options (object) The new settings to apply\r\n         = (object) This Interactable\r\n        \\*/\r\n        set: function (options) {\r\n            if (!isObject(options)) {\r\n                options = {};\r\n            }\r\n\r\n            this.options = extend({}, defaultOptions.base);\r\n\r\n            var i,\r\n                actions = ['drag', 'drop', 'resize', 'gesture'],\r\n                methods = ['draggable', 'dropzone', 'resizable', 'gesturable'],\r\n                perActions = extend(extend({}, defaultOptions.perAction), options[action] || {});\r\n\r\n            for (i = 0; i < actions.length; i++) {\r\n                var action = actions[i];\r\n\r\n                this.options[action] = extend({}, defaultOptions[action]);\r\n\r\n                this.setPerAction(action, perActions);\r\n\r\n                this[methods[i]](options[action]);\r\n            }\r\n\r\n            var settings = [\r\n                    'accept', 'actionChecker', 'allowFrom', 'deltaSource',\r\n                    'dropChecker', 'ignoreFrom', 'origin', 'preventDefault',\r\n                    'rectChecker', 'styleCursor'\r\n                ];\r\n\r\n            for (i = 0, len = settings.length; i < len; i++) {\r\n                var setting = settings[i];\r\n\r\n                this.options[setting] = defaultOptions.base[setting];\r\n\r\n                if (setting in options) {\r\n                    this[setting](options[setting]);\r\n                }\r\n            }\r\n\r\n            return this;\r\n        },\r\n\r\n        /*\\\r\n         * Interactable.unset\r\n         [ method ]\r\n         *\r\n         * Remove this interactable from the list of interactables and remove\r\n         * it's drag, drop, resize and gesture capabilities\r\n         *\r\n         = (object) @interact\r\n        \\*/\r\n        unset: function () {\r\n            events.remove(this._element, 'all');\r\n\r\n            if (!isString(this.selector)) {\r\n                events.remove(this, 'all');\r\n                if (this.options.styleCursor) {\r\n                    this._element.style.cursor = '';\r\n                }\r\n            }\r\n            else {\r\n                // remove delegated events\r\n                for (var type in delegatedEvents) {\r\n                    var delegated = delegatedEvents[type];\r\n\r\n                    for (var i = 0; i < delegated.selectors.length; i++) {\r\n                        if (delegated.selectors[i] === this.selector\r\n                            && delegated.contexts[i] === this._context) {\r\n\r\n                            delegated.selectors.splice(i, 1);\r\n                            delegated.contexts .splice(i, 1);\r\n                            delegated.listeners.splice(i, 1);\r\n\r\n                            // remove the arrays if they are empty\r\n                            if (!delegated.selectors.length) {\r\n                                delegatedEvents[type] = null;\r\n                            }\r\n                        }\r\n\r\n                        events.remove(this._context, type, delegateListener);\r\n                        events.remove(this._context, type, delegateUseCapture, true);\r\n\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n\r\n            this.dropzone(false);\r\n\r\n            interactables.splice(indexOf(interactables, this), 1);\r\n\r\n            return interact;\r\n        }\r\n    };\r\n\r\n    function warnOnce (method, message) {\r\n        var warned = false;\r\n\r\n        return function () {\r\n            if (!warned) {\r\n                window.console.warn(message);\r\n                warned = true;\r\n            }\r\n\r\n            return method.apply(this, arguments);\r\n        };\r\n    }\r\n\r\n    Interactable.prototype.snap = warnOnce(Interactable.prototype.snap,\r\n         'Interactable#snap is deprecated. See the new documentation for snapping at http://interactjs.io/docs/snapping');\r\n    Interactable.prototype.restrict = warnOnce(Interactable.prototype.restrict,\r\n         'Interactable#restrict is deprecated. See the new documentation for resticting at http://interactjs.io/docs/restriction');\r\n    Interactable.prototype.inertia = warnOnce(Interactable.prototype.inertia,\r\n         'Interactable#inertia is deprecated. See the new documentation for inertia at http://interactjs.io/docs/inertia');\r\n    Interactable.prototype.autoScroll = warnOnce(Interactable.prototype.autoScroll,\r\n         'Interactable#autoScroll is deprecated. See the new documentation for autoScroll at http://interactjs.io/docs/#autoscroll');\r\n    Interactable.prototype.squareResize = warnOnce(Interactable.prototype.squareResize,\r\n         'Interactable#squareResize is deprecated. See http://interactjs.io/docs/#resize-square');\r\n\r\n    Interactable.prototype.accept = warnOnce(Interactable.prototype.accept,\r\n         'Interactable#accept is deprecated. use Interactable#dropzone({ accept: target }) instead');\r\n    Interactable.prototype.dropChecker = warnOnce(Interactable.prototype.dropChecker,\r\n         'Interactable#dropChecker is deprecated. use Interactable#dropzone({ dropChecker: checkerFunction }) instead');\r\n    Interactable.prototype.context = warnOnce(Interactable.prototype.context,\r\n         'Interactable#context as a method is deprecated. It will soon be a DOM Node instead');\r\n\r\n    /*\\\r\n     * interact.isSet\r\n     [ method ]\r\n     *\r\n     * Check if an element has been set\r\n     - element (Element) The Element being searched for\r\n     = (boolean) Indicates if the element or CSS selector was previously passed to interact\r\n    \\*/\r\n    interact.isSet = function(element, options) {\r\n        return interactables.indexOfElement(element, options && options.context) !== -1;\r\n    };\r\n\r\n    /*\\\r\n     * interact.on\r\n     [ method ]\r\n     *\r\n     * Adds a global listener for an InteractEvent or adds a DOM event to\r\n     * `document`\r\n     *\r\n     - type       (string | array | object) The types of events to listen for\r\n     - listener   (function) The function to be called on the given event(s)\r\n     - useCapture (boolean) #optional useCapture flag for addEventListener\r\n     = (object) interact\r\n    \\*/\r\n    interact.on = function (type, listener, useCapture) {\r\n        if (isString(type) && type.search(' ') !== -1) {\r\n            type = type.trim().split(/ +/);\r\n        }\r\n\r\n        if (isArray(type)) {\r\n            for (var i = 0; i < type.length; i++) {\r\n                interact.on(type[i], listener, useCapture);\r\n            }\r\n\r\n            return interact;\r\n        }\r\n\r\n        if (isObject(type)) {\r\n            for (var prop in type) {\r\n                interact.on(prop, type[prop], listener);\r\n            }\r\n\r\n            return interact;\r\n        }\r\n\r\n        // if it is an InteractEvent type, add listener to globalEvents\r\n        if (contains(eventTypes, type)) {\r\n            // if this type of event was never bound\r\n            if (!globalEvents[type]) {\r\n                globalEvents[type] = [listener];\r\n            }\r\n            else {\r\n                globalEvents[type].push(listener);\r\n            }\r\n        }\r\n        // If non InteractEvent type, addEventListener to document\r\n        else {\r\n            events.add(document, type, listener, useCapture);\r\n        }\r\n\r\n        return interact;\r\n    };\r\n\r\n    /*\\\r\n     * interact.off\r\n     [ method ]\r\n     *\r\n     * Removes a global InteractEvent listener or DOM event from `document`\r\n     *\r\n     - type       (string | array | object) The types of events that were listened for\r\n     - listener   (function) The listener function to be removed\r\n     - useCapture (boolean) #optional useCapture flag for removeEventListener\r\n     = (object) interact\r\n     \\*/\r\n    interact.off = function (type, listener, useCapture) {\r\n        if (isString(type) && type.search(' ') !== -1) {\r\n            type = type.trim().split(/ +/);\r\n        }\r\n\r\n        if (isArray(type)) {\r\n            for (var i = 0; i < type.length; i++) {\r\n                interact.off(type[i], listener, useCapture);\r\n            }\r\n\r\n            return interact;\r\n        }\r\n\r\n        if (isObject(type)) {\r\n            for (var prop in type) {\r\n                interact.off(prop, type[prop], listener);\r\n            }\r\n\r\n            return interact;\r\n        }\r\n\r\n        if (!contains(eventTypes, type)) {\r\n            events.remove(document, type, listener, useCapture);\r\n        }\r\n        else {\r\n            var index;\r\n\r\n            if (type in globalEvents\r\n                && (index = indexOf(globalEvents[type], listener)) !== -1) {\r\n                globalEvents[type].splice(index, 1);\r\n            }\r\n        }\r\n\r\n        return interact;\r\n    };\r\n\r\n    /*\\\r\n     * interact.enableDragging\r\n     [ method ]\r\n     *\r\n     * Deprecated.\r\n     *\r\n     * Returns or sets whether dragging is enabled for any Interactables\r\n     *\r\n     - newValue (boolean) #optional `true` to allow the action; `false` to disable action for all Interactables\r\n     = (boolean | object) The current setting or interact\r\n    \\*/\r\n    interact.enableDragging = warnOnce(function (newValue) {\r\n        if (newValue !== null && newValue !== undefined) {\r\n            actionIsEnabled.drag = newValue;\r\n\r\n            return interact;\r\n        }\r\n        return actionIsEnabled.drag;\r\n    }, 'interact.enableDragging is deprecated and will soon be removed.');\r\n\r\n    /*\\\r\n     * interact.enableResizing\r\n     [ method ]\r\n     *\r\n     * Deprecated.\r\n     *\r\n     * Returns or sets whether resizing is enabled for any Interactables\r\n     *\r\n     - newValue (boolean) #optional `true` to allow the action; `false` to disable action for all Interactables\r\n     = (boolean | object) The current setting or interact\r\n    \\*/\r\n    interact.enableResizing = warnOnce(function (newValue) {\r\n        if (newValue !== null && newValue !== undefined) {\r\n            actionIsEnabled.resize = newValue;\r\n\r\n            return interact;\r\n        }\r\n        return actionIsEnabled.resize;\r\n    }, 'interact.enableResizing is deprecated and will soon be removed.');\r\n\r\n    /*\\\r\n     * interact.enableGesturing\r\n     [ method ]\r\n     *\r\n     * Deprecated.\r\n     *\r\n     * Returns or sets whether gesturing is enabled for any Interactables\r\n     *\r\n     - newValue (boolean) #optional `true` to allow the action; `false` to disable action for all Interactables\r\n     = (boolean | object) The current setting or interact\r\n    \\*/\r\n    interact.enableGesturing = warnOnce(function (newValue) {\r\n        if (newValue !== null && newValue !== undefined) {\r\n            actionIsEnabled.gesture = newValue;\r\n\r\n            return interact;\r\n        }\r\n        return actionIsEnabled.gesture;\r\n    }, 'interact.enableGesturing is deprecated and will soon be removed.');\r\n\r\n    interact.eventTypes = eventTypes;\r\n\r\n    /*\\\r\n     * interact.debug\r\n     [ method ]\r\n     *\r\n     * Returns debugging data\r\n     = (object) An object with properties that outline the current state and expose internal functions and variables\r\n    \\*/\r\n    interact.debug = function () {\r\n        var interaction = interactions[0] || new Interaction();\r\n\r\n        return {\r\n            interactions          : interactions,\r\n            target                : interaction.target,\r\n            dragging              : interaction.dragging,\r\n            resizing              : interaction.resizing,\r\n            gesturing             : interaction.gesturing,\r\n            prepared              : interaction.prepared,\r\n            matches               : interaction.matches,\r\n            matchElements         : interaction.matchElements,\r\n\r\n            prevCoords            : interaction.prevCoords,\r\n            startCoords           : interaction.startCoords,\r\n\r\n            pointerIds            : interaction.pointerIds,\r\n            pointers              : interaction.pointers,\r\n            addPointer            : listeners.addPointer,\r\n            removePointer         : listeners.removePointer,\r\n            recordPointer        : listeners.recordPointer,\r\n\r\n            snap                  : interaction.snapStatus,\r\n            restrict              : interaction.restrictStatus,\r\n            inertia               : interaction.inertiaStatus,\r\n\r\n            downTime              : interaction.downTimes[0],\r\n            downEvent             : interaction.downEvent,\r\n            downPointer           : interaction.downPointer,\r\n            prevEvent             : interaction.prevEvent,\r\n\r\n            Interactable          : Interactable,\r\n            interactables         : interactables,\r\n            pointerIsDown         : interaction.pointerIsDown,\r\n            defaultOptions        : defaultOptions,\r\n            defaultActionChecker  : defaultActionChecker,\r\n\r\n            actionCursors         : actionCursors,\r\n            dragMove              : listeners.dragMove,\r\n            resizeMove            : listeners.resizeMove,\r\n            gestureMove           : listeners.gestureMove,\r\n            pointerUp             : listeners.pointerUp,\r\n            pointerDown           : listeners.pointerDown,\r\n            pointerMove           : listeners.pointerMove,\r\n            pointerHover          : listeners.pointerHover,\r\n\r\n            eventTypes            : eventTypes,\r\n\r\n            events                : events,\r\n            globalEvents          : globalEvents,\r\n            delegatedEvents       : delegatedEvents,\r\n\r\n            prefixedPropREs       : prefixedPropREs\r\n        };\r\n    };\r\n\r\n    // expose the functions used to calculate multi-touch properties\r\n    interact.getPointerAverage = pointerAverage;\r\n    interact.getTouchBBox     = touchBBox;\r\n    interact.getTouchDistance = touchDistance;\r\n    interact.getTouchAngle    = touchAngle;\r\n\r\n    interact.getElementRect         = getElementRect;\r\n    interact.getElementClientRect   = getElementClientRect;\r\n    interact.matchesSelector        = matchesSelector;\r\n    interact.closest                = closest;\r\n\r\n    /*\\\r\n     * interact.margin\r\n     [ method ]\r\n     *\r\n     * Deprecated. Use `interact(target).resizable({ margin: number });` instead.\r\n     * Returns or sets the margin for autocheck resizing used in\r\n     * @Interactable.getAction. That is the distance from the bottom and right\r\n     * edges of an element clicking in which will start resizing\r\n     *\r\n     - newValue (number) #optional\r\n     = (number | interact) The current margin value or interact\r\n    \\*/\r\n    interact.margin = warnOnce(function (newvalue) {\r\n        if (isNumber(newvalue)) {\r\n            margin = newvalue;\r\n\r\n            return interact;\r\n        }\r\n        return margin;\r\n    },\r\n    'interact.margin is deprecated. Use interact(target).resizable({ margin: number }); instead.') ;\r\n\r\n    /*\\\r\n     * interact.supportsTouch\r\n     [ method ]\r\n     *\r\n     = (boolean) Whether or not the browser supports touch input\r\n    \\*/\r\n    interact.supportsTouch = function () {\r\n        return supportsTouch;\r\n    };\r\n\r\n    /*\\\r\n     * interact.supportsPointerEvent\r\n     [ method ]\r\n     *\r\n     = (boolean) Whether or not the browser supports PointerEvents\r\n    \\*/\r\n    interact.supportsPointerEvent = function () {\r\n        return supportsPointerEvent;\r\n    };\r\n\r\n    /*\\\r\n     * interact.stop\r\n     [ method ]\r\n     *\r\n     * Cancels all interactions (end events are not fired)\r\n     *\r\n     - event (Event) An event on which to call preventDefault()\r\n     = (object) interact\r\n    \\*/\r\n    interact.stop = function (event) {\r\n        for (var i = interactions.length - 1; i >= 0; i--) {\r\n            interactions[i].stop(event);\r\n        }\r\n\r\n        return interact;\r\n    };\r\n\r\n    /*\\\r\n     * interact.dynamicDrop\r\n     [ method ]\r\n     *\r\n     * Returns or sets whether the dimensions of dropzone elements are\r\n     * calculated on every dragmove or only on dragstart for the default\r\n     * dropChecker\r\n     *\r\n     - newValue (boolean) #optional True to check on each move. False to check only before start\r\n     = (boolean | interact) The current setting or interact\r\n    \\*/\r\n    interact.dynamicDrop = function (newValue) {\r\n        if (isBool(newValue)) {\r\n            //if (dragging && dynamicDrop !== newValue && !newValue) {\r\n                //calcRects(dropzones);\r\n            //}\r\n\r\n            dynamicDrop = newValue;\r\n\r\n            return interact;\r\n        }\r\n        return dynamicDrop;\r\n    };\r\n\r\n    /*\\\r\n     * interact.pointerMoveTolerance\r\n     [ method ]\r\n     * Returns or sets the distance the pointer must be moved before an action\r\n     * sequence occurs. This also affects tolerance for tap events.\r\n     *\r\n     - newValue (number) #optional The movement from the start position must be greater than this value\r\n     = (number | Interactable) The current setting or interact\r\n    \\*/\r\n    interact.pointerMoveTolerance = function (newValue) {\r\n        if (isNumber(newValue)) {\r\n            pointerMoveTolerance = newValue;\r\n\r\n            return this;\r\n        }\r\n\r\n        return pointerMoveTolerance;\r\n    };\r\n\r\n    /*\\\r\n     * interact.maxInteractions\r\n     [ method ]\r\n     **\r\n     * Returns or sets the maximum number of concurrent interactions allowed.\r\n     * By default only 1 interaction is allowed at a time (for backwards\r\n     * compatibility). To allow multiple interactions on the same Interactables\r\n     * and elements, you need to enable it in the draggable, resizable and\r\n     * gesturable `'max'` and `'maxPerElement'` options.\r\n     **\r\n     - newValue (number) #optional Any number. newValue <= 0 means no interactions.\r\n    \\*/\r\n    interact.maxInteractions = function (newValue) {\r\n        if (isNumber(newValue)) {\r\n            maxInteractions = newValue;\r\n\r\n            return this;\r\n        }\r\n\r\n        return maxInteractions;\r\n    };\r\n\r\n    interact.createSnapGrid = function (grid) {\r\n        return function (x, y) {\r\n            var offsetX = 0,\r\n                offsetY = 0;\r\n\r\n            if (isObject(grid.offset)) {\r\n                offsetX = grid.offset.x;\r\n                offsetY = grid.offset.y;\r\n            }\r\n\r\n            var gridx = Math.round((x - offsetX) / grid.x),\r\n                gridy = Math.round((y - offsetY) / grid.y),\r\n\r\n                newX = gridx * grid.x + offsetX,\r\n                newY = gridy * grid.y + offsetY;\r\n\r\n            return {\r\n                x: newX,\r\n                y: newY,\r\n                range: grid.range\r\n            };\r\n        };\r\n    };\r\n\r\n    function endAllInteractions (event) {\r\n        for (var i = 0; i < interactions.length; i++) {\r\n            interactions[i].pointerEnd(event, event);\r\n        }\r\n    }\r\n\r\n    function listenToDocument (doc) {\r\n        if (contains(documents, doc)) { return; }\r\n\r\n        var win = doc.defaultView || doc.parentWindow;\r\n\r\n        // add delegate event listener\r\n        for (var eventType in delegatedEvents) {\r\n            events.add(doc, eventType, delegateListener);\r\n            events.add(doc, eventType, delegateUseCapture, true);\r\n        }\r\n\r\n        if (PointerEvent) {\r\n            if (PointerEvent === win.MSPointerEvent) {\r\n                pEventTypes = {\r\n                    up: 'MSPointerUp', down: 'MSPointerDown', over: 'mouseover',\r\n                    out: 'mouseout', move: 'MSPointerMove', cancel: 'MSPointerCancel' };\r\n            }\r\n            else {\r\n                pEventTypes = {\r\n                    up: 'pointerup', down: 'pointerdown', over: 'pointerover',\r\n                    out: 'pointerout', move: 'pointermove', cancel: 'pointercancel' };\r\n            }\r\n\r\n            events.add(doc, pEventTypes.down  , listeners.selectorDown );\r\n            events.add(doc, pEventTypes.move  , listeners.pointerMove  );\r\n            events.add(doc, pEventTypes.over  , listeners.pointerOver  );\r\n            events.add(doc, pEventTypes.out   , listeners.pointerOut   );\r\n            events.add(doc, pEventTypes.up    , listeners.pointerUp    );\r\n            events.add(doc, pEventTypes.cancel, listeners.pointerCancel);\r\n\r\n            // autoscroll\r\n            events.add(doc, pEventTypes.move, listeners.autoScrollMove);\r\n        }\r\n        else {\r\n            events.add(doc, 'mousedown', listeners.selectorDown);\r\n            events.add(doc, 'mousemove', listeners.pointerMove );\r\n            events.add(doc, 'mouseup'  , listeners.pointerUp   );\r\n            events.add(doc, 'mouseover', listeners.pointerOver );\r\n            events.add(doc, 'mouseout' , listeners.pointerOut  );\r\n\r\n            events.add(doc, 'touchstart' , listeners.selectorDown );\r\n            events.add(doc, 'touchmove'  , listeners.pointerMove  );\r\n            events.add(doc, 'touchend'   , listeners.pointerUp    );\r\n            events.add(doc, 'touchcancel', listeners.pointerCancel);\r\n\r\n            // autoscroll\r\n            events.add(doc, 'mousemove', listeners.autoScrollMove);\r\n            events.add(doc, 'touchmove', listeners.autoScrollMove);\r\n        }\r\n\r\n        events.add(win, 'blur', endAllInteractions);\r\n\r\n        try {\r\n            if (win.frameElement) {\r\n                var parentDoc = win.frameElement.ownerDocument,\r\n                    parentWindow = parentDoc.defaultView;\r\n\r\n                events.add(parentDoc   , 'mouseup'      , listeners.pointerEnd);\r\n                events.add(parentDoc   , 'touchend'     , listeners.pointerEnd);\r\n                events.add(parentDoc   , 'touchcancel'  , listeners.pointerEnd);\r\n                events.add(parentDoc   , 'pointerup'    , listeners.pointerEnd);\r\n                events.add(parentDoc   , 'MSPointerUp'  , listeners.pointerEnd);\r\n                events.add(parentWindow, 'blur'         , endAllInteractions );\r\n            }\r\n        }\r\n        catch (error) {\r\n            interact.windowParentError = error;\r\n        }\r\n\r\n        // prevent native HTML5 drag on interact.js target elements\r\n        events.add(doc, 'dragstart', function (event) {\r\n            for (var i = 0; i < interactions.length; i++) {\r\n                var interaction = interactions[i];\r\n\r\n                if (interaction.element\r\n                    && (interaction.element === event.target\r\n                        || nodeContains(interaction.element, event.target))) {\r\n\r\n                    interaction.checkAndPreventDefault(event, interaction.target, interaction.element);\r\n                    return;\r\n                }\r\n            }\r\n        });\r\n\r\n        if (events.useAttachEvent) {\r\n            // For IE's lack of Event#preventDefault\r\n            events.add(doc, 'selectstart', function (event) {\r\n                var interaction = interactions[0];\r\n\r\n                if (interaction.currentAction()) {\r\n                    interaction.checkAndPreventDefault(event);\r\n                }\r\n            });\r\n\r\n            // For IE's bad dblclick event sequence\r\n            events.add(doc, 'dblclick', doOnInteractions('ie8Dblclick'));\r\n        }\r\n\r\n        documents.push(doc);\r\n    }\r\n\r\n    listenToDocument(document);\r\n\r\n    function indexOf (array, target) {\r\n        for (var i = 0, len = array.length; i < len; i++) {\r\n            if (array[i] === target) {\r\n                return i;\r\n            }\r\n        }\r\n\r\n        return -1;\r\n    }\r\n\r\n    function contains (array, target) {\r\n        return indexOf(array, target) !== -1;\r\n    }\r\n\r\n    function matchesSelector (element, selector, nodeList) {\r\n        if (ie8MatchesSelector) {\r\n            return ie8MatchesSelector(element, selector, nodeList);\r\n        }\r\n\r\n        // remove /deep/ from selectors if shadowDOM polyfill is used\r\n        if (window !== realWindow) {\r\n            selector = selector.replace(/\\/deep\\//g, ' ');\r\n        }\r\n\r\n        return element[prefixedMatchesSelector](selector);\r\n    }\r\n\r\n    function matchesUpTo (element, selector, limit) {\r\n        while (isElement(element)) {\r\n            if (matchesSelector(element, selector)) {\r\n                return true;\r\n            }\r\n\r\n            element = parentElement(element);\r\n\r\n            if (element === limit) {\r\n                return matchesSelector(element, selector);\r\n            }\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    // For IE8's lack of an Element#matchesSelector\r\n    // taken from http://tanalin.com/en/blog/2012/12/matches-selector-ie8/ and modified\r\n    if (!(prefixedMatchesSelector in Element.prototype) || !isFunction(Element.prototype[prefixedMatchesSelector])) {\r\n        ie8MatchesSelector = function (element, selector, elems) {\r\n            elems = elems || element.parentNode.querySelectorAll(selector);\r\n\r\n            for (var i = 0, len = elems.length; i < len; i++) {\r\n                if (elems[i] === element) {\r\n                    return true;\r\n                }\r\n            }\r\n\r\n            return false;\r\n        };\r\n    }\r\n\r\n    // requestAnimationFrame polyfill\r\n    (function() {\r\n        var lastTime = 0,\r\n            vendors = ['ms', 'moz', 'webkit', 'o'];\r\n\r\n        for(var x = 0; x < vendors.length && !realWindow.requestAnimationFrame; ++x) {\r\n            reqFrame = realWindow[vendors[x]+'RequestAnimationFrame'];\r\n            cancelFrame = realWindow[vendors[x]+'CancelAnimationFrame'] || realWindow[vendors[x]+'CancelRequestAnimationFrame'];\r\n        }\r\n\r\n        if (!reqFrame) {\r\n            reqFrame = function(callback) {\r\n                var currTime = new Date().getTime(),\r\n                    timeToCall = Math.max(0, 16 - (currTime - lastTime)),\r\n                    id = setTimeout(function() { callback(currTime + timeToCall); },\r\n                  timeToCall);\r\n                lastTime = currTime + timeToCall;\r\n                return id;\r\n            };\r\n        }\r\n\r\n        if (!cancelFrame) {\r\n            cancelFrame = function(id) {\r\n                clearTimeout(id);\r\n            };\r\n        }\r\n    }());\r\n\r\n    /* global exports: true, module, define */\r\n\r\n    // http://documentcloud.github.io/underscore/docs/underscore.html#section-11\r\n    if (typeof exports !== 'undefined') {\r\n        if (typeof module !== 'undefined' && module.exports) {\r\n            exports = module.exports = interact;\r\n        }\r\n        exports.interact = interact;\r\n    }\r\n    // AMD\r\n    else if (typeof define === 'function' && define.amd) {\r\n        define('interact', function() {\r\n            return interact;\r\n        });\r\n    }\r\n    else {\r\n        realWindow.interact = interact;\r\n    }\r\n\r\n} (typeof window === 'undefined'? undefined : window));","import {inject} from 'aurelia-framework';\r\nimport {PictureService} from '../../services/picture-service';\r\nimport * as interact from './interact';\r\n\r\n@inject(PictureService)\r\nexport class PictureTest {\r\n\r\n    pictureUrl = '';\r\n    isLoaded = false;\r\n    \r\n    constructor(pictureService) {\r\n        this.pictureService = pictureService;\r\n    }\r\n\r\n    created() {\r\n        console.log(interact.interact);\r\n        interact.interact('#dragTest')\r\n                .draggable({\r\n                    // enable inertial throwing\r\n                    inertia: true,\r\n                    // keep the element within the area of it's parent\r\n                    restrict: {\r\n                        restriction: \"parent\",\r\n                        endOnly: true,\r\n                        elementRect: { top: -0.1, left: -0.1, bottom: 1.1, right: 1.1 }\r\n                    },\r\n                    // enable autoScroll\r\n                    autoScroll: true,\r\n                    // call this function on every dragmove event\r\n                    onmove: this.dragMoveListener,\r\n                    // call this function on every dragend event\r\n                    onend: function (event) {\r\n                    var textEl = event.target.querySelector('p');\r\n                        textEl && (textEl.textContent =\r\n                            'moved a distance of '\r\n                            + (Math.sqrt(event.dx * event.dx +\r\n                                        event.dy * event.dy)|0) + 'px');\r\n                    }\r\n                })\r\n                .resizable({\r\n                    preserveAspectRatio: true,\r\n                    edges: { left: true, right: true, bottom: true, top: true }\r\n                })\r\n                .on('resizemove', function (event) {\r\n                    var target = event.target,\r\n                        x = (parseFloat(target.getAttribute('data-x')) || 0),\r\n                        y = (parseFloat(target.getAttribute('data-y')) || 0);\r\n\r\n                    // update the element's style\r\n                    target.style.width  = event.rect.width + 'px';\r\n                    target.style.height = event.rect.height + 'px';\r\n\r\n                    // translate when resizing from top or left edges\r\n                    x += event.deltaRect.left;\r\n                    y += event.deltaRect.top;\r\n\r\n                    target.style.webkitTransform = target.style.transform =\r\n                        'translate(' + x + 'px,' + y + 'px)';\r\n\r\n                    target.setAttribute('data-x', x);\r\n                    target.setAttribute('data-y', y);\r\n                    target.textContent = Math.round(event.rect.width) + '' + Math.round(event.rect.height);\r\n                });\r\n    }\r\n\r\n    test() {\r\n        this.pictureService.getPicture('testFrame', false).then(\r\n            (success) => {\r\n                console.log('SUCCESS');\r\n                console.log(success);\r\n                var response = JSON.parse(success.response);\r\n                this.pictureUrl = response.imageUrl;\r\n                this.isLoaded = true;\r\n            },\r\n            (failure) => {\r\n                console.log('FAILURE');\r\n                console.log(failure);\r\n            }\r\n        )\r\n    }\r\n    \r\n    dragMoveListener(event) {\r\n        // console.log(event);\r\n      var target = event.target,\r\n          // keep the dragged position in the data-x/data-y attributes\r\n          x = (parseFloat(target.getAttribute('data-x')) || 0) + event.dx,\r\n          y = (parseFloat(target.getAttribute('data-y')) || 0) + event.dy;\r\n\r\n      // translate the element\r\n      target.style.webkitTransform =\r\n          target.style.transform =\r\n          'translate(' + x + 'px, ' + y + 'px)';\r\n\r\n      // update the posiion attributes\r\n      target.setAttribute('data-x', x);\r\n      target.setAttribute('data-y', y);\r\n  }\r\n}","import {inject} from 'aurelia-framework';\r\nimport {UserService} from '../../services/user-service';\r\n\r\n@inject(UserService)\r\nexport class UserList {\r\n    constructor(userService) {\r\n        this.userService = userService;\r\n        this.users = [];\r\n        this.error = {};\r\n        this.isWorking = false;\r\n    }\r\n\r\n    created() {\r\n        this.updateUserList(0, 10);\r\n    }\r\n\r\n    updateUserList(page, size) {\r\n        this.isWorking = true;\r\n        this.userService.getUsers(page, size)\r\n                .then(\r\n                    userResponse => {\r\n                        this.users = JSON.parse(userResponse.response);\r\n                        this.isWorking = false;\r\n                    }, \r\n                    errorResponse => {\r\n                        this.error.title = 'Ups';\r\n                        this.error.description = 'Parece que el sistema no response, por favor intenta nuevamente mas tarde.';\r\n                        this.isWorking = false;\r\n                    }\r\n                );\r\n    }\r\n\r\n}","import {inject, NewInstance} from 'aurelia-framework';\r\nimport {ValidationController, validateTrigger, ValidationRules} from 'aurelia-validation';\r\nimport {UserService} from '../../services/user-service';\r\n\r\n@inject(UserService,NewInstance.of(ValidationController))\r\nexport class UserRegistration {\r\n    \r\n    firstName = '';\r\n    lastName = '';\r\n    email = '';\r\n    password = '';\r\n\r\n    constructor(userService, validationController) {\r\n        this.userService = userService;\r\n        this.validationController = validationController;\r\n        this.isWorking = false;\r\n        this.success = false;\r\n        this.serverError = {};\r\n    }\r\n\r\n    created() {\r\n        this.validationController.validateTrigger = validateTrigger.manual;\r\n\r\n        ValidationRules\r\n            .ensure(\"firstName\").required().withMessage(\"El nombre no puede estar vacio.\")\r\n            .ensure(\"lastName\").required().withMessage(\"El apellido no puede estar vacio.\")\r\n            .ensure(\"email\").email().required().withMessage(\"El email no es valido, por favor ingrese un email valido.\")\r\n            .ensure(\"password\").minLength(8).required().withMessage(\"La contrasea debe tener al menos 8 caracteres\")\r\n            .on(this);\r\n    }\r\n\r\n    register() {\r\n        this.success = false;\r\n        this.isWorking = true;\r\n\r\n        var user = { \r\n            firstName: this.firstName,\r\n            lastName: this.lastName,\r\n            email: this.email, \r\n            password: this.password\r\n        }\r\n\r\n        setTimeout(() => {\r\n            this.validationController.validate()\r\n                .then((validation) => {\r\n                    if(validation.valid) {\r\n                        this.success = true;\r\n                    }\r\n                }).then(() => this.isWorking = false);\r\n        }, 1000);\r\n    }\r\n\r\n    postUser(user) {\r\n        this.userService.postUser(user).then(\r\n            () => {\r\n                this.success = true;\r\n            },\r\n            failure => {\r\n                var failureMessage = JSON.parse(failure.response);\r\n                this.serverError = {\r\n                    title: failureMessage.title,\r\n                    description: failureMessage.description\r\n                };\r\n            }\r\n        ).then(() => this.isWorking = false);\r\n    }\r\n\r\n}","import {inject} from 'aurelia-framework';\r\nimport {PictureService} from '../../services/picture-service';\r\n\r\n@inject(PictureService)\r\nexport class PictureUpload {\r\n    constructor(pictureService) {\r\n        this.pictureService = pictureService;\r\n    }\r\n\r\n    doUpload() {\r\n        this.pictureService.putPicture('test-file-upload', this.selectedFiles[0], 'png').then(\r\n            (success) => {\r\n                console.log(success);\r\n            },\r\n            (failure) => {\r\n                console.log(failure);\r\n            }\r\n        );\r\n    }\r\n\r\n     clearFiles() {\r\n        document.getElementById(\"files\").value = \"\";\r\n    }\r\n}"],"sourceRoot":".."}